{"version":3,"file":"search-trigger-button-38b843c6.js","sources":["../../../common/resources/client/utils/dom/is-any-input-focused.ts","../../../common/resources/client/utils/keybinds/use-keybind.ts","../../../resources/client/help-center/search/search-trigger-button.tsx"],"sourcesContent":["export function isAnyInputFocused(): boolean {\n  return document.activeElement\n    ? ['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName) ||\n        (document.activeElement as HTMLElement).isContentEditable\n    : false;\n}\n","import {useGlobalListeners} from '@react-aria/utils';\nimport {useCallbackRef} from '@common/utils/hooks/use-callback-ref';\nimport {useEffect} from 'react';\nimport {isCtrlKeyPressed} from '@common/utils/keybinds/is-ctrl-key-pressed';\nimport {isAnyInputFocused} from '@common/utils/dom/is-any-input-focused';\n\ninterface Options {\n  allowedInputSelector?: string;\n}\n\nexport function useKeybind(\n  el: HTMLElement | 'window',\n  shortcut: string,\n  userCallback: (e: KeyboardEvent) => void,\n  {allowedInputSelector}: Options = {},\n) {\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n  const callback = useCallbackRef(userCallback);\n\n  useEffect(() => {\n    const target = el === 'window' ? window : el;\n    addGlobalListener(target, 'keydown', (e: KeyboardEvent) => {\n      if (!shouldIgnoreActiveEl(allowedInputSelector) && isAnyInputFocused()) {\n        return;\n      }\n      const matches = shortcut.split('+').every(key => {\n        if (key === 'ctrl') {\n          return isCtrlKeyPressed(e);\n        } else {\n          return e.key === key;\n        }\n      });\n      if (matches) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback(e);\n      }\n    });\n    return removeAllGlobalListeners;\n  }, [\n    addGlobalListener,\n    shortcut,\n    removeAllGlobalListeners,\n    callback,\n    el,\n    allowedInputSelector,\n  ]);\n}\n\nfunction shouldIgnoreActiveEl(selector?: string) {\n  if (!selector || !document.activeElement) {\n    return false;\n  }\n  return (document.activeElement as HTMLElement).closest(selector);\n}\n","import React, {forwardRef, ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {SearchIcon} from '@common/icons/material/Search';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\n\nconst ignoredElements = ['INPUT', 'TEXTAREA', 'SELECT', 'BUTTON'];\n\nexport interface SearchTriggerButtonProps {\n  onTrigger: () => void;\n  onClick?: () => void;\n  bg?: string;\n  radius?: string;\n  width?: string;\n  className?: string;\n  children: ReactNode;\n  size?: 'sm' | 'lg';\n}\n\nexport const SearchTriggerButton = forwardRef<\n  HTMLButtonElement,\n  SearchTriggerButtonProps\n>(\n  (\n    {\n      onTrigger,\n      size,\n      children,\n      bg,\n      width,\n      radius = 'rounded-input',\n      className,\n      onClick,\n      ...buttonProps\n    },\n    ref,\n  ) => {\n    useKeybind('window', 'ctrl+k', e => {\n      if (!ignoredElements.includes((e?.target as HTMLElement).tagName)) {\n        onTrigger();\n      }\n    });\n\n    return (\n      <ButtonBase\n        ref={ref}\n        {...buttonProps}\n        display=\"block\"\n        onClick={e => onTrigger()}\n        justify=\"justify-none\"\n        className=\"flex-shrink-0\"\n      >\n        <span\n          className={clsx(\n            'hidden items-center border bg-background text-muted shadow-sm transition-shadow focus:border-primary/60 focus:outline-none focus:ring focus:ring-primary/focus md:flex',\n            size === 'sm' && 'h-36 gap-6 px-12 text-sm',\n            size === 'lg' && 'text-md h-60 gap-12 px-24',\n            bg,\n            width,\n            radius,\n            className,\n          )}\n        >\n          <SearchIcon\n            className=\"text-muted\"\n            size={size === 'sm' ? 'sm' : 'md'}\n          />\n          <span>{children}</span>\n          <kbd className=\"ml-auto hidden font-medium md:block\">\n            <kbd className=\"font-sans\">âŒ˜</kbd>\n            <kbd className=\"font-sans\">K</kbd>\n          </kbd>\n        </span>\n        <span className=\"focus:border-primary/60 focus:outline-none focus:ring focus:ring-primary/focus md:hidden\">\n          <SearchIcon />\n        </span>\n      </ButtonBase>\n    );\n  },\n);\n"],"names":["isAnyInputFocused","useKeybind","el","shortcut","userCallback","allowedInputSelector","addGlobalListener","removeAllGlobalListeners","useGlobalListeners","callback","useCallbackRef","useEffect","e","shouldIgnoreActiveEl","key","isCtrlKeyPressed","selector","ignoredElements","SearchTriggerButton","forwardRef","onTrigger","size","children","bg","width","radius","className","onClick","buttonProps","ref","jsxs","ButtonBase","clsx","jsx","SearchIcon"],"mappings":"6HAAO,SAASA,GAA6B,CAC3C,OAAO,SAAS,cACZ,CAAC,QAAS,UAAU,EAAE,SAAS,SAAS,cAAc,OAAO,GAC1D,SAAS,cAA8B,kBAC1C,EACN,CCKgB,SAAAC,EACdC,EACAC,EACAC,EACA,CAAC,qBAAAC,CAAoB,EAAa,GAClC,CACA,KAAM,CAAC,kBAAAC,EAAmB,yBAAAC,CAAwB,EAAIC,EAAmB,EACnEC,EAAWC,EAAeN,CAAY,EAE5CO,EAAAA,UAAU,KAEUL,EADHJ,IAAO,SAAW,OAASA,EAChB,UAAYU,GAAqB,CACzD,GAAI,CAACC,EAAqBR,CAAoB,GAAKL,IACjD,OAEcG,EAAS,MAAM,GAAG,EAAE,MAAaW,GAC3CA,IAAQ,OACHC,EAAiBH,CAAC,EAElBA,EAAE,MAAQE,CAEpB,IAECF,EAAE,eAAe,EACjBA,EAAE,gBAAgB,EAClBH,EAASG,CAAC,EACZ,CACD,EACML,GACN,CACDD,EACAH,EACAI,EACAE,EACAP,EACAG,CAAA,CACD,CACH,CAEA,SAASQ,EAAqBG,EAAmB,CAC/C,MAAI,CAACA,GAAY,CAAC,SAAS,cAClB,GAED,SAAS,cAA8B,QAAQA,CAAQ,CACjE,CChDA,MAAMC,EAAkB,CAAC,QAAS,WAAY,SAAU,QAAQ,EAanDC,EAAsBC,EAAA,WAIjC,CACE,CACE,UAAAC,EACA,KAAAC,EACA,SAAAC,EACA,GAAAC,EACA,MAAAC,EACA,OAAAC,EAAS,gBACT,UAAAC,EACA,QAAAC,EACA,GAAGC,GAELC,KAEW5B,EAAA,SAAU,SAAeW,GAAA,CAC7BK,EAAgB,UAAUL,GAAA,YAAAA,EAAG,QAAuB,OAAO,GACpDQ,GACZ,CACD,EAGCU,EAAA,KAACC,EAAA,CACC,IAAAF,EACC,GAAGD,EACJ,QAAQ,QACR,WAAcR,EAAU,EACxB,QAAQ,eACR,UAAU,gBAEV,SAAA,CAAAU,EAAA,KAAC,OAAA,CACC,UAAWE,EACT,yKACAX,IAAS,MAAQ,2BACjBA,IAAS,MAAQ,4BACjBE,EACAC,EACAC,EACAC,CACF,EAEA,SAAA,CAAAO,EAAA,IAACC,EAAA,CACC,UAAU,aACV,KAAMb,IAAS,KAAO,KAAO,IAAA,CAC/B,EACAY,MAAC,QAAM,SAAAX,EAAS,EAChBQ,EAAAA,KAAC,MAAI,CAAA,UAAU,sCACb,SAAA,CAACG,EAAA,IAAA,MAAA,CAAI,UAAU,YAAY,SAAC,IAAA,EAC3BA,EAAA,IAAA,MAAA,CAAI,UAAU,YAAY,SAAC,IAAA,CAAA,EAC9B,CAAA,CAAA,CACF,QACC,OAAK,CAAA,UAAU,2FACd,SAAAA,MAACC,GAAW,CAAA,EACd,CAAA,CAAA,CAAA,EAIR"}