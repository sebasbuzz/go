import{u,a as T,r as m,j as e,L as $,I,C as S,T as c,A as p,c as P,b as A,H as C,d as j,B as f,e as x,g as _,f as z,s as M,h as E,i as v,k as O,l as q,m as V,n as g,o as K,P as Q,p as y,q as N,t as W,v as Y,w as b,S as d,x as G,y as J,z as U,D as L,E as B,N as X,F as Z,G as ee,J as se,K as ae,M as te,O as re,R as D,_ as ne,Q as le,U as ie,V as ce,W as oe}from"./main-8aeb0a0e.js";import{B as de,u as me}from"./bullet-seprated-items-7101a094.js";import{D as xe,u as ue,F as he,a as ge,b as pe,c as je,d as fe}from"./dashboard-sidenav-12d26e2d.js";import{A as be}from"./AttachFile-4444f904.js";import{E as ve}from"./Edit-a5c373f3.js";function F({sections:s}){const{articleId:a}=u(),r=T(),{setLeftSidenavStatus:t}=m.useContext(xe),n=ue(s),l=s??n;return e.jsx(m.Fragment,{children:e.jsxs("div",{className:"stable-scrollbar sticky w-350 overflow-y-auto overflow-x-hidden py-24 pl-24 pr-32 md:h-[calc(100dvh-64px)] lg:top-64 lg:py-64 lg:pl-32 xl:pl-48 xl:pr-64",children:[e.jsxs("div",{className:"mb-34 flex items-center justify-between gap-8 lg:hidden",children:[e.jsx($,{isDarkMode:r,logoColor:"dark"}),e.jsx(I,{onClick:()=>t("closed"),children:e.jsx(S,{})})]}),e.jsx("nav",{className:"text-base lg:text-sm",children:e.jsx("ul",{role:"list",className:"space-y-36",children:l==null?void 0:l.map(i=>{var o;return e.jsxs("li",{children:[e.jsx("h2",{className:"font-display font-semibold",children:e.jsx(c,{message:i.name})}),e.jsx("ul",{role:"list",className:"mt-8 space-y-8 border-l lg:mt-16 lg:space-y-16",children:(o=i.articles)==null?void 0:o.map(h=>{const R=`${h.id}`===a;return e.jsx("li",{children:e.jsx(p,{className:P("-ml-1 block w-full pl-16 text-muted",R&&"border-l border-current font-semibold text-primary"),article:h,section:i})},h.id)})})]},i.id)})})})]})})}function ye({article:s}){var r;const{base_url:a}=A();return e.jsx("div",{className:"space-y-12",children:(r=s.attachments)==null?void 0:r.map(t=>{const n=`${a}/file-entries/download/${t.hash}`;return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(be,{className:"mt-6",size:"sm"}),e.jsxs("div",{children:[e.jsx("a",{href:n,download:!0,className:"text-sm text-primary hover:underline",children:t.name}),e.jsxs(de,{className:"mt-4 text-xs text-muted",children:[e.jsx(he,{bytes:t.file_size}),e.jsx("a",{href:n,download:!0,className:"hover:underline",children:e.jsx(c,{message:"Download"})})]})]})]},t.id)})})}function H({children:s,leftSidenav:a,rightSidenav:r,categoryId:t}){return e.jsxs(ge,{height:"h-auto",gridClassName:"hc-grid",name:"hc-article",blockBodyOverflow:!1,children:[e.jsx(pe,{menuPosition:"header",className:"sticky top-0 z-10 flex-shrink-0",size:"md",children:e.jsx(C,{categoryId:t})}),e.jsx(je,{position:"left",size:"w-auto",overflow:"overflow-initial",className:"justify-end bg-alt",children:a}),e.jsx(fe,{isScrollable:!1,children:e.jsx("div",{className:"min-w-0 max-w-672 px-16 py-16 md:py-64 lg:max-w-none lg:px-32 xl:px-64",children:s})}),r]})}function Ne({data:{article:s},className:a}){var t;const r=j();return(t=s.path)!=null&&t.length?e.jsxs(f,{size:"sm",className:a,children:[e.jsx(x,{onSelected:()=>r("/hc"),children:e.jsx(c,{message:"Help center"})}),s.path.map(n=>e.jsx(x,{onSelected:()=>r(_(n)),children:e.jsx(c,{message:n.name})},`${n.parent_id}-${n.id}`)),e.jsx(x,{children:e.jsx(c,{message:"Article"})})]}):null}function we(){const{articleId:s}=u();return z({mutationFn:a=>ke(s,a),onSuccess:()=>{},onError:a=>M(a)})}function ke(s,a){return E.post(`hc/articles/${s}/feedback`,a).then(r=>r.data)}function Ie(){const s=we();return s.isSuccess?e.jsx(c,{message:"Thank you! Your feedback will help us improve the support experience. If you need more help, try searching for what you need at the top of the page."}):e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"mr-10",children:e.jsx(c,{message:"Was this article helpful?"})}),e.jsx(v,{variant:"outline",radius:"rounded-full",startIcon:e.jsx(O,{}),color:"positive",disabled:s.isPending,onClick:()=>s.mutate({wasHelpful:!0}),children:e.jsx(c,{message:"Yes"})}),e.jsx(v,{variant:"outline",radius:"rounded-full",startIcon:e.jsx(S,{}),color:"danger",disabled:s.isPending,onClick:()=>s.mutate({wasHelpful:!1}),children:e.jsx(c,{message:"No"})})]})}function w(){var r,t,n,l;const s=me("articlePage"),{hash:a}=q();return m.useEffect(()=>{var i;a&&((i=s.data)!=null&&i.article)&&setTimeout(()=>{if(document.documentElement.scrollTop===0){const o=document.getElementById(a.slice(1));o&&o.scrollIntoView({behavior:"smooth"})}})},[s.data,a]),e.jsx(H,{leftSidenav:e.jsx(F,{sections:(r=s.data)==null?void 0:r.categoryNav}),rightSidenav:e.jsx(Se,{nav:(t=s.data)==null?void 0:t.pageNav}),categoryId:(l=(n=s.data)==null?void 0:n.article.path)==null?void 0:l[0].id,children:e.jsx(V,{initial:!1,mode:"sync",children:e.jsx(Pe,{query:s})})})}function Se({nav:s}){const[a,r]=m.useState(null);return m.useEffect(()=>{if(!s)return;const t=new IntersectionObserver(l=>{for(const i of l){const o=document.getElementById(`to-${i.target.id}`);o&&i.isIntersecting&&r(o.id.replace(/^to-/,""))}},{rootMargin:"0px 0px -50% 0px"}),n=s.map(l=>document.getElementById(l.slug)).filter(Boolean);return n.forEach(l=>{t.observe(l)}),()=>{n.forEach(l=>t.unobserve(l))}},[s]),e.jsx("div",{className:"dashboard-grid-sidenav-right compact-scrollbar hidden w-224 xl:flex xl:w-288",children:e.jsxs("nav",{className:"sticky top-64 h-[calc(100dvh-64px)] w-full py-64 pr-32 xl:pr-64",children:[e.jsx("h2",{className:"font-display text-sm font-medium",children:e.jsx(c,{message:"On this page"})}),e.jsx("ol",{role:"list",className:"mt-16 space-y-12 text-sm text-muted",children:s==null?void 0:s.map(t=>{const n=t.slug===a;return e.jsx("li",{className:t.indent?"pl-20":"mt-8",children:e.jsx(g,{className:P("cursor-pointer",n?"text-primary":"hover:text-main"),to:`#${t.slug}`,id:`to-${t.slug}`,onClick:l=>{const i=document.getElementById(t.slug);i&&(r(t.slug),i.scrollIntoView({behavior:"smooth"}))},children:t.display_name})},t.slug)})})]})})}function Pe({query:s}){var n;const a=A(),{hasPermission:r,hasRole:t}=K();if(s.data&&!s.isPlaceholderData){const l=r("articles.update")||s.data.article.managed_by_role&&t(s.data.article.managed_by_role);return e.jsxs(m.Fragment,{children:[e.jsx(Q,{query:s}),e.jsxs(y.article,{...N,children:[e.jsxs("header",{className:"mb-36",children:[e.jsx(Ne,{data:s.data,className:"-ml-6"}),e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsx("h1",{className:"font-display text-slate-900 text-3xl tracking-tight",children:s.data.article.title}),l&&e.jsx(I,{className:"text-muted",elementType:g,to:W(s.data.article),children:e.jsx(ve,{})})]})]}),e.jsx(Ae,{body:s.data.article.body}),e.jsx(ye,{article:s.data.article})]},"article"),!((n=a.article)!=null&&n.hide_new_ticket_link)&&e.jsx("div",{className:"my-50 border-y py-50",children:e.jsx(c,{message:"Have more questions? <a>Submit a request</a>",values:{a:i=>e.jsx(g,{className:Y,to:"/hc/tickets/new",children:i})}})}),e.jsx(Ie,{})]})}return e.jsx(b,{query:s,show404:!1,delayedSpinner:!1,loader:e.jsxs(y.div,{...N,children:[e.jsx(d,{variant:"rect",className:"h-20 max-w-580"}),e.jsx(d,{variant:"rect",className:"mb-30 mt-10 h-34 max-w-440"}),e.jsx(d,{className:"max-w-[95%]"}),e.jsx(d,{}),e.jsx(d,{className:"mb-30 max-w-[70%]"}),e.jsx(d,{className:"max-w-[90%]"}),e.jsx(d,{className:"max-w-[80%]"}),e.jsx(d,{className:"max-w-[30%]"})]},"skeletons")})}function Ae({body:s}){const a=m.useRef(null);return m.useEffect(()=>{a.current&&G(a.current)},[]),e.jsx("div",{className:"prose-headings:font-display prose-pre:bg-slate-900 prose max-w-none dark:prose-invert prose-headings:scroll-mt-112 prose-headings:font-normal prose-a:font-normal prose-a:text-primary prose-pre:rounded-xl prose-pre:shadow-lg dark:prose-pre:shadow-none dark:prose-pre:ring-1 dark:prose-pre:ring-divider lg:prose-headings:scroll-mt-136",children:e.jsx("div",{ref:a,className:"article-body whitespace-pre-wrap break-words",dangerouslySetInnerHTML:{__html:s}})})}function Ce(s){const{categoryId:a,sectionId:r}=u(),t=r||a;return J({queryKey:["hc","categories",t,s],queryFn:()=>_e(t,s),initialData:()=>{var l,i;const n=(l=U().loaders)==null?void 0:l[s];if(((i=n==null?void 0:n.category)==null?void 0:i.id)==t)return n}})}function _e(s,a){return E.get(`hc/categories/${s}`,{params:{loader:a}}).then(r=>r.data)}function k(){var r,t;const s=Ce("categoryPage"),a=(r=s.data)==null?void 0:r.category;return e.jsx(H,{leftSidenav:e.jsx(F,{sections:(t=s.data)==null?void 0:t.categoryNav}),categoryId:a!=null&&a.is_section?a.parent_id:a==null?void 0:a.id,children:s.data?e.jsx(Ee,{data:s.data}):e.jsx("div",{children:e.jsx(b,{query:s,loaderClassName:"absolute inset-0 m-auto"})})})}function Ee({data:s}){var a;return e.jsxs("div",{children:[e.jsxs("header",{className:"mb-36",children:[e.jsx(Le,{category:s.category}),e.jsx("h1",{className:"font-display text-3xl tracking-tight",children:s.category.name})]}),(a=s.articles)==null?void 0:a.map(r=>e.jsxs("div",{className:"mb-16 flex items-start gap-10 border-b pb-16",children:[e.jsx(L,{size:"md",className:"mt-2 text-muted"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display mb-2 text-xl",children:e.jsx(p,{article:r})}),e.jsx(B,{article:r,className:"text-sm text-muted"})]})]},r.id))]})}function Le({category:s}){const a=j(),r=[s];return s.is_section&&s.parent&&r.unshift(s.parent),e.jsxs(f,{size:"sm",className:"-ml-6",children:[e.jsx(x,{onSelected:()=>a("/hc"),children:e.jsx(c,{message:"Help center"})}),r.map(t=>e.jsx(x,{onSelected:()=>a(_(t)),children:e.jsx(c,{message:t.name})},t.id))]})}function Be(){const s=j();return e.jsxs("div",{children:[e.jsx(X,{menuPosition:"header",children:e.jsx(C,{})}),e.jsxs("main",{className:"container mx-auto px-24 pb-48",children:[e.jsxs(f,{size:"sm",className:"mb-48 mt-34",children:[e.jsx(x,{onSelected:()=>s("/hc"),children:e.jsx(c,{message:"Help center"})}),e.jsx(x,{children:e.jsx(c,{message:"Search"})})]}),e.jsx(De,{})]})]})}function De(){var t;const s=Z(),{query:a}=u(),r=ee(a,{perPage:30});return r.data?r.data.pagination.data.length===0?e.jsx(se,{className:"mt-48",image:e.jsx(ae,{src:te}),title:e.jsx(c,{message:"No articles match your search query"})}):e.jsxs("div",{children:[e.jsx("h1",{className:"mb-34 text-3xl font-semibold",children:e.jsx(c,{message:'Showing :count results for ":query"',values:{count:r.data.pagination.data.length,query:r.data.query}})}),(t=r.data)==null?void 0:t.pagination.data.map(n=>e.jsxs("div",{className:"mb-14 flex items-start gap-12",children:[e.jsx(L,{className:"mt-4 flex-shrink-0 text-muted"}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("h2",{className:"mb-4 text-xl",children:e.jsx(p,{article:n,onClick:()=>{s.updateLastSearch({clickedArticle:!0})}})}),e.jsx(B,{article:n,className:"text-sm text-muted"})]})]},n.id))]}):e.jsx(b,{query:r,show404:!1,loaderIsScreen:!1})}const Fe=D.lazy(()=>ne(()=>import("./hc-ticket-routes-e4d9605b.js"),["./hc-ticket-routes-e4d9605b.js","./main-8aeb0a0e.js","./main-951fed17.css","./use-create-ticket-27d9c845.js","./reply-editor-0c49b8d8.js","./dashboard-sidenav-12d26e2d.js","./Reply-b2784dc8.js","./use-customer-ticket-request-types-97f3aa8f.js"],import.meta.url)),He=[{path:"/",element:e.jsx(le,{})},{path:"/articles/:articleId/:articleSlug",element:e.jsx(w,{})},{path:"/articles/:categoryId/:sectionId/:articleId/:articleSlug",element:e.jsx(w,{})},{path:"/categories/:categoryId/:sectionId/:slug",element:e.jsx(k,{})},{path:"/categories/:categoryId/:slug",element:e.jsx(k,{})},{path:"/search/:query",element:e.jsx(Be,{})},{path:"tickets/*",element:e.jsx(ie,{children:e.jsx(D.Suspense,{fallback:e.jsx(ce,{screen:!0}),children:e.jsx(Fe,{})})})},{path:"*",element:e.jsx(oe,{})}];function Oe(){return re(He)}export{Oe as default};
//# sourceMappingURL=hc-routes-6578ba24.js.map
