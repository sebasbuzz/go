{"version":3,"file":"agent-routes-080edc1b.js","sources":["../../../resources/client/agent/agent-ticket-list-page/ticket-table/opened.svg","../../../resources/client/agent/use-mailbox-params.ts","../../../resources/client/agent/agent-ticket-list-page/ticket-table/ticket-table-footer.tsx","../../../resources/client/agent/agent-ticket-list-page/ticket-table/ticket-table-columns.tsx","../../../resources/client/agent/agent-ticket-page/ticket-page-link.tsx","../../../resources/client/agent/agent-ticket-list-page/ticket-table/ticket-table.tsx","../../../resources/client/agent/ticket.ts","../../../resources/client/agent/ticket-actions/requests/use-agents.ts","../../../resources/client/agent/ticket-actions/requests/use-assign-tickets-to-aggent.tsx","../../../resources/client/agent/ticket-actions/ticket-action-button.tsx","../../../resources/client/agent/ticket-actions/icons/assign-ticket-icon.tsx","../../../resources/client/agent/ticket-actions/assign-tickets-button.tsx","../../../resources/client/agent/use-mailbox-sidenav-tags.ts","../../../resources/client/agent/ticket-actions/icons/change-status-icon.tsx","../../../resources/client/agent/ticket-actions/change-ticket-status-button.tsx","../../../resources/client/agent/ticket-actions/requests/use-add-tag-to-tickets.ts","../../../resources/client/agent/ticket-actions/icons/add-tag-icon.tsx","../../../resources/client/agent/ticket-actions/add-tag-to-tickets-button.tsx","../../../resources/client/agent/ticket-actions/requests/use-delete-tickets.tsx","../../../resources/client/agent/ticket-actions/delete-tickets-button.tsx","../../../resources/client/agent/agent-ticket-list-page/ticket-table/ticket-table-actions.tsx","../../../resources/client/agent/agent-ticket-list-page/ticket-table/ticket-table-page.tsx","../../../resources/client/agent/agent-navbar.tsx","../../../resources/client/agent/agent-ticket-list-page/agent-ticket-list-sidenav.tsx","../../../resources/client/agent/agent-page-layout.tsx","../../../resources/client/agent/agent-ticket-list-page/agent-ticket-list-page.tsx","../../../node_modules/use-debounce/dist/index.module.js","../../../resources/client/agent/agent-search-page/search-tickets/use-search-tickets-filters.tsx","../../../common/resources/client/utils/hooks/use-stable-scrollbar.ts","../../../resources/client/agent/agent-search-page/agent-search-page.tsx","../../../resources/client/agent/agent-search-page/requests/use-search-tickets.ts","../../../resources/client/agent/agent-search-page/search-table-layout.tsx","../../../resources/client/agent/agent-search-page/search-tickets/search-tickets-table.tsx","../../../resources/client/agent/agent-search-page/requests/use-search-users.ts","../../../resources/client/agent/agent-search-page/search-users-table.tsx","../../../resources/client/agent/agent-search-page/search-articles-table.tsx","../../../resources/client/agent/ticket-actions/icons/add-note-icon.tsx","../../../resources/client/agent/ticket-actions/icons/back-to-tickets-icon.tsx","../../../resources/client/agent/agent-ticket-page/use-after-reply-action.ts","../../../resources/client/agent/agent-ticket-page/notes/use-create-note.ts","../../../resources/client/agent/agent-ticket-page/notes/create-note-dialog.tsx","../../../resources/client/agent/agent-ticket-page/ticket-page-toolbar.tsx","../../../resources/client/agent/agent-ticket-page/reply-list/requests/use-delete-reply.ts","../../../resources/client/agent/agent-ticket-page/reply-list/requests/use-update-reply.ts","../../../resources/client/agent/agent-ticket-page/reply-list/reply-attachment-list.tsx","../../../resources/client/agent/agent-ticket-page/reply-list/update-reply-dialog.tsx","../../../resources/client/agent/agent-ticket-page/reply-list/requests/use-original-reply-email.ts","../../../resources/client/agent/agent-ticket-page/reply-list/original-email-preview-dialog.tsx","../../../resources/client/agent/agent-ticket-page/reply-list/agent-ticket-page-reply-list.tsx","../../../resources/client/agent/ticket-actions/requests/use-remove-tag-from-tickets.ts","../../../resources/client/agent/agent-ticket-page/ticket-page-header.tsx","../../../resources/client/agent/agent-ticket-page/user-details-sidebar/user-details-section.tsx","../../../resources/client/agent/agent-ticket-page/envato-purchase-list/purchase-code-details-dialog.tsx","../../../resources/client/agent/agent-ticket-page/envato-purchase-list/envato-purchase-list.tsx","../../../resources/client/agent/agent-ticket-page/user-details-sidebar/ticket-page-purchase-list.tsx","../../../resources/client/agent/agent-ticket-page/user-details-sidebar/activity-log/use-activity-log.ts","../../../resources/client/help-center/articles/article.ts","../../../resources/client/agent/agent-search-page/search-term.ts","../../../common/resources/client/ui/timeline.tsx","../../../resources/client/agent/agent-ticket-page/user-details-sidebar/activity-list.tsx","../../../resources/client/agent/agent-ticket-page/user-details-sidebar/requests/use-merge-tickets.ts","../../../resources/client/agent/agent-ticket-page/ticket-preview-dialog.tsx","../../../resources/client/agent/agent-ticket-page/user-details-sidebar/requests/use-update-ticket.ts","../../../resources/client/agent/agent-ticket-page/user-details-sidebar/change-customer-dialog.tsx","../../../resources/client/agent/agent-ticket-page/user-details-sidebar/user-details-sidebar.tsx","../../../resources/client/agent/agent-ticket-page/requests/use-save-draft.ts","../../../resources/client/agent/agent-ticket-page/agent-reply-editor/use-background-draft-save.ts","../../../resources/client/agent/agent-ticket-page/agent-reply-editor/use-submit-agent-reply.ts","../../../resources/client/agent/agent-ticket-page/agent-reply-editor/agent-reply-editor-draft-buttons.tsx","../../../resources/client/agent/agent-ticket-page/canned-replies/requests/use-canned-replies.ts","../../../resources/client/agent/agent-ticket-page/canned-replies/canned-reply-selector.tsx","../../../resources/client/agent/agent-ticket-page/ticket-page-docs-search-input.tsx","../../../resources/client/agent/agent-ticket-page/agent-reply-editor/agent-reply-editor.tsx","../../../resources/client/agent/agent-ticket-page/agent-ticket-page.tsx","../../../resources/client/agent/agent-canned-replies-page.tsx","../../../resources/client/agent/agent-new-ticket-page/agent-new-ticket-page.tsx","../../../resources/client/agent/customer-page/requests/use-update-user-details.ts","../../../resources/client/agent/customer-page/agent-customer-page-sidebar.tsx","../../../resources/client/agent/customer-page/requests/use-delete-user.ts","../../../resources/client/agent/customer-page/requests/use-merge-users.ts","../../../resources/client/agent/customer-page/merge-users-dialog.tsx","../../../resources/client/agent/customer-page/agent-customer-page.tsx","../../../resources/client/agent/customer-page/agent-customer-page-ticket-table.tsx","../../../resources/client/agent/customer-page/customer-searches-table.tsx","../../../resources/client/agent/agent-routes.tsx"],"sourcesContent":["export default \"__VITE_ASSET__a71f56b4__\"","import {useSearchParams} from 'react-router-dom';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {PaginateTicketsParams} from '@app/agent/agent-ticket-page/user-details-sidebar/requests/use-tickets';\nimport {useCallback} from 'react';\n\nconst defaultPage = '1';\nconst defaultPerPage = '20';\n\nexport function useMailboxParams() {\n  const [searchParams] = useSearchParams();\n  const tagId = searchParams.get('tagId') || 'unassigned';\n  return {\n    tagId,\n    page: searchParams.get('page') || defaultPage,\n    perPage: searchParams.get('perPage') || defaultPerPage,\n    orderBy: searchParams.get('orderBy') || '',\n    orderDir: searchParams.get('orderDir') || '',\n  };\n}\n\nexport function useNavigateToMailboxTicketTable() {\n  const navigate = useNavigate();\n  const urlParams = useMailboxParams();\n  return useCallback(\n    (userParams: PaginateTicketsParams = {}) => {\n      const link = getMailboxTicketTableLink(urlParams, userParams);\n      navigate(link);\n    },\n    [urlParams, navigate],\n  );\n}\n\nexport function useMailboxTicketTableLink(\n  userParams: PaginateTicketsParams = {},\n) {\n  const urlParams = useMailboxParams();\n  return getMailboxTicketTableLink(urlParams, userParams);\n}\n\nfunction getMailboxTicketTableLink(\n  urlParams: Record<string, string>,\n  userParams: PaginateTicketsParams = {},\n) {\n  const tagId = userParams.tagId || urlParams.tagId;\n  const page = `${userParams.page || urlParams.page}`;\n  const perPage = `${userParams.perPage || urlParams.perPage}`;\n\n  // if orderBy/orderDir is set as undefined in user params, it means sorting\n  // was reset on the table, and we should clear all sorting params from url\n  const orderBy =\n    'orderBy' in userParams ? userParams.orderBy : urlParams.orderBy;\n  const orderDir =\n    'orderDir' in userParams ? userParams.orderDir : urlParams.orderDir;\n  let link = `/agent/tickets?tagId=${tagId}`;\n  if (page !== defaultPage) {\n    link += `&page=${page}`;\n  }\n  if (perPage !== defaultPerPage) {\n    link += `&perPage=${perPage}`;\n  }\n  if (orderBy) {\n    link += `&orderBy=${orderBy}`;\n  }\n  if (orderDir) {\n    link += `&orderDir=${orderDir}`;\n  }\n  return link;\n}\n","import {DataTablePaginationFooter} from '@common/datatable/data-table-pagination-footer';\nimport React from 'react';\nimport {UseQueryResult} from '@tanstack/react-query';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {Ticket} from '@app/agent/ticket';\n\ninterface Props {\n  onPerPageChange: (perPage: number) => void;\n  onPageChange: (page: number) => void;\n  query: UseQueryResult<PaginatedBackendResponse<Ticket>>;\n}\nexport function TicketTableFooter({\n  onPageChange,\n  onPerPageChange,\n  query,\n}: Props) {\n  return (\n    <DataTablePaginationFooter\n      className=\"flex-shrink-0\"\n      onPerPageChange={onPerPageChange}\n      onPageChange={onPageChange}\n      query={query}\n    />\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {Ticket} from '@app/agent/ticket';\nimport {Trans} from '@common/i18n/trans';\nimport {FormattedRelativeTime} from '@common/i18n/formatted-relative-time';\nimport React from 'react';\nimport {ChipList} from '@common/ui/forms/input-field/chip-field/chip-list';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\n\nexport const TicketTableColumns: ColumnConfig<Ticket>[] = [\n  {\n    key: 'user_id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Customer\" />,\n    visibleInMode: 'all',\n    width: 'w-132',\n    body: ticket => (ticket.user ? ticket.user.display_name : '-'),\n  },\n  {\n    key: 'avatar',\n    header: () => <Trans message=\"Avatar\" />,\n    hideHeader: true,\n    width: 'w-100 flex-shrink-0',\n    body: ticket =>\n      ticket.user ? (\n        <img\n          className=\"m-auto h-38 w-38 rounded-full\"\n          src={ticket.user.avatar}\n          alt=\"\"\n        />\n      ) : (\n        '-'\n      ),\n  },\n  {\n    key: 'summary',\n    header: () => <Trans message=\"Ticket summary\" />,\n    body: ticket => <TicketSummary ticket={ticket} />,\n    width: 'flex-3 min-w-200',\n  },\n  {\n    key: 'replies_count',\n    header: () => <Trans message=\"Replies count\" />,\n    hideHeader: true,\n    width: 'w-50',\n    body: ticket => (\n      <div className=\"w-max rounded border bg-alt px-6 text-xs font-normal text-muted\">\n        {ticket.replies_count || 1}\n      </div>\n    ),\n  },\n  {\n    key: 'assigned_to',\n    allowsSorting: true,\n    header: () => <Trans message=\"Assigned to\" />,\n    width: 'w-124',\n    body: ticket => (ticket.assignee ? ticket.assignee.display_name : ''),\n  },\n  {\n    key: 'id',\n    allowsSorting: true,\n    header: () => <Trans message=\"Number\" />,\n    width: 'w-90',\n    body: ticket => ticket.id,\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    header: () => <Trans message=\"Last updated\" />,\n    visibleInMode: 'all',\n    width: 'w-144',\n    body: ticket => <FormattedRelativeTime date={ticket.updated_at} />,\n  },\n];\n\ninterface TicketSummaryProps {\n  ticket: Ticket;\n}\nfunction TicketSummary({ticket}: TicketSummaryProps) {\n  const body = ticket.latest_reply?.body\n    ? ticket.latest_reply.body\n    : ticket.replies?.[0]?.body;\n  const tags = ticket.tags?.filter(t => t.type !== 'status');\n\n  return (\n    <div className=\"overflow-hidden overflow-ellipsis whitespace-nowrap pr-12\">\n      <div className=\"flex items-center gap-10\">\n        <ChipList size=\"xs\" wrap={false}>\n          {tags?.map(tag => (\n            <Chip key={tag.id}>{tag.display_name || tag.name}</Chip>\n          ))}\n        </ChipList>\n        <div>{ticket.subject}</div>\n      </div>\n      {body && (\n        <div className=\"overflow-hidden overflow-ellipsis whitespace-nowrap pt-4 font-normal text-muted\">\n          {body}\n        </div>\n      )}\n    </div>\n  );\n}\n","import {Link, LinkProps} from 'react-router-dom';\nimport clsx from 'clsx';\nimport React, {ReactNode, useMemo} from 'react';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\nimport {Ticket} from '@app/agent/ticket';\n\ninterface Props extends Omit<LinkProps, 'to'> {\n  ticket: Ticket;\n  className?: string;\n  children?: ReactNode;\n  color?: 'primary' | 'inherit';\n}\nexport function TicketPageLink({\n  ticket,\n  className,\n  children,\n  color = 'inherit',\n  ...linkProps\n}: Props) {\n  const finalUri = useMemo(() => {\n    return getTicketPageLink(ticket);\n  }, [ticket]);\n\n  return (\n    <Link\n      {...linkProps}\n      className={clsx(\n        color === 'primary'\n          ? 'text-primary hover:text-primary-dark'\n          : 'text-inherit',\n        'overflow-x-hidden overflow-ellipsis outline-none transition-colors hover:underline focus-visible:underline',\n        className\n      )}\n      to={finalUri}\n    >\n      {children ?? ticket.subject}\n    </Link>\n  );\n}\n\nexport function getTicketPageLink(\n  ticket: Ticket,\n  {absolute, tagId}: {absolute?: boolean; tagId?: string | number} = {}\n): string {\n  let link = `/agent/tickets/${ticket.id}`;\n  if (absolute) {\n    link = `${getBootstrapData().settings.base_url}${link}`;\n  }\n  if (tagId) {\n    link = `${link}?tagId=${tagId}`;\n  }\n  return link;\n}\n","import {Table} from '@common/ui/tables/table';\nimport {TicketTableColumns} from '@app/agent/agent-ticket-list-page/ticket-table/ticket-table-columns';\nimport React from 'react';\nimport {RowElementProps} from '@common/ui/tables/table-row';\nimport {Ticket} from '@app/agent/ticket';\nimport clsx from 'clsx';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {useMailboxParams} from '@app/agent/use-mailbox-params';\nimport {UseQueryResult} from '@tanstack/react-query';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {getTicketPageLink} from '@app/agent/agent-ticket-page/ticket-page-link';\nimport {SortDescriptor} from '@common/ui/tables/types/sort-descriptor';\n\ninterface Props {\n  query: UseQueryResult<PaginatedBackendResponse<Ticket>>;\n  selectedTickets?: number[];\n  onSelectionChange?: (ticketIds: number[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (sortDescriptor: SortDescriptor) => void;\n}\nexport function TicketTable({\n  query,\n  selectedTickets,\n  onSelectionChange,\n  sortDescriptor,\n  onSortChange,\n}: Props) {\n  const navigate = useNavigate();\n  const {tagId} = useMailboxParams();\n  return (\n    <Table\n      headerCellHeight=\"h-36\"\n      cellHeight=\"h-64\"\n      selectedRows={selectedTickets}\n      onSelectionChange={values => onSelectionChange?.(values as number[])}\n      columns={TicketTableColumns}\n      data={query.data?.pagination.data || []}\n      renderRowAs={TicketTableRow}\n      onAction={ticket => navigate(getTicketPageLink(ticket, {tagId}))}\n      sortDescriptor={sortDescriptor}\n      onSortChange={onSortChange}\n    />\n  );\n}\n\nfunction TicketTableRow({\n  children,\n  item,\n  className,\n  ...domProps\n}: RowElementProps<Ticket>) {\n  return (\n    <div\n      className={clsx(\n        className,\n        item.status === 'open' && 'font-semibold',\n        item.closed_at && 'bg-alt',\n      )}\n      {...domProps}\n    >\n      {children}\n    </div>\n  );\n}\n","import {User} from '@common/auth/user';\nimport {Tag} from '@common/tags/tag';\nimport {Reply} from '@app/agent/reply';\nimport {Category} from '@app/help-center/categories/category';\n\nexport const AGENT_PERMISSION = 'tickets.update';\nexport const TICKET_MODEL_TYPE = 'ticket';\n\nexport interface TicketTag extends Tag {\n  categories: Category[];\n  support_expired?: boolean;\n}\n\nexport interface Ticket {\n  id: number;\n  subject: string;\n  user_id: number;\n  closed_at?: string;\n  closed_by?: number;\n  status: string;\n  assigned_to?: number;\n  created_at?: string;\n  updated_at?: string;\n  updated_at_formatted: string;\n  user?: User;\n  assignee?: User;\n  tags?: TicketTag[];\n  categories?: Tag[];\n  replies?: Reply[];\n  replies_count?: number;\n  latest_replies?: Reply[];\n  latest_reply?: Reply;\n  notes?: Reply[];\n  animated?: boolean;\n  model_type: typeof TICKET_MODEL_TYPE;\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {User} from '@common/auth/user';\nimport {AGENT_PERMISSION} from '@app/agent/ticket';\n\nexport function useAgents() {\n  return useQuery({\n    queryKey: ['users', 'agents'],\n    queryFn: () => fetchAgents(),\n  });\n}\n\nfunction fetchAgents() {\n  return apiClient\n    .get<PaginatedBackendResponse<User>>('users', {\n      params: {\n        permission: AGENT_PERMISSION,\n        perPage: 20,\n      },\n    })\n    .then(response => response.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\n\ninterface Payload {\n  ticketIds: (number | string)[];\n  userId: number | string;\n}\n\nexport function useAssignTicketsToAgent() {\n  return useMutation({\n    mutationFn: (payload: Payload) => assignTickets(payload),\n    onSuccess: async () => {\n      await Promise.allSettled([\n        queryClient.invalidateQueries({queryKey: ['mailbox', 'sidenav-tags']}),\n        queryClient.invalidateQueries({queryKey: ['tickets']}),\n      ]);\n      toast(message('Tickets reassigned'));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction assignTickets(payload: Payload) {\n  return apiClient\n    .post<BackendResponse>(`tickets/assign`, payload)\n    .then(r => r.data);\n}\n","import React, {forwardRef, ReactElement} from 'react';\nimport {ButtonColor} from '@common/ui/buttons/get-shared-button-style';\nimport {Button, ButtonProps} from '@common/ui/buttons/button';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\n\ninterface Props {\n  startIcon: ReactElement;\n  endIcon?: ReactElement;\n  children: ReactElement<MessageDescriptor>;\n  color?: ButtonColor;\n  isCompact?: boolean;\n  disabled?: boolean;\n  elementType?: ButtonProps['elementType'];\n  to?: ButtonProps['to'];\n}\nexport const TicketActionButton = forwardRef<HTMLButtonElement, Props>(\n  (\n    {startIcon, endIcon, children, color, isCompact = false, ...buttonProps},\n    ref\n  ) => {\n    if (isCompact) {\n      return (\n        <Tooltip label={children} ref={ref}>\n          <IconButton color={color} iconSize=\"md\" size=\"sm\" {...buttonProps}>\n            {startIcon}\n          </IconButton>\n        </Tooltip>\n      );\n    }\n    return (\n      <Button\n        startIcon={startIcon}\n        endIcon={endIcon}\n        variant=\"outline\"\n        color={color}\n        size=\"xs\"\n        ref={ref}\n        {...buttonProps}\n      >\n        {children}\n      </Button>\n    );\n  }\n);\n","import {createSvgIcon} from '@common/icons/create-svg-icon';\nimport React from 'react';\n\nexport const AssignTicketIcon = createSvgIcon(\n  <path d=\"M 16 5 C 12.145852 5 9 8.1458513 9 12 C 9 14.408843 10.23116 16.55212 12.09375 17.8125 C 8.5266131 19.342333 6 22.881262 6 27 L 8 27 C 8 24.109626 9.5263067 21.592958 11.8125 20.1875 C 12.483006 21.834363 14.120749 23 16 23 C 17.879251 23 19.516994 21.834363 20.1875 20.1875 C 22.473693 21.592958 24 24.109626 24 27 L 26 27 C 26 22.881262 23.473387 19.342333 19.90625 17.8125 C 21.76884 16.55212 23 14.408843 23 12 C 23 8.1458513 19.854148 5 16 5 z M 16 7 C 18.773268 7 21 9.2267317 21 12 C 21 14.773268 18.773268 17 16 17 C 13.226732 17 11 14.773268 11 12 C 11 9.2267317 13.226732 7 16 7 z M 16 19 C 16.81989 19 17.600009 19.116459 18.34375 19.34375 C 17.997935 20.307297 17.090648 21 16 21 C 14.909352 21 14.002065 20.307297 13.65625 19.34375 C 14.399991 19.116459 15.18011 19 16 19 z\" />,\n  '',\n  '0 0 32 32'\n);\n","import {useAgents} from '@app/agent/ticket-actions/requests/use-agents';\nimport {useAssignTicketsToAgent} from '@app/agent/ticket-actions/requests/use-assign-tickets-to-aggent';\nimport {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\nimport {Trans} from '@common/i18n/trans';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {UserAvatar} from '@common/ui/images/user-avatar';\nimport React, {useState} from 'react';\nimport {TicketActionButton} from '@app/agent/ticket-actions/ticket-action-button';\nimport {AssignTicketIcon} from '@app/agent/ticket-actions/icons/assign-ticket-icon';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\n\ninterface Props {\n  ticketIds: number[];\n  onSuccess?: () => void;\n  isCompact?: boolean;\n}\nexport function AssignTicketsButton({ticketIds, onSuccess, isCompact}: Props) {\n  const {data} = useAgents();\n  const assignTickets = useAssignTicketsToAgent();\n  const [isOpen, setIsOpen] = useState(false);\n  useKeybind('window', 'a', () => setIsOpen(true));\n\n  return (\n    <MenuTrigger\n      isOpen={isOpen}\n      onOpenChange={setIsOpen}\n      onItemSelected={userId =>\n        assignTickets.mutate({ticketIds, userId}, {onSuccess})\n      }\n    >\n      <TicketActionButton\n        isCompact={isCompact}\n        startIcon={<AssignTicketIcon />}\n        endIcon={<KeyboardArrowDownIcon />}\n        disabled={assignTickets.isPending}\n      >\n        <Trans message=\"Assign (a)\" />\n      </TicketActionButton>\n      <Menu>\n        {data?.pagination.data.map(user => (\n          <Item\n            key={user.id}\n            value={user.id}\n            startIcon={<UserAvatar user={user} size=\"sm\" />}\n          >\n            {user.display_name}\n          </Item>\n        ))}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {Tag} from '@common/tags/tag';\n\nexport interface MailboxTag extends Tag {\n  tickets_count: number;\n}\n\nexport interface GetMailboxSidenavTags extends BackendResponse {\n  viewTags: MailboxTag[];\n  categoryTags: MailboxTag[];\n  statusTags: MailboxTag[];\n}\n\nexport function useMailboxSidenavTags() {\n  return useQuery({\n    queryKey: ['mailbox', 'sidenav-tags'],\n    queryFn: () => fetchTags(),\n  });\n}\n\nfunction fetchTags() {\n  return apiClient\n    .get<GetMailboxSidenavTags>('tags/agent-mailbox')\n    .then(response => response.data);\n}\n","import {createSvgIcon} from '@common/icons/create-svg-icon';\n\nexport const ChangeStatusIcon = createSvgIcon(\n  <path d=\"M 5 5 L 5 6 L 5 29 L 7 29 L 7 19 L 15 19 L 15 21 L 15 22 L 16 22 L 26 22 L 27 22 L 27 21 L 27 9 L 27 8 L 26 8 L 17 8 L 17 6 L 17 5 L 16 5 L 6 5 L 5 5 z M 7 7 L 15 7 L 15 8 L 15 9 L 15 17 L 7 17 L 7 7 z M 17 10 L 25 10 L 25 20 L 17 20 L 17 19 L 17 18 L 17 10 z\" />,\n  '',\n  '0 0 32 32'\n);\n","import {useMailboxSidenavTags} from '@app/agent/use-mailbox-sidenav-tags';\nimport {useChangeTicketStatus} from '@app/agent/ticket-actions/requests/use-change-ticket-status';\nimport {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {TicketActionButton} from '@app/agent/ticket-actions/ticket-action-button';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\nimport {Trans} from '@common/i18n/trans';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport React, {useState} from 'react';\nimport {ChangeStatusIcon} from '@app/agent/ticket-actions/icons/change-status-icon';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\n\ninterface Props {\n  ticketIds: number[];\n  onSuccess?: () => void;\n  isCompact?: boolean;\n}\nexport function ChangeTicketStatusButton({\n  ticketIds,\n  onSuccess,\n  isCompact,\n}: Props) {\n  const {data} = useMailboxSidenavTags();\n  const changeStatus = useChangeTicketStatus();\n  const [isOpen, setIsOpen] = useState(false);\n  useKeybind('window', 's', () => setIsOpen(true));\n\n  return (\n    <MenuTrigger\n      isOpen={isOpen}\n      onOpenChange={setIsOpen}\n      onItemSelected={newStatus =>\n        changeStatus.mutate(\n          {ids: ticketIds, status: newStatus as string},\n          {\n            onSuccess: () => {\n              onSuccess?.();\n              toast(message('Status changed'));\n            },\n          },\n        )\n      }\n    >\n      <TicketActionButton\n        isCompact={isCompact}\n        startIcon={<ChangeStatusIcon />}\n        endIcon={<KeyboardArrowDownIcon />}\n        disabled={changeStatus.isPending}\n      >\n        <Trans message=\"Change status (s)\" />\n      </TicketActionButton>\n      <Menu>\n        {data?.statusTags.map(tag => (\n          <Item key={tag.id} value={tag.name} capitalizeFirst>\n            {tag.display_name || tag.name}\n          </Item>\n        ))}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {TicketTag} from '@app/agent/ticket';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\n\ninterface Response extends BackendResponse {\n  tag: TicketTag;\n}\n\ninterface Payload {\n  tagName: string;\n  ticketIds: number[];\n}\n\nexport function useAddTagToTickets() {\n  return useMutation({\n    mutationFn: (payload: Payload) => addTag(payload),\n    onSuccess: async () => {\n      queryClient.invalidateQueries({queryKey: ['mailbox', 'sidenav-tags']});\n      await queryClient.invalidateQueries({queryKey: ['tickets']});\n      toast(message('Tag added'));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction addTag(payload: Payload): Promise<Response> {\n  return apiClient.post(`tickets/tags/add`, payload).then(r => r.data);\n}\n","import {createSvgIcon} from '@common/icons/create-svg-icon';\n\nexport const AddTagIcon = createSvgIcon(\n  <path d=\"M 16 5 L 15.6875 5.28125 L 4.28125 16.8125 L 3.59375 17.5 L 4.28125 18.21875 L 13.78125 27.71875 L 14.5 28.40625 L 15.1875 27.71875 L 16.40625 26.5 C 17.46025 29.688126 20.466215 32 24 32 C 28.406433 32 32 28.406433 32 24 C 32 20.501976 29.731898 17.519896 26.59375 16.4375 L 26.71875 16.3125 L 27 16 L 27 15.59375 L 27 6 L 27 5 L 26 5 L 16.40625 5 L 16 5 z M 16.84375 7 L 25 7 L 25 15.15625 L 24.15625 16 C 24.103605 15.99897 24.052884 16 24 16 C 19.593567 16 16 19.593567 16 24 C 16 24.03173 15.999628 24.062105 16 24.09375 L 14.5 25.59375 L 6.40625 17.5 L 16.84375 7 z M 22 9 C 21.447715 9 21 9.4477153 21 10 C 21 10.552285 21.447715 11 22 11 C 22.552285 11 23 10.552285 23 10 C 23 9.4477153 22.552285 9 22 9 z M 24 18 C 27.325553 18 30 20.674447 30 24 C 30 27.325553 27.325553 30 24 30 C 20.674447 30 18 27.325553 18 24 C 18 20.674447 20.674447 18 24 18 z M 23 20 L 23 23 L 20 23 L 20 25 L 23 25 L 23 28 L 25 28 L 25 25 L 28 25 L 28 23 L 25 23 L 25 20 L 23 20 z\" />,\n  '',\n  '0 0 32 32'\n);\n","import {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport React, {useState} from 'react';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {useTags} from '@common/tags/use-tags';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {ComboBox} from '@common/ui/forms/combobox/combobox';\nimport {message} from '@common/i18n/message';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {useAddTagToTickets} from '@app/agent/ticket-actions/requests/use-add-tag-to-tickets';\nimport {TicketActionButton} from '@app/agent/ticket-actions/ticket-action-button';\nimport {AddTagIcon} from '@app/agent/ticket-actions/icons/add-tag-icon';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\n\ninterface Props {\n  ticketIds: number[];\n  onSuccess?: () => void;\n  isCompact?: boolean;\n}\nexport function AddTagToTicketsButton({\n  ticketIds,\n  onSuccess,\n  isCompact,\n}: Props) {\n  const addTag = useAddTagToTickets();\n  const [isOpen, setIsOpen] = useState(false);\n  useKeybind('window', 't', () => setIsOpen(true));\n\n  return (\n    <DialogTrigger\n      isOpen={isOpen}\n      onOpenChange={setIsOpen}\n      type=\"popover\"\n      onClose={tagName => {\n        if (tagName) {\n          addTag.mutate({tagName, ticketIds}, {onSuccess});\n        }\n      }}\n    >\n      <TicketActionButton\n        startIcon={<AddTagIcon />}\n        isCompact={isCompact}\n        disabled={addTag.isPending}\n      >\n        <Trans message=\"Add tag (t)\" />\n      </TicketActionButton>\n      <AddTagDialog />\n    </DialogTrigger>\n  );\n}\n\nfunction AddTagDialog() {\n  const {trans} = useTrans();\n  const [query, setQuery] = useState('');\n  const [selectedTag, setSelectedTag] = useState<string>('');\n  const {data, isFetching} = useTags({query, perPage: 8, notType: 'status'});\n  const {close, formId} = useDialogContext();\n\n  return (\n    <Dialog size=\"sm\">\n      <DialogHeader>\n        <Trans message=\"Add tag\" />\n      </DialogHeader>\n      <DialogBody>\n        <form\n          id={formId}\n          onSubmit={e => {\n            e.preventDefault();\n            close(selectedTag);\n          }}\n        >\n          <ComboBox\n            isAsync\n            isLoading={isFetching}\n            inputValue={query}\n            onInputValueChange={setQuery}\n            selectedValue={selectedTag}\n            onSelectionChange={value => setSelectedTag(value as string)}\n            selectionMode=\"single\"\n            placeholder={trans(message('Enter tag name...'))}\n            allowCustomValue\n            autoFocus\n          >\n            {data?.pagination.data.map(result => (\n              <Item\n                key={result.id}\n                value={result.name}\n                textLabel={result.name}\n                capitalizeFirst\n                className=\"rounded\"\n              >\n                {result.display_name || result.name}\n              </Item>\n            ))}\n          </ComboBox>\n        </form>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button variant=\"flat\" color=\"primary\" type=\"submit\" form={formId}>\n          <Trans message=\"Add\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\n\ninterface Payload {\n  ids: (number | string)[];\n}\n\nexport function useDeleteTickets() {\n  return useMutation({\n    mutationFn: (payload: Payload) => deleteTickets(payload),\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({queryKey: ['tickets']});\n      toast(message('Tickets deleted'));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction deleteTickets({ids}: Payload) {\n  return apiClient\n    .delete<BackendResponse>(`tickets/${ids.join(',')}`)\n    .then(r => r.data);\n}\n","import {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {TicketActionButton} from '@app/agent/ticket-actions/ticket-action-button';\nimport {DeleteIcon} from '@common/icons/material/Delete';\nimport {Trans} from '@common/i18n/trans';\nimport React, {useState} from 'react';\nimport {useDeleteTickets} from '@app/agent/ticket-actions/requests/use-delete-tickets';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\n\ninterface Props {\n  ticketIds: number[];\n  onSuccess?: () => void;\n  isCompact?: boolean;\n}\nexport function DeleteTicketsButton({ticketIds, onSuccess, isCompact}: Props) {\n  const [isOpen, setIsOpen] = useState(false);\n  useKeybind('window', 'd', () => setIsOpen(true));\n\n  return (\n    <DialogTrigger type=\"modal\" isOpen={isOpen} onOpenChange={setIsOpen}>\n      <TicketActionButton\n        startIcon={<DeleteIcon />}\n        color=\"danger\"\n        isCompact={isCompact}\n      >\n        <Trans message=\"Delete (d)\" />\n      </TicketActionButton>\n      <DeleteTicketsDialog ticketIds={ticketIds} onDeleted={onSuccess} />\n    </DialogTrigger>\n  );\n}\n\ninterface DeleteTicketsButtonProps {\n  ticketIds: number[];\n  onDeleted?: () => void;\n}\nfunction DeleteTicketsDialog({ticketIds, onDeleted}: DeleteTicketsButtonProps) {\n  const deleteTickets = useDeleteTickets();\n  const {close} = useDialogContext();\n  return (\n    <ConfirmationDialog\n      isDanger\n      isLoading={deleteTickets.isPending}\n      onConfirm={() => {\n        deleteTickets.mutate(\n          {ids: ticketIds},\n          {\n            onSuccess: () => {\n              close();\n              onDeleted?.();\n            },\n          },\n        );\n      }}\n      title={<Trans message=\"Delete tickets\" />}\n      body={\n        <Trans message=\"Are you sure you want to delete selected tickets?\" />\n      }\n      confirm={<Trans message=\"delete\" />}\n    />\n  );\n}\n","import React, {useRef} from 'react';\nimport {m} from 'framer-motion';\nimport {AssignTicketsButton} from '@app/agent/ticket-actions/assign-tickets-button';\nimport {ChangeTicketStatusButton} from '@app/agent/ticket-actions/change-ticket-status-button';\nimport {AddTagToTicketsButton} from '@app/agent/ticket-actions/add-tag-to-tickets-button';\nimport {DeleteTicketsButton} from '@app/agent/ticket-actions/delete-tickets-button';\nimport {useAutoFocus} from '@common/ui/focus/use-auto-focus';\n\ninterface Props {\n  ticketIds: number[];\n  onActionCompleted: () => void;\n}\nexport function TicketTableActions({ticketIds, onActionCompleted}: Props) {\n  const ref = useRef<HTMLDivElement>(null);\n  useAutoFocus({autoFocus: true}, ref);\n  return (\n    <m.div\n      ref={ref}\n      initial={{y: -30, opacity: 1}}\n      animate={{y: 0, opacity: 1}}\n      exit={{y: 30, opacity: 0}}\n      tabIndex={-1}\n      role=\"menu\"\n      className=\"fixed left-0 right-0 top-120 mx-auto flex w-max items-center justify-center gap-12 rounded border bg p-14 shadow-lg outline-none focus-visible:ring-2\"\n    >\n      <AssignTicketsButton\n        ticketIds={ticketIds}\n        onSuccess={onActionCompleted}\n      />\n      <ChangeTicketStatusButton\n        ticketIds={ticketIds}\n        onSuccess={onActionCompleted}\n      />\n      <AddTagToTicketsButton\n        ticketIds={ticketIds}\n        onSuccess={onActionCompleted}\n      />\n      <DeleteTicketsButton\n        ticketIds={ticketIds}\n        onSuccess={onActionCompleted}\n      />\n    </m.div>\n  );\n}\n","import {useTickets} from '@app/agent/agent-ticket-page/user-details-sidebar/requests/use-tickets';\nimport {Trans} from '@common/i18n/trans';\nimport React, {Fragment, useMemo, useState} from 'react';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport openedImage from './opened.svg';\nimport {\n  useMailboxParams,\n  useNavigateToMailboxTicketTable,\n} from '@app/agent/use-mailbox-params';\nimport {TicketTableFooter} from '@app/agent/agent-ticket-list-page/ticket-table/ticket-table-footer';\nimport {TicketTable} from '@app/agent/agent-ticket-list-page/ticket-table/ticket-table';\nimport {GlobalLoadingProgress} from '@app/agent/global-loading-progress';\nimport {TicketTableActions} from '@app/agent/agent-ticket-list-page/ticket-table/ticket-table-actions';\nimport {AnimatePresence} from 'framer-motion';\nimport {SortDescriptor} from '@common/ui/tables/types/sort-descriptor';\nimport {useSearchParams} from 'react-router-dom';\n\nexport function TicketTablePage() {\n  const [searchParams] = useSearchParams();\n  const orderBy = searchParams.get('orderBy') || '';\n  const orderDir = searchParams.get('orderDir') || '';\n  const sortDescriptor = useMemo(() => {\n    return {orderBy, orderDir: orderDir as SortDescriptor['orderDir']};\n  }, [orderBy, orderDir]);\n  const query = useTickets({\n    ...useMailboxParams(),\n    loader: 'ticketTable',\n  });\n  const {data, isLoading, isPlaceholderData} = query;\n  const items = data?.pagination.data || [];\n  const isEmpty = !isLoading && !isPlaceholderData && items.length === 0;\n  const navigateToTicketTable = useNavigateToMailboxTicketTable();\n  const [selectedTickets, setSelectedTickets] = useState<number[]>([]);\n\n  return (\n    <Fragment>\n      <GlobalLoadingProgress query={query} />\n      <div className=\"flex min-h-full min-w-0 flex-col\">\n        <div className=\"flex-auto\">\n          <TicketTable\n            query={query}\n            selectedTickets={selectedTickets}\n            onSelectionChange={setSelectedTickets}\n            sortDescriptor={sortDescriptor}\n            onSortChange={value => {\n              navigateToTicketTable({\n                orderBy: value.orderBy,\n                orderDir: value.orderDir,\n              });\n            }}\n          />\n          {isEmpty && (\n            <IllustratedMessage\n              className=\"mt-40\"\n              size=\"sm\"\n              image={<SvgImage src={openedImage} />}\n              title={\n                <Trans message=\"There are no tickets in this category yet.\" />\n              }\n            />\n          )}\n        </div>\n        <TicketTableFooter\n          query={query}\n          onPageChange={page => navigateToTicketTable({page})}\n          onPerPageChange={perPage => navigateToTicketTable({perPage})}\n        />\n        <AnimatePresence>\n          {selectedTickets.length && (\n            <TicketTableActions\n              ticketIds={selectedTickets}\n              onActionCompleted={() => setSelectedTickets([])}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </Fragment>\n  );\n}\n","import {SearchTriggerButton} from '@app/help-center/search/search-trigger-button';\nimport {Trans} from '@common/i18n/trans';\nimport React, {JSXElementConstructor, useCallback} from 'react';\nimport {NavbarProps} from '@common/ui/navigation/navbar/navbar';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\n\ninterface Props {\n  element: JSXElementConstructor<NavbarProps>;\n  onOpenSearchPage?: () => void;\n}\nexport function AgentNavbar({element, onOpenSearchPage}: Props) {\n  const navigate = useNavigate();\n  const defaultOpenSearchPage = useCallback(() => {\n    navigate('/agent/search');\n  }, [navigate]);\n\n  const Element = element;\n  return (\n    <Element menuPosition=\"agent-mailbox\" color=\"bg\" size=\"md\">\n      <SearchTriggerButton\n        size=\"sm\"\n        width=\"w-320\"\n        onTrigger={onOpenSearchPage || defaultOpenSearchPage}\n      >\n        <Trans message=\"Search\" />\n      </SearchTriggerButton>\n    </Element>\n  );\n}\n","import {\n  MailboxTag,\n  useMailboxSidenavTags,\n} from '@app/agent/use-mailbox-sidenav-tags';\nimport {Trans} from '@common/i18n/trans';\nimport {Fragment, ReactNode} from 'react';\nimport {InboxIcon} from '@common/icons/material/Inbox';\nimport {NavLink} from 'react-router-dom';\nimport {FolderIcon} from '@common/icons/material/Folder';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport clsx from 'clsx';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {useMailboxParams} from '@app/agent/use-mailbox-params';\nimport {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {Button} from '@common/ui/buttons/button';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {SettingsIcon} from '@common/icons/material/Settings';\nimport {KeyboardArrowUpIcon} from '@common/icons/material/KeyboardArrowUp';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\n\nexport function AgentTicketListSidenav() {\n  const navigate = useNavigate();\n  return (\n    <aside className=\"compact-scrollbar flex w-full flex-col gap-24 overflow-y-auto border-r text-muted\">\n      <div className=\"flex-auto\">\n        <Heading icon={<InboxIcon />}>\n          <Trans message=\"Inbox\" />\n        </Heading>\n        <TagList type=\"viewTags\" />\n        <Heading icon={<FolderIcon />}>\n          <Trans message=\"Folders\" />\n        </Heading>\n        <TagList type=\"categoryTags\" />\n      </div>\n      <div className=\"mt-auto p-14\">\n        <MenuTrigger placement=\"top\">\n          <Button\n            className=\"min-h-34 w-full\"\n            variant=\"outline\"\n            startIcon={<SettingsIcon />}\n            endIcon={<KeyboardArrowUpIcon />}\n            size=\"xs\"\n          >\n            <Trans message=\"Settings\" />\n          </Button>\n          <Menu>\n            <Item\n              value=\"saved-replies\"\n              onSelected={() => navigate('/agent/saved-replies')}\n            >\n              <Trans message=\"Saved replies\" />\n            </Item>\n            <Item\n              value=\"new-ticket\"\n              onSelected={() => navigate('/agent/tickets/new')}\n            >\n              <Trans message=\"New ticket\" />\n            </Item>\n            <Item\n              value=\"notifications\"\n              onSelected={() => navigate('/notifications/settings')}\n            >\n              <Trans message=\"Notifications\" />\n            </Item>\n          </Menu>\n        </MenuTrigger>\n      </div>\n    </aside>\n  );\n}\n\ninterface HeadingProps {\n  icon: ReactNode;\n  children: ReactNode;\n}\nfunction Heading({icon, children}: HeadingProps) {\n  return (\n    <div className=\"mb-14 flex items-center gap-8 px-14 pt-20\">\n      {icon}\n      <div className=\"text-sm font-semibold uppercase\">{children}</div>\n    </div>\n  );\n}\n\nconst listItemClassName =\n  'flex h-40 items-center justify-between gap-8 pl-38 pr-8 mx-8 rounded-lg';\n\ninterface TagListProps {\n  type: 'viewTags' | 'categoryTags';\n}\nfunction TagList({type}: TagListProps) {\n  const {data, isLoading} = useMailboxSidenavTags();\n  const tags = data?.[type];\n\n  const skeletons = (\n    <m.div key=\"skeletons\" {...opacityAnimation}>\n      {[...Array(4)].map((_, index) => (\n        <div\n          key={index}\n          className={clsx(listItemClassName, 'max-w-172 border-l-transparent')}\n        >\n          <Skeleton variant=\"text\" />\n        </div>\n      ))}\n    </m.div>\n  );\n\n  return (\n    <AnimatePresence initial={false} mode=\"wait\">\n      {isLoading ? (\n        skeletons\n      ) : (\n        <m.ul\n          className=\"cursor-pointer text-sm\"\n          key=\"tag-list\"\n          {...opacityAnimation}\n        >\n          {tags?.map(tag => <TagListItem tag={tag} key={tag.id} />)}\n        </m.ul>\n      )}\n    </AnimatePresence>\n  );\n}\n\ninterface TagListItemProps {\n  tag: MailboxTag;\n}\nfunction TagListItem({tag}: TagListItemProps) {\n  const isActive = `${tag.id}` === useMailboxParams().tagId;\n  return (\n    <li key={tag.id}>\n      <NavLink\n        className={clsx(\n          listItemClassName,\n          isActive\n            ? 'border-l-primary bg-primary/6 hover:bg-primary/10'\n            : 'border-l-transparent hover:bg-hover',\n        )}\n        to={`/agent/tickets?tagId=${tag.id}`}\n        end={true}\n      >\n        {' '}\n        <Fragment>\n          <Trans message={tag.display_name || tag.name} />\n          {tag.tickets_count ? (\n            <div\n              className={clsx(\n                'flex h-18 w-30 items-center justify-center rounded-full text-[11px] font-semibold',\n                isActive && 'bg-primary text-on-primary',\n              )}\n            >\n              {tag.tickets_count}\n            </div>\n          ) : null}\n        </Fragment>\n      </NavLink>\n    </li>\n  );\n}\n","import {DashboardLayout} from '@common/ui/layout/dashboard-layout';\nimport {AgentNavbar} from '@app/agent/agent-navbar';\nimport {DashboardNavbar} from '@common/ui/layout/dashboard-navbar';\nimport {\n  DashboardSidenav,\n  SidenavProps,\n} from '@common/ui/layout/dashboard-sidenav';\nimport {DashboardContent} from '@common/ui/layout/dashboard-content';\nimport React, {ReactElement} from 'react';\nimport {AgentTicketListSidenav} from '@app/agent/agent-ticket-list-page/agent-ticket-list-sidenav';\n\ninterface Props {\n  children: ReactElement;\n  rightSidenav?: ReactElement<SidenavProps>;\n}\nexport function AgentPageLayout({children, rightSidenav}: Props) {\n  return (\n    <DashboardLayout name=\"mailbox\">\n      <AgentNavbar element={DashboardNavbar} />\n      <DashboardSidenav position=\"left\" className=\"bg-alt\">\n        <AgentTicketListSidenav />\n      </DashboardSidenav>\n      <DashboardContent>\n        <main>{children}</main>\n      </DashboardContent>\n      {rightSidenav}\n    </DashboardLayout>\n  );\n}\n","import React from 'react';\nimport {TicketTablePage} from '@app/agent/agent-ticket-list-page/ticket-table/ticket-table-page';\nimport {AgentPageLayout} from '@app/agent/agent-page-layout';\n\nexport function AgentTicketListPage() {\n  return (\n    <AgentPageLayout>\n      <TicketTablePage />\n    </AgentPageLayout>\n  );\n}\n","import{useRef as r,useEffect as n,useMemo as t,useCallback as u,useState as e}from\"react\";function c(u,e,c){var i=this,a=r(null),o=r(0),f=r(null),l=r([]),m=r(),v=r(),d=r(u),p=r(!0);n(function(){d.current=u},[u]);var g=!e&&0!==e&&\"undefined\"!=typeof window;if(\"function\"!=typeof u)throw new TypeError(\"Expected a function\");e=+e||0;var w=!!(c=c||{}).leading,s=!(\"trailing\"in c)||!!c.trailing,x=\"maxWait\"in c,y=x?Math.max(+c.maxWait||0,e):null;n(function(){return p.current=!0,function(){p.current=!1}},[]);var h=t(function(){var r=function(r){var n=l.current,t=m.current;return l.current=m.current=null,o.current=r,v.current=d.current.apply(t,n)},n=function(r,n){g&&cancelAnimationFrame(f.current),f.current=g?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!p.current)return!1;var n=r-a.current;return!a.current||n>=e||n<0||x&&r-o.current>=y},u=function(n){return f.current=null,s&&l.current?r(n):(l.current=m.current=null,v.current)},c=function r(){var c=Date.now();if(t(c))return u(c);if(p.current){var i=e-(c-a.current),f=x?Math.min(i,y-(c-o.current)):i;n(r,f)}},h=function(){var u=Date.now(),d=t(u);if(l.current=[].slice.call(arguments),m.current=i,a.current=u,d){if(!f.current&&p.current)return o.current=a.current,n(c,e),w?r(a.current):v.current;if(x)return n(c,e),r(a.current)}return f.current||n(c,e),v.current};return h.cancel=function(){f.current&&(g?cancelAnimationFrame(f.current):clearTimeout(f.current)),o.current=0,l.current=a.current=m.current=f.current=null},h.isPending=function(){return!!f.current},h.flush=function(){return f.current?u(Date.now()):v.current},h},[w,x,e,y,s,g]);return h}function i(r,n){return r===n}function a(r){return\"function\"==typeof r?function(){return r}:r}function o(n,t,o){var f,l,m=o&&o.equalityFn||i,v=(f=e(a(n)),l=f[1],[f[0],u(function(r){return l(a(r))},[])]),d=v[0],p=v[1],g=c(u(function(r){return p(r)},[p]),t,o),w=r(n);return m(w.current,n)||(g(n),w.current=n),[d,g]}function f(r,n,t){var u=void 0===t?{}:t,e=u.leading,i=u.trailing;return c(r,n,{maxWait:n,leading:void 0===e||e,trailing:void 0===i||i})}export{o as useDebounce,c as useDebouncedCallback,f as useThrottledCallback};\n//# sourceMappingURL=index.module.js.map\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '@common/datatable/filters/backend-filter';\nimport {message} from '@common/i18n/message';\nimport {\n  createdAtFilter,\n  timestampFilter,\n  updatedAtFilter,\n} from '@common/datatable/filters/timestamp-filters';\nimport {useMailboxSidenavTags} from '@app/agent/use-mailbox-sidenav-tags';\nimport {useMemo} from 'react';\nimport {USER_MODEL} from '@common/auth/user';\n\nexport function useSearchTicketsFilters(): BackendFilter[] | null {\n  const {data} = useMailboxSidenavTags();\n\n  return useMemo(() => {\n    if (!data) return null;\n    return [\n      {\n        key: 'status',\n        label: message('Status'),\n        description: message('Ticket status'),\n        defaultOperator: FilterOperator.eq,\n        control: {\n          type: FilterControlType.Select,\n          defaultValue: '01',\n          options: data.statusTags.map(tag => ({\n            key: tag.id,\n            label: message(tag.display_name || tag.name),\n            value: tag.name,\n          })),\n        },\n      },\n      {\n        key: 'tag',\n        label: message('Folder'),\n        description: message('Folder ticket is assigned to'),\n        defaultOperator: FilterOperator.eq,\n        control: {\n          type: FilterControlType.Select,\n          defaultValue: '01',\n          options: data.categoryTags.map(tag => ({\n            key: tag.id,\n            label: message(tag.display_name || tag.name),\n            value: tag.name,\n          })),\n        },\n      },\n      createdAtFilter({\n        description: message('Date ticket was created'),\n      }),\n      updatedAtFilter({\n        description: message('Date ticket was last updated'),\n      }),\n      timestampFilter({\n        key: 'closed_at',\n        label: message('Closed at'),\n        description: message('Date ticket was closed'),\n      }),\n      {\n        key: 'user_id',\n        label: message('Customer'),\n        description: message('Customer that created the ticket'),\n        defaultOperator: FilterOperator.eq,\n        control: {\n          type: FilterControlType.SelectModel,\n          model: USER_MODEL,\n        },\n      },\n      {\n        key: 'assigned_to',\n        label: message('Assignee'),\n        description: message('Agent assigned to the ticket'),\n        defaultOperator: FilterOperator.eq,\n        control: {\n          type: FilterControlType.SelectModel,\n          model: USER_MODEL,\n        },\n      },\n    ];\n  }, [data]);\n}\n","import {useEffect} from 'react';\n\nexport function useStableScrollbar(disable: boolean = false) {\n  useEffect(() => {\n    if (disable) {\n      document.documentElement.classList.remove('stable-scrollbar');\n    } else {\n      document.documentElement.classList.add('stable-scrollbar');\n    }\n    return () => {\n      document.documentElement.classList.remove('stable-scrollbar');\n    };\n  }, [disable]);\n}\n","import {AgentNavbar} from '@app/agent/agent-navbar';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport {Navbar} from '@common/ui/navigation/navbar/navbar';\nimport {Tabs} from '@common/ui/tabs/tabs';\nimport {Tab} from '@common/ui/tabs/tab';\nimport {Trans} from '@common/i18n/trans';\nimport {Link, Outlet, useLocation, useSearchParams} from 'react-router-dom';\nimport {TabList} from '@common/ui/tabs/tab-list';\nimport {message} from '@common/i18n/message';\nimport {TextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {SearchIcon} from '@common/icons/material/Search';\nimport {useDebouncedCallback} from 'use-debounce';\nimport {FilterList} from '@common/datatable/filters/filter-list/filter-list';\nimport {AddFilterButton} from '@common/datatable/filters/add-filter-button';\nimport {useSearchTicketsFilters} from '@app/agent/agent-search-page/search-tickets/use-search-tickets-filters';\nimport {useStableScrollbar} from '@common/utils/hooks/use-stable-scrollbar';\n\nconst PageTabs = [\n  {uri: 'tickets', label: message('Tickets'), key: 0},\n  {uri: 'users', label: message('Users'), key: 1},\n  {uri: 'articles', label: message('Articles'), key: 2},\n];\n\nexport function AgentSearchPage() {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsQuery = searchParams.get('query') || '';\n  const {pathname} = useLocation();\n  const tabName = pathname.split('/').pop();\n  const selectedTab = PageTabs.find(tab => tab.uri === tabName)?.key ?? 0;\n  const searchInputRef = useRef<HTMLInputElement>(null);\n  const [searchQuery, _setSearchQuery] = useState(searchParamsQuery);\n\n  useStableScrollbar();\n\n  useEffect(() => {\n    _setSearchQuery(searchParamsQuery);\n  }, [searchParamsQuery]);\n\n  const updateQueryParams = (value: string) => {\n    setSearchParams(prev => {\n      prev.delete('page');\n      prev.set('query', value);\n      return prev;\n    });\n  };\n  const debouncedUpdateQueryParams = useDebouncedCallback(value => {\n    updateQueryParams(value);\n  }, 400);\n\n  const setSearchQuery = (value: string) => {\n    _setSearchQuery(value);\n    debouncedUpdateQueryParams(value);\n  };\n\n  const focusSearchInput = useCallback(() => {\n    searchInputRef.current?.focus();\n  }, []);\n\n  const filters = useSearchTicketsFilters();\n  const showFilters = filters && selectedTab === 0;\n\n  return (\n    <div>\n      <AgentNavbar element={Navbar} onOpenSearchPage={focusSearchInput} />\n      <main className=\"container mx-auto p-14 md:p-24\">\n        <div className=\"mb-34 flex items-center gap-24 pt-6\">\n          <form\n            className=\"flex-auto\"\n            onSubmit={e => {\n              e.preventDefault();\n              updateQueryParams(searchQuery);\n            }}\n          >\n            <TextField\n              onBlur={() => updateQueryParams(searchQuery)}\n              inputRef={searchInputRef}\n              value={searchQuery}\n              onChange={e => {\n                setSearchQuery(e.target.value);\n              }}\n              startAdornment={<SearchIcon />}\n              autoFocus\n            />\n          </form>\n          {showFilters && (\n            <AddFilterButton className=\"min-h-42 min-w-42\" filters={filters} />\n          )}\n        </div>\n        {showFilters && <FilterList filters={filters} />}\n        <Tabs selectedTab={selectedTab}>\n          <TabList>\n            {PageTabs.map(tab => (\n              <Tab\n                key={tab.key}\n                width=\"min-w-132\"\n                elementType={Link}\n                to={`/agent/search/${tab.uri}?query=${searchQuery}`}\n                relative=\"path\"\n                replace\n              >\n                <Trans {...tab.label} />\n              </Tab>\n            ))}\n          </TabList>\n          <div className=\"pt-34\">\n            <Outlet />\n          </div>\n        </Tabs>\n      </main>\n    </div>\n  );\n}\n","import {keepPreviousData, useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {PaginateTicketsParams} from '@app/agent/agent-ticket-page/user-details-sidebar/requests/use-tickets';\nimport {useSearchParams} from 'react-router-dom';\nimport {Ticket} from '@app/agent/ticket';\n\nexport interface PaginateTicketsResponse\n  extends PaginatedBackendResponse<Ticket> {}\n\nexport function useSearchTickets() {\n  const [searchParams] = useSearchParams();\n  const params = {\n    filters: searchParams.get('filters') ?? '',\n    query: searchParams.get('query') ?? '',\n    page: searchParams.get('page') ?? '1',\n    perPage: searchParams.get('perPage') ?? '20',\n  };\n  const enabled = !!params.query || !!params.filters;\n  return useQuery({\n    queryKey: ['tickets', 'search', params],\n    queryFn: () => fetchTickets(params),\n    placeholderData: enabled ? keepPreviousData : undefined,\n    enabled,\n  });\n}\n\nfunction fetchTickets(params: PaginateTicketsParams) {\n  return apiClient\n    .get<PaginateTicketsResponse>('search/tickets', {params})\n    .then(response => response.data);\n}\n","import React, {Fragment, ReactNode} from 'react';\nimport {GlobalLoadingProgress} from '@app/agent/global-loading-progress';\nimport {DataTableEmptyStateMessage} from '@common/datatable/page/data-table-emty-state-message';\nimport searchImage from '@app/agent/agent-search-page/search.svg';\nimport {Trans} from '@common/i18n/trans';\nimport {DataTablePaginationFooter} from '@common/datatable/data-table-pagination-footer';\nimport {UseQueryResult} from '@tanstack/react-query';\nimport {useSearchParams} from 'react-router-dom';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\n\ninterface Props {\n  query: UseQueryResult<PaginatedBackendResponse<unknown>>;\n  children: ReactNode;\n}\nexport function SearchTableLayout({query, children}: Props) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const {data, fetchStatus, isLoading, isPlaceholderData} = query;\n  const items = data?.pagination.data || [];\n  const isEmpty =\n    (fetchStatus === 'idle' && items.length === 0) ||\n    (!isLoading && !isPlaceholderData && items.length === 0);\n\n  return (\n    <Fragment>\n      <GlobalLoadingProgress query={query} />\n      {children}\n      {isEmpty && (\n        <DataTableEmptyStateMessage\n          isFiltering={\n            !!searchParams.get('query') || !!searchParams.get('filters')\n          }\n          className=\"mt-48\"\n          image={searchImage}\n          title={\n            <Trans message=\"Enter your query or filters to start searching\" />\n          }\n          filteringTitle={\n            <Trans message=\"No results match your query or filters\" />\n          }\n        />\n      )}\n      <DataTablePaginationFooter\n        query={query}\n        onPageChange={page =>\n          setSearchParams(prev => {\n            prev.set('page', page.toString());\n            return prev;\n          })\n        }\n        onPerPageChange={perPage =>\n          setSearchParams(prev => {\n            prev.set('perPage', perPage.toString());\n            return prev;\n          })\n        }\n      />\n    </Fragment>\n  );\n}\n","import {useSearchTickets} from '@app/agent/agent-search-page/requests/use-search-tickets';\nimport {TicketTable} from '@app/agent/agent-ticket-list-page/ticket-table/ticket-table';\nimport React, {useState} from 'react';\nimport {SearchTableLayout} from '@app/agent/agent-search-page/search-table-layout';\nimport {AnimatePresence} from 'framer-motion';\nimport {TicketTableActions} from '@app/agent/agent-ticket-list-page/ticket-table/ticket-table-actions';\n\nexport function SearchTicketsTable() {\n  const query = useSearchTickets();\n  const [selectedTickets, setSelectedTickets] = useState<number[]>([]);\n  return (\n    <SearchTableLayout query={query}>\n      <TicketTable\n        query={query}\n        selectedTickets={selectedTickets}\n        onSelectionChange={setSelectedTickets}\n      />\n      <AnimatePresence>\n        {selectedTickets.length && (\n          <TicketTableActions\n            ticketIds={selectedTickets}\n            onActionCompleted={() => setSelectedTickets([])}\n          />\n        )}\n      </AnimatePresence>\n    </SearchTableLayout>\n  );\n}\n","import {keepPreviousData, useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {PaginateTicketsParams} from '@app/agent/agent-ticket-page/user-details-sidebar/requests/use-tickets';\nimport {useSearchParams} from 'react-router-dom';\nimport {User} from '@common/auth/user';\n\nexport interface PaginateUsersResponse extends PaginatedBackendResponse<User> {}\n\nexport function useSearchUsers() {\n  const [searchParams] = useSearchParams();\n  const params = {\n    query: searchParams.get('query') ?? '',\n    page: searchParams.get('page') ?? '1',\n    perPage: searchParams.get('perPage') ?? '20',\n  };\n  return useQuery({\n    queryKey: ['users', 'search', params],\n    queryFn: () => fetchUsers(params),\n    placeholderData: keepPreviousData,\n    enabled: !!params.query,\n  });\n}\n\nfunction fetchUsers(params: PaginateTicketsParams) {\n  return apiClient\n    .get<PaginateUsersResponse>('search/users', {params})\n    .then(response => response.data);\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {useSearchUsers} from '@app/agent/agent-search-page/requests/use-search-users';\nimport {ColumnConfig} from '@common/datatable/column-config';\nimport {User} from '@common/auth/user';\nimport {NameWithAvatar} from '@common/datatable/column-templates/name-with-avatar';\nimport {ChipList} from '@common/ui/forms/input-field/chip-field/chip-list';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Table} from '@common/ui/tables/table';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {SearchTableLayout} from '@app/agent/agent-search-page/search-table-layout';\n\nconst columnConfig: ColumnConfig<User>[] = [\n  {\n    key: 'name',\n    allowsSorting: true,\n    sortingKey: 'email',\n    width: 'flex-3 min-w-200',\n    visibleInMode: 'all',\n    header: () => <Trans message=\"User\" />,\n    body: user => (\n      <NameWithAvatar\n        image={user.avatar}\n        label={user.display_name}\n        description={user.email}\n      />\n    ),\n  },\n  {\n    key: 'roles',\n    header: () => <Trans message=\"Roles\" />,\n    body: user => (\n      <ChipList radius=\"rounded\" size=\"xs\">\n        {user.roles?.map(role => (\n          <Chip key={role.id} selectable className=\"capitalize\">\n            <Trans message={role.name} />\n          </Chip>\n        ))}\n      </ChipList>\n    ),\n  },\n  {\n    key: 'createdAt',\n    allowsSorting: true,\n    width: 'w-96',\n    header: () => <Trans message=\"Created at\" />,\n    body: user => (\n      <time>\n        <FormattedDate date={user.created_at} />\n      </time>\n    ),\n  },\n];\n\nexport function SearchUsersTable() {\n  const navigate = useNavigate();\n  const query = useSearchUsers();\n  return (\n    <SearchTableLayout query={query}>\n      <Table\n        headerCellHeight=\"h-36\"\n        cellHeight=\"h-64\"\n        columns={columnConfig}\n        data={query.data?.pagination.data || []}\n        enableSelection={false}\n        onAction={user => navigate(`/agent/users/${user.id}`)}\n      />\n    </SearchTableLayout>\n  );\n}\n","import {Trans} from '@common/i18n/trans';\nimport React from 'react';\nimport {useSearchParams} from 'react-router-dom';\nimport {ColumnConfig} from '@common/datatable/column-config';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {Table} from '@common/ui/tables/table';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {Article} from '@app/help-center/articles/article';\nimport {ArticleIcon} from '@common/icons/material/Article';\nimport {useSearchArticles} from '@app/help-center/search/use-search-articles';\nimport {getArticleLink} from '@app/help-center/articles/article-link';\nimport {ArticlePath} from '@app/help-center/articles/article-path';\nimport {SearchTableLayout} from '@app/agent/agent-search-page/search-table-layout';\n\nconst columnConfig: ColumnConfig<Article>[] = [\n  {\n    key: 'name',\n    width: 'flex-3 min-w-200',\n    visibleInMode: 'all',\n    header: () => <Trans message=\"Article\" />,\n    body: article => (\n      <div className=\"flex items-center gap-12\">\n        <ArticleIcon />\n        <div className=\"min-w-0 overflow-hidden\">\n          <div className=\"overflow-hidden overflow-ellipsis\">\n            {article.title}\n          </div>\n          <ArticlePath article={article} className=\"text-xs text-muted\" />\n        </div>\n      </div>\n    ),\n  },\n  {\n    key: 'updated_at',\n    allowsSorting: true,\n    width: 'w-96',\n    header: () => <Trans message=\"Last updated\" />,\n    body: user => (\n      <time>\n        <FormattedDate date={user.updated_at} />\n      </time>\n    ),\n  },\n];\n\nexport function SearchArticlesTable() {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const query = useSearchArticles(\n    searchParams.get('query') || '',\n    {\n      page: searchParams.get('page') ?? '1',\n      perPage: searchParams.get('perPage') ?? '20',\n      paginate: 'lengthAware',\n    },\n    {disableDebounce: true},\n  );\n  return (\n    <SearchTableLayout query={query}>\n      <Table\n        headerCellHeight=\"h-36\"\n        cellHeight=\"h-64\"\n        columns={columnConfig}\n        data={query.data?.pagination.data || []}\n        enableSelection={false}\n        onAction={article => navigate(getArticleLink(article))}\n      />\n    </SearchTableLayout>\n  );\n}\n","import {createSvgIcon} from '@common/icons/create-svg-icon';\n\nexport const AddNoteIcon = createSvgIcon(\n  <path d=\"M 5 5 L 5 6 L 5 26 L 5 27 L 6 27 L 20 27 L 20.40625 27 L 20.71875 26.71875 L 26.71875 20.71875 L 27 20.40625 L 27 20 L 27 6 L 27 5 L 26 5 L 6 5 L 5 5 z M 7 7 L 25 7 L 25 19 L 20 19 L 19 19 L 19 20 L 19 25 L 7 25 L 7 7 z M 21 21 L 23.5625 21 L 21 23.5625 L 21 21 z\" />,\n  '',\n  '0 0 32 32'\n);\n","import {createSvgIcon} from '@common/icons/create-svg-icon';\n\nexport const BackToTicketsIcon = createSvgIcon(\n  <path d=\"M 8.28125 5.28125 L 2.28125 11.28125 L 1.59375 12 L 2.28125 12.71875 L 8.28125 18.71875 L 9.71875 17.28125 L 5.4375 13 L 23 13 C 25.754545 13 28 15.245455 28 18 C 28 20.754545 25.754545 23 23 23 L 20 23 L 20 25 L 23 25 C 26.845455 25 30 21.845455 30 18 C 30 14.154545 26.845455 11 23 11 L 5.4375 11 L 9.71875 6.71875 L 8.28125 5.28125 z M 8 23 L 8 25 L 10 25 L 10 23 L 8 23 z M 12 23 L 12 25 L 14 25 L 14 23 L 12 23 z M 16 23 L 16 25 L 18 25 L 18 23 L 16 23 z\" />,\n  '',\n  '0 0 32 32'\n);\n","import {useSettings} from '@common/core/settings/use-settings';\nimport {useLocalStorage} from '@common/utils/hooks/local-storage';\nimport {useCallback} from 'react';\nimport {\n  useMailboxParams,\n  useNavigateToMailboxTicketTable,\n} from '@app/agent/use-mailbox-params';\nimport {message} from '@common/i18n/message';\nimport {apiClient} from '@common/http/query-client';\nimport {Ticket} from '@app/agent/ticket';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {getTicketPageLink} from '@app/agent/agent-ticket-page/ticket-page-link';\nimport {useParams} from 'react-router-dom';\n\nexport const AfterReplyActions = {\n  stay_on_page: message('Send and stay on page'),\n  next_active_ticket: message('Send and next ticket'),\n  back_to_folder: message('Send and back to folder'),\n};\n\nexport type AfterReplyAction = keyof typeof AfterReplyActions;\n\nexport function useAfterReplyAction() {\n  const {tagId} = useMailboxParams();\n  const {ticketId} = useParams();\n  const backToTicketTable = useNavigateToMailboxTicketTable();\n  const {replies} = useSettings();\n  const navigate = useNavigate();\n  const defaultAction: AfterReplyAction =\n    replies?.after_reply_action || 'next_active_ticket';\n  const [action, setAction] = useLocalStorage<AfterReplyAction>(\n    'after_reply_action',\n    defaultAction,\n  );\n  const perform = useCallback(async () => {\n    if (action === 'next_active_ticket') {\n      const response = await apiClient.get<{ticket: Ticket}>(\n        `tickets/${tagId}/next-active-ticket`,\n      );\n      if (response?.data.ticket) {\n        if (ticketId === `${response.data.ticket.id}`) {\n          backToTicketTable();\n        } else {\n          navigate(getTicketPageLink(response.data.ticket, {tagId}));\n        }\n      }\n    } else if (action === 'back_to_folder') {\n      backToTicketTable();\n    }\n  }, [action, backToTicketTable, tagId, navigate]);\n\n  return {action, setAction, perform};\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {Reply} from '@app/agent/reply';\nimport {useParams} from 'react-router-dom';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\n\ninterface Response {\n  reply: Reply;\n}\n\ninterface Payload {\n  body: string | null;\n  attachments?: number[];\n}\n\nexport function useCreateNote() {\n  const {ticketId} = useParams();\n  return useMutation({\n    mutationFn: (payload: Payload) => createNote(ticketId!, payload),\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({\n        queryKey: ['tickets', `${ticketId}`],\n      });\n      toast(message('Note added'));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction createNote(ticketId: number | string, payload: Payload) {\n  return apiClient\n    .post<Response>(`tickets/${ticketId}/notes`, payload)\n    .then(r => r.data);\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {ReplyEditor} from '@app/reply-editor/reply-editor';\nimport React, {useRef, useState} from 'react';\nimport {useCreateNote} from '@app/agent/agent-ticket-page/notes/use-create-note';\nimport {Editor} from '@tiptap/react';\nimport {FileEntry} from '@common/uploads/file-entry';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {getReplyBody} from '@app/reply-editor/get-reply-body';\n\nexport function CreateNoteDialog() {\n  const editorRef = useRef<Editor | null>(null);\n  const {close} = useDialogContext();\n  const createNote = useCreateNote();\n  const [attachments, setAttachments] = useState<FileEntry[]>([]);\n\n  const handleSubmit = () => {\n    createNote.mutate(\n      {\n        body: getReplyBody(editorRef),\n        attachments: attachments.map(a => a.id),\n      },\n      {\n        onSuccess: () => close(),\n      },\n    );\n  };\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>\n        <Trans message=\"Add a note\" />\n      </DialogHeader>\n      <DialogBody>\n        <FileUploadProvider>\n          <ReplyEditor\n            minHeight=\"min-h-[300px]\"\n            isLoading={createNote.isPending}\n            editorRef={editorRef}\n            className=\"mb-24\"\n            attachments={attachments}\n            onAttachmentsChange={attachments => setAttachments(attachments)}\n            onSubmit={() => handleSubmit()}\n          />\n        </FileUploadProvider>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          onClick={() => handleSubmit()}\n          disabled={createNote.isPending}\n        >\n          <Trans message=\"Add\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {Ticket} from '@app/agent/ticket';\nimport {Trans} from '@common/i18n/trans';\nimport {Link} from 'react-router-dom';\nimport React, {useState} from 'react';\nimport {useMailboxTicketTableLink} from '@app/agent/use-mailbox-params';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {AssignTicketsButton} from '@app/agent/ticket-actions/assign-tickets-button';\nimport {ChangeTicketStatusButton} from '@app/agent/ticket-actions/change-ticket-status-button';\nimport {AddTagToTicketsButton} from '@app/agent/ticket-actions/add-tag-to-tickets-button';\nimport {AddNoteIcon} from '@app/agent/ticket-actions/icons/add-note-icon';\nimport {BackToTicketsIcon} from '@app/agent/ticket-actions/icons/back-to-tickets-icon';\nimport {TicketActionButton} from '@app/agent/ticket-actions/ticket-action-button';\nimport {useAfterReplyAction} from '@app/agent/agent-ticket-page/use-after-reply-action';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {CreateNoteDialog} from '@app/agent/agent-ticket-page/notes/create-note-dialog';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\n\ninterface Props {\n  ticket: Ticket;\n}\nexport function TicketPageToolbar({ticket}: Props) {\n  const backLink = useMailboxTicketTableLink();\n  const {perform: afterReplyAction} = useAfterReplyAction();\n  return (\n    <div className=\"flex items-center gap-14 border-b py-4 pl-14 pr-20\">\n      <TicketActionButton\n        startIcon={<BackToTicketsIcon />}\n        isCompact={true}\n        elementType={Link}\n        to={backLink}\n      >\n        <Trans message=\"Back (b)\" />\n      </TicketActionButton>\n      <AssignTicketsButton ticketIds={[ticket.id]} isCompact />\n      <AddNoteButton />\n      <AddTagToTicketsButton ticketIds={[ticket.id]} isCompact />\n      <ChangeTicketStatusButton\n        ticketIds={[ticket.id]}\n        isCompact\n        onSuccess={() => afterReplyAction()}\n      />\n      <div className=\"ml-auto text-2xl\">#{ticket.id}</div>\n      {ticket.status && (\n        <Chip\n          size=\"sm\"\n          radius=\"rounded\"\n          className=\"font-bold capitalize\"\n          color={ticket.status === 'open' ? 'primary' : 'chip'}\n        >\n          <Trans message={ticket.status} />\n        </Chip>\n      )}\n    </div>\n  );\n}\n\nfunction AddNoteButton() {\n  const [isOpen, setIsOpen] = useState(false);\n  useKeybind('window', 'n', () => setIsOpen(true));\n  return (\n    <DialogTrigger type=\"modal\" isOpen={isOpen} onOpenChange={setIsOpen}>\n      <TicketActionButton startIcon={<AddNoteIcon />} isCompact>\n        <Trans message=\"Note (n)\" />\n      </TicketActionButton>\n      <CreateNoteDialog />\n    </DialogTrigger>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {Reply} from '@app/agent/reply';\n\ninterface Payload {\n  reply: Reply;\n}\n\nexport function useDeleteReply() {\n  return useMutation({\n    mutationFn: (payload: Payload) => deleteReply(payload),\n    onSuccess: async (_, payload) => {\n      await queryClient.invalidateQueries({\n        queryKey: ['tickets', `${payload.reply.ticket_id}`],\n      });\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction deleteReply(payload: Payload) {\n  return apiClient.delete(`replies/${payload.reply.id}`).then(r => r.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {Reply} from '@app/agent/reply';\n\ninterface Response {\n  reply: Reply;\n}\n\ninterface Payload {\n  reply: Reply;\n  body?: string | null;\n  attachments?: number[];\n}\n\nexport function useUpdateReply() {\n  return useMutation({\n    mutationFn: (payload: Payload) => updateReply(payload),\n    onSuccess: async (_, payload) => {\n      await queryClient.invalidateQueries({\n        queryKey: ['tickets', `${payload.reply.ticket_id}`, 'replies'],\n      });\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction updateReply({reply, ...payload}: Payload) {\n  return apiClient\n    .put<Response>(`replies/${reply.id}`, payload)\n    .then(r => r.data);\n}\n","import {Reply} from '@app/agent/reply';\nimport {useUpdateReply} from '@app/agent/agent-ticket-page/reply-list/requests/use-update-reply';\nimport React from 'react';\nimport {FileEntry} from '@common/uploads/file-entry';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {Trans} from '@common/i18n/trans';\nimport {\n  AttachmentListLayout,\n  FileEntryAttachmentLayout,\n} from '@app/agent/ticket-layout/attachment-list-layout';\nimport {openDialog} from '@common/ui/overlays/store/dialog-store';\n\ninterface Props {\n  reply: Reply;\n}\nexport function ReplyAttachmentList({reply}: Props) {\n  if (!reply.attachments?.length) return null;\n  return (\n    <AttachmentListLayout className=\"mt-30 w-max\">\n      {reply.attachments.map((attachment, index) => (\n        <FileEntryAttachmentLayout\n          key={attachment.id}\n          attachments={reply.attachments!}\n          index={index}\n          onRemove={() => {\n            openDialog(DeleteAttachmentDialog, {reply, attachment});\n          }}\n        />\n      ))}\n    </AttachmentListLayout>\n  );\n}\n\ninterface DeleteAttachmentDialogProps {\n  reply: Reply;\n  attachment: FileEntry;\n}\nfunction DeleteAttachmentDialog({\n  reply,\n  attachment,\n}: DeleteAttachmentDialogProps) {\n  const updateReply = useUpdateReply();\n  const {close} = useDialogContext();\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={<Trans message=\"Delete attachment\" />}\n      body={\n        <Trans message=\"Are you sure you want to delete this attachment?\" />\n      }\n      confirm={<Trans message=\"Delete\" />}\n      onConfirm={() => {\n        updateReply.mutate(\n          {\n            reply,\n            attachments: reply\n              .attachments!.filter(u => u.id !== attachment.id)\n              .map(u => u.id),\n          },\n          {onSuccess: close},\n        );\n      }}\n      isLoading={updateReply.isPending}\n    />\n  );\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {ReplyEditor} from '@app/reply-editor/reply-editor';\nimport React, {useRef, useState} from 'react';\nimport {Editor} from '@tiptap/react';\nimport {FileEntry} from '@common/uploads/file-entry';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {getReplyBody} from '@app/reply-editor/get-reply-body';\nimport {useUpdateReply} from '@app/agent/agent-ticket-page/reply-list/requests/use-update-reply';\nimport {Reply} from '@app/agent/reply';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\n\ninterface Props {\n  reply: Reply;\n}\nexport function UpdateReplyDialog({reply}: Props) {\n  const editorRef = useRef<Editor | null>(null);\n  const {close} = useDialogContext();\n  const updateReply = useUpdateReply();\n  const [attachments, setAttachments] = useState<FileEntry[]>(\n    reply.attachments || [],\n  );\n  const title =\n    reply.type === 'notes' ? (\n      <Trans message=\"Edit note\" />\n    ) : (\n      <Trans message=\"Edit reply\" />\n    );\n\n  const handleSubmit = () => {\n    updateReply.mutate(\n      {\n        reply,\n        body: getReplyBody(editorRef),\n        attachments: attachments.map(a => a.id),\n      },\n      {\n        onSuccess: () => {\n          close();\n          toast(\n            reply.type === 'notes'\n              ? message('Updated note')\n              : message('Updated reply'),\n          );\n        },\n      },\n    );\n  };\n\n  return (\n    <Dialog size=\"lg\">\n      <DialogHeader>{title}</DialogHeader>\n      <DialogBody>\n        <FileUploadProvider>\n          <ReplyEditor\n            minHeight=\"min-h-[300px]\"\n            isLoading={updateReply.isPending}\n            initialContent={reply.body}\n            editorRef={editorRef}\n            attachments={attachments}\n            onAttachmentsChange={attachments => setAttachments(attachments)}\n            onSubmit={() => handleSubmit()}\n          />\n        </FileUploadProvider>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          onClick={() => handleSubmit()}\n          disabled={updateReply.isPending}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\n\nexport interface OriginalReplyEmailResponse {\n  email: {\n    headers: Record<string, string>;\n    body: {\n      html: string;\n      plain: string;\n    };\n  };\n}\n\nexport function useOriginalReplyEmail(replyId: number | string) {\n  return useQuery({\n    queryKey: ['original-email', `${replyId}`],\n    queryFn: () => fetchEmail(replyId),\n    staleTime: Infinity,\n  });\n}\n\nfunction fetchEmail(replyId: string | number) {\n  return apiClient\n    .get<OriginalReplyEmailResponse>(`replies/${replyId}/original`)\n    .then(response => response.data);\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport React, {useState} from 'react';\nimport {\n  OriginalReplyEmailResponse,\n  useOriginalReplyEmail,\n} from '@app/agent/agent-ticket-page/reply-list/requests/use-original-reply-email';\nimport {FullPageLoader} from '@common/ui/progress/full-page-loader';\nimport {UseQueryResult} from '@tanstack/react-query';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {ErrorIcon} from '@common/icons/material/Error';\nimport {ButtonGroup} from '@common/ui/buttons/button-group';\nimport {Button} from '@common/ui/buttons/button';\nimport {useSettings} from '@common/core/settings/use-settings';\n\ntype ActiveTab = 'html' | 'plain' | 'headers';\n\ninterface Props {\n  replyId: number;\n}\nexport function OriginalEmailPreviewDialog({replyId}: Props) {\n  const {base_url} = useSettings();\n  const query = useOriginalReplyEmail(replyId);\n  const [activeTab, setActiveTab] = useState<ActiveTab>('html');\n\n  return (\n    <Dialog size=\"fullscreen\" className=\"h-dialog\">\n      <DialogHeader\n        showDivider\n        padding=\"px-24 py-12\"\n        titleFontWeight=\"font-normal\"\n        titleTextSize=\"text-base\"\n        justify=\"justify-start\"\n        actions={\n          <div>\n            <ButtonGroup\n              variant=\"outline\"\n              radius=\"rounded-md\"\n              size=\"xs\"\n              value={activeTab}\n              onChange={setActiveTab}\n            >\n              <Button value=\"html\">\n                <Trans message=\"HTML\" />\n              </Button>\n              <Button value=\"plain\">\n                <Trans message=\"Plain\" />\n              </Button>\n              <Button value=\"headers\">\n                <Trans message=\"Headers\" />\n              </Button>\n            </ButtonGroup>\n            <Button\n              className=\"ml-34\"\n              variant=\"outline\"\n              size=\"xs\"\n              elementType=\"a\"\n              download\n              href={`${base_url}/api/v1/replies/${replyId}/original/download`}\n            >\n              <Trans message=\"Download\" />\n            </Button>\n          </div>\n        }\n      >\n        <Trans message=\"Original email\" />\n      </DialogHeader>\n      <DialogBody>\n        {query.data?.email ? (\n          <Content data={query.data} activeTab={activeTab} />\n        ) : (\n          <Status query={query} />\n        )}\n      </DialogBody>\n    </Dialog>\n  );\n}\n\ninterface ContentProps {\n  data: OriginalReplyEmailResponse;\n  activeTab: ActiveTab;\n}\nfunction Content({data, activeTab}: ContentProps) {\n  if (activeTab === 'html') {\n    return <div dangerouslySetInnerHTML={{__html: data.email.body.html}} />;\n  } else if (activeTab === 'plain') {\n    return (\n      <pre className=\"whitespace-pre-wrap break-words\">\n        {data.email.body.plain}\n      </pre>\n    );\n  } else {\n    return (\n      <table>\n        <tbody>\n          {Object.entries(data.email.headers).map(([key, value]) => (\n            <tr key={key}>\n              <th className=\"whitespace-nowrap border px-20 py-10 text-left\">\n                {key}\n              </th>\n              <td className=\"whitespace-nowrap border px-20 py-10 text-left\">\n                {value}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    );\n  }\n}\n\ninterface StatusProps {\n  query: UseQueryResult;\n}\nexport function Status({query}: StatusProps) {\n  if (query.isLoading) {\n    return <FullPageLoader className=\"absolute inset-0 m-auto\" />;\n  }\n\n  return (\n    <IllustratedMessage\n      className=\"mt-40\"\n      image={\n        <div>\n          <ErrorIcon size=\"xl\" />\n        </div>\n      }\n      imageHeight=\"h-auto\"\n      title={<Trans message=\"Original email for this reply does not exist\" />}\n    />\n  );\n}\n","import {GetTicketResponse} from '@app/agent/agent-ticket-page/requests/use-ticket';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport React from 'react';\nimport {useTicketPageStore} from '@app/agent/agent-ticket-page/ticket-page-store';\nimport {useTicketReplies} from '@app/agent/agent-ticket-page/reply-list/requests/use-ticket-replies';\nimport {Reply} from '@app/agent/reply';\nimport {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {MoreVertIcon} from '@common/icons/material/MoreVert';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {Trans} from '@common/i18n/trans';\nimport {closeDialog, openDialog} from '@common/ui/overlays/store/dialog-store';\nimport {useDeleteReply} from '@app/agent/agent-ticket-page/reply-list/requests/use-delete-reply';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {TicketReplyLayout} from '@app/agent/ticket-layout/ticket-reply-layout';\nimport {ReplyAttachmentList} from '@app/agent/agent-ticket-page/reply-list/reply-attachment-list';\nimport {UpdateReplyDialog} from '@app/agent/agent-ticket-page/reply-list/update-reply-dialog';\nimport {OriginalEmailPreviewDialog} from '@app/agent/agent-ticket-page/reply-list/original-email-preview-dialog';\n\ninterface Props {\n  data: GetTicketResponse;\n}\nexport function AgentTicketPageReplyList({\n  data: {ticket, replies, draft},\n}: Props) {\n  const editorIsOpen = useTicketPageStore(s => s.editorIsOpen);\n  const showDraft = draft && !editorIsOpen;\n  const query = useTicketReplies(ticket.id, replies);\n\n  return (\n    <div>\n      {showDraft && (\n        <TicketReplyLayout\n          reply={draft}\n          className=\"pl-20 pr-8\"\n          actions={<ReplyActionsButton reply={draft} />}\n        />\n      )}\n      {query.items.map(reply => {\n        const isInitial =\n          !query.hasNextPage && reply.id === query.items.at(-1)?.id;\n        return (\n          <TicketReplyLayout\n            className=\"pl-20 pr-8\"\n            key={reply.id}\n            reply={reply}\n            isInitial={isInitial}\n            actions={<ReplyActionsButton reply={reply} />}\n            attachments={<ReplyAttachmentList reply={reply} />}\n          />\n        );\n      })}\n      <InfiniteScrollSentinel query={query} />\n    </div>\n  );\n}\n\ninterface ReplyActionsButtonProps {\n  reply: Reply;\n}\nfunction ReplyActionsButton({reply}: ReplyActionsButtonProps) {\n  return (\n    <MenuTrigger>\n      <IconButton className=\"text-muted\" size=\"sm\">\n        <MoreVertIcon />\n      </IconButton>\n      <Menu>\n        <Item\n          value=\"edit\"\n          onClick={() => openDialog(UpdateReplyDialog, {reply})}\n        >\n          <Trans message=\"Edit\" />\n        </Item>\n        {reply.type === 'replies' && (\n          <Item\n            value=\"showOriginal\"\n            onClick={() =>\n              openDialog(OriginalEmailPreviewDialog, {replyId: reply.id})\n            }\n          >\n            <Trans message=\"Show original\" />\n          </Item>\n        )}\n        <Item\n          value=\"delete\"\n          onClick={() => openDialog(ConfirmDeleteReplyDialog, {reply})}\n        >\n          <Trans message=\"Delete\" />\n        </Item>\n      </Menu>\n    </MenuTrigger>\n  );\n}\n\ninterface ConfirmDeleteReplyDialogProps {\n  reply: Reply;\n}\nfunction ConfirmDeleteReplyDialog({reply}: ConfirmDeleteReplyDialogProps) {\n  const deleteReply = useDeleteReply();\n  let title = <Trans message=\"Delete reply\" />;\n  let body = <Trans message=\"Are you sure you want to delete this reply?\" />;\n  if (reply.type === 'notes') {\n    title = <Trans message=\"Delete note\" />;\n    body = <Trans message=\"Are you sure you want to delete this note?\" />;\n  }\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={title}\n      body={body}\n      confirm={<Trans message=\"Delete\" />}\n      onConfirm={() =>\n        deleteReply.mutate(\n          {reply},\n          {\n            onSuccess: () => closeDialog(),\n          },\n        )\n      }\n      isLoading={deleteReply.isPending}\n    />\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {updateTicketQuery} from '@app/agent/agent-ticket-page/requests/use-ticket';\n\ninterface Payload {\n  tagId: number;\n  ticketIds: number[];\n}\n\nexport function useRemoveTagFromTickets() {\n  return useMutation({\n    mutationFn: (payload: Payload) => removeTag(payload),\n    onSuccess: (_, payload) => {\n      queryClient.invalidateQueries({queryKey: ['mailbox', 'sidenav-tags']});\n      payload.ticketIds.forEach(ticketId => {\n        updateTicketQuery(ticketId, old => {\n          old.ticket.tags = old.ticket.tags?.filter(\n            tag => tag.id !== payload.tagId,\n          );\n        });\n      });\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction removeTag(payload: Payload): Promise<BackendResponse> {\n  return apiClient.post(`tickets/tags/remove`, payload).then(r => r.data);\n}\n","import {GetTicketResponse} from '@app/agent/agent-ticket-page/requests/use-ticket';\nimport {useRemoveTagFromTickets} from '@app/agent/ticket-actions/requests/use-remove-tag-from-tickets';\nimport {Tag} from '@common/tags/tag';\nimport {useOpenReplyEditor} from '@app/agent/agent-ticket-page/agent-reply-editor/use-open-reply-editor';\nimport {useTicketPageStore} from '@app/agent/agent-ticket-page/ticket-page-store';\nimport {TicketHeaderLayout} from '@app/agent/ticket-layout/ticket-header-layout';\nimport {TicketTagList} from '@app/agent/ticket-layout/ticket-tag-list';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {ReplyIcon} from '@common/icons/material/Reply';\n\ninterface Props {\n  data: GetTicketResponse;\n}\nexport function TicketPageHeader({data: {ticket}}: Props) {\n  const removeTags = useRemoveTagFromTickets();\n  const editorIsOpen = useTicketPageStore(s => s.editorIsOpen);\n  const openEditor = useOpenReplyEditor();\n  const handleRemoveTag = (tag: Tag) => {\n    removeTags.mutate({\n      ticketIds: [ticket.id],\n      tagId: tag.id,\n    });\n  };\n\n  useKeybind('window', 'r', () => {\n    if (!editorIsOpen) {\n      openEditor();\n    }\n  });\n\n  return (\n    <TicketHeaderLayout\n      ticket={ticket}\n      actions={\n        ticket.status !== 'locked' && (\n          <Button\n            variant=\"outline\"\n            size=\"xs\"\n            onClick={() => openEditor()}\n            startIcon={<ReplyIcon />}\n            disabled={editorIsOpen}\n          >\n            <Trans message=\"Reply\" />\n          </Button>\n        )\n      }\n    >\n      <TicketTagList ticket={ticket} onRemoveTag={handleRemoveTag} />\n    </TicketHeaderLayout>\n  );\n}\n","import {IconButton} from '@common/ui/buttons/icon-button';\nimport clsx from 'clsx';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\nimport {ReactNode} from 'react';\nimport {useLocalStorage} from '@common/utils/hooks/local-storage';\n\ninterface Props {\n  label: ReactNode;\n  children: ReactNode;\n  name: string;\n  className?: string;\n}\nexport function UserDetailsSection({label, children, name, className}: Props) {\n  const [isVisible, setIsVisible] = useLocalStorage(name, true);\n  return (\n    <section className={clsx('border-b pb-14 text-sm', className)}>\n      <div className=\"flex items-center justify-between gap-14 px-14\">\n        <div className=\"font-semibold\">{label}</div>\n        <IconButton\n          onClick={() => setIsVisible(!isVisible)}\n          className={clsx('transition-transform', isVisible && 'rotate-180')}\n        >\n          <KeyboardArrowDownIcon />\n        </IconButton>\n      </div>\n      {isVisible && <div className=\"pt-8\">{children}</div>}\n    </section>\n  );\n}\n","import {PurchaseCode} from '@app/agent/purchase-code';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {LinkStyle} from '@common/ui/buttons/external-link';\nimport {Trans} from '@common/i18n/trans';\nimport {ReactNode} from 'react';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Button} from '@common/ui/buttons/button';\nimport {useSyncEnvatoPurchases} from '@app/agent/agent-ticket-page/user-details-sidebar/requests/use-sync-envato-purchases';\n\ninterface Props {\n  purchaseCode: PurchaseCode;\n}\nexport function PurchaseCodeDetailsDialog({purchaseCode}: Props) {\n  const {close} = useDialogContext();\n  const syncPurchases = useSyncEnvatoPurchases();\n  return (\n    <Dialog size=\"md\">\n      <DialogBody>\n        <div className=\"flex items-start gap-14 text-sm\">\n          <img\n            src={purchaseCode.image}\n            alt=\"\"\n            className=\"h-80 w-80 flex-shrink-0 rounded\"\n          />\n          <div className=\"flex-auto\">\n            <a\n              href={purchaseCode.url}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className={LinkStyle}\n            >\n              {purchaseCode.item_name}\n            </a>\n            <div className=\"mt-4 text-sm text-muted\">{purchaseCode.code}</div>\n            <div className=\"mt-12\">\n              <Detail\n                label={<Trans message=\"Customer\" />}\n                value={purchaseCode.envato_username}\n              />\n              <Detail\n                label={<Trans message=\"Purchased\" />}\n                value={<FormattedDate date={purchaseCode.purchased_at} />}\n              />\n              <Detail\n                label={<Trans message=\"Supported until\" />}\n                value={<FormattedDate date={purchaseCode.supported_until} />}\n              />\n              <Detail\n                label={<Trans message=\"Last synced\" />}\n                value={<FormattedDate date={purchaseCode.updated_at} />}\n              />\n            </div>\n          </div>\n        </div>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          disabled={syncPurchases.isPending}\n          onClick={() => syncPurchases.mutate({userId: purchaseCode.user_id})}\n        >\n          <Trans message=\"Sync purchases\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\ninterface DetailProps {\n  label: ReactNode;\n  value: ReactNode;\n}\nfunction Detail({label, value}: DetailProps) {\n  return (\n    <div className=\"mb-6 flex items-center gap-14\">\n      <div>{label}:</div>\n      <div className=\"text-muted\">{value}</div>\n    </div>\n  );\n}\n","import {PurchaseCode} from '@app/agent/purchase-code';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport clsx from 'clsx';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {PurchaseCodeDetailsDialog} from '@app/agent/agent-ticket-page/envato-purchase-list/purchase-code-details-dialog';\nimport React from 'react';\n\ninterface Props {\n  purchases: PurchaseCode[];\n  activePurchase?: PurchaseCode;\n  itemClassName?: string;\n}\nexport function EnvatoPurchaseList({\n  purchases,\n  itemClassName,\n  activePurchase,\n}: Props) {\n  return (\n    <div>\n      {purchases.map(purchase => (\n        <DialogTrigger type=\"modal\" key={purchase.id}>\n          <div\n            className={clsx(\n              'flex cursor-pointer items-center gap-8 rounded py-8 hover:bg-hover',\n              itemClassName,\n              activePurchase?.code === purchase.code && 'bg-primary-light/30',\n            )}\n          >\n            <img src={purchase.image} alt=\"\" className=\"h-30 w-30 rounded\" />\n            <div className=\"min-w-0 text-xs\">\n              <div className=\"overflow-hidden overflow-ellipsis whitespace-nowrap\">\n                {purchase.item_name}\n              </div>\n              <div\n                className={clsx(\n                  'text-muted',\n                  purchase.support_expired && 'line-through',\n                )}\n              >\n                {purchase.supported_until ? (\n                  <FormattedDate date={purchase.supported_until} />\n                ) : purchase.support_expired ? (\n                  <Trans message=\"Support expired\" />\n                ) : (\n                  '-'\n                )}\n              </div>\n            </div>\n          </div>\n          <PurchaseCodeDetailsDialog purchaseCode={purchase} />\n        </DialogTrigger>\n      ))}\n    </div>\n  );\n}\n","import {useMemo} from 'react';\nimport {PurchaseCode} from '@app/agent/purchase-code';\nimport {Trans} from '@common/i18n/trans';\nimport {PersonIcon} from '@common/icons/material/Person';\nimport {User} from '@common/auth/user';\nimport {Ticket} from '@app/agent/ticket';\nimport {UserDetailsSection} from '@app/agent/agent-ticket-page/user-details-sidebar/user-details-section';\nimport {EnvatoPurchaseList} from '@app/agent/agent-ticket-page/envato-purchase-list/envato-purchase-list';\n\ninterface Props {\n  user: User;\n  ticket: Ticket;\n}\nexport function TicketPagePurchaseList({user, ticket}: Props) {\n  const currentPurchase = useMemo(() => {\n    const category = ticket.tags?.find(tag => tag.type !== 'status')\n      ?.categories[0];\n    let bestMatch: PurchaseCode | undefined;\n    if (category) {\n      const categoryName = category.name.toLowerCase();\n      bestMatch = user.purchase_codes?.find(code => {\n        return code.item_name.toLowerCase().indexOf(categoryName) > -1;\n      });\n    }\n    return bestMatch || user.purchase_codes?.[0];\n  }, [user, ticket]);\n\n  return (\n    <UserDetailsSection\n      label={<Trans message=\"Envato\" />}\n      name=\"purchase-list-visible\"\n    >\n      <div className=\"overflow-hidden\">\n        {currentPurchase && (\n          <div className=\"mb-8 flex items-center gap-4 px-14 text-sm\">\n            <PersonIcon size=\"sm\" />\n            <a\n              href={`https://codecanyon.net/user/${currentPurchase.envato_username}`}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              {currentPurchase.envato_username}\n            </a>\n          </div>\n        )}\n        <EnvatoPurchaseList\n          purchases={user.purchase_codes || []}\n          itemClassName=\"px-14\"\n          activePurchase={currentPurchase}\n        />\n      </div>\n    </UserDetailsSection>\n  );\n}\n","import {ActivityLogItem} from '@app/agent/agent-ticket-page/user-details-sidebar/activity-log/activity-log-item';\nimport {useInfiniteData} from '@common/ui/infinite-scroll/use-infinite-data';\n\ninterface Params {\n  userId: number | string;\n}\n\nexport function useActivityLog(params: Params) {\n  return useInfiniteData<ActivityLogItem>({\n    queryKey: ['activity-log'],\n    endpoint: 'activity-log',\n    paginate: 'simple',\n    queryParams: params as any,\n  });\n}\n","import {Category, Section} from '@app/help-center/categories/category';\nimport {Tag} from '@common/tags/tag';\nimport {User} from '@common/auth/user';\n\nexport const ARTICLE_MODEL = 'article';\n\nexport interface Article {\n  id: number;\n  title: string;\n  body: string;\n  slug?: string;\n  draft: boolean;\n  visibility: 'public' | 'private';\n  views: number;\n  position: number;\n  description?: string;\n  created_at?: string;\n  updated_at?: string;\n  categories?: Category[];\n  tags?: Tag[];\n  attachments?: ArticleAttachment[];\n  feedback?: ArticleFeedback[];\n  author?: User;\n  author_id?: number;\n  path?: [Category, Section];\n  score?: number;\n  positive_votes?: number;\n  negative_votes?: number;\n  model_type: typeof ARTICLE_MODEL;\n  visible_to_role?: number;\n  managed_by_role?: number;\n  sections?: Section[];\n}\n\nexport interface ArticleAttachment {\n  id: number;\n  name: string;\n  file_size: number;\n  mime: string;\n  hash: string;\n}\n\nexport interface ArticleFeedback {\n  id: number;\n  was_helpful: boolean;\n  comment?: string;\n  article_id: number;\n  user_id?: number;\n  ip?: string;\n  created_at?: string;\n  updated_at?: string;\n  article?: Article;\n}\n","export const SEARCH_TERM_MODEL = 'search_term';\n\nexport interface SearchTerm {\n  id: number;\n  term: string;\n  user_id: number;\n  count: number;\n  term_count?: number;\n  created_at?: string;\n  updated_at?: string;\n  model_type: typeof SEARCH_TERM_MODEL;\n}\n","import {Children, cloneElement, ReactElement, ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface TimelineProps {\n  children: ReactElement<TimelineProps>[];\n  className?: string;\n}\nexport function Timeline({children, className}: TimelineProps) {\n  const items = Children.toArray(children);\n  return (\n    <div className={className}>\n      {items.map((item, index) =>\n        cloneElement(item as any, {\n          isLast: index === items.length - 1,\n        })\n      )}\n    </div>\n  );\n}\n\ninterface TimelineItemProps {\n  children: ReactNode;\n  className?: string;\n  isLast?: boolean;\n}\nexport function TimelineItem({children, className, isLast}: TimelineItemProps) {\n  return (\n    <div className={clsx('flex gap-12', className)}>\n      <div>\n        <div className=\"mt-4 h-12 w-12 flex-shrink-0 rounded-full border-[3px]\" />\n        {!isLast && (\n          <div className=\"mx-auto mt-4 h-[calc(100%-12px)] w-1 bg-chip\"></div>\n        )}\n      </div>\n      <div className=\"flex-auto\">{children}</div>\n    </div>\n  );\n}\n","import {useActivityLog} from '@app/agent/agent-ticket-page/user-details-sidebar/activity-log/use-activity-log';\nimport {Ticket, TICKET_MODEL_TYPE} from '@app/agent/ticket';\nimport {UserDetailsSection} from '@app/agent/agent-ticket-page/user-details-sidebar/user-details-section';\nimport {Trans} from '@common/i18n/trans';\nimport {\n  ActivityLogItem,\n  TicketActivityLogItem,\n} from '@app/agent/agent-ticket-page/user-details-sidebar/activity-log/activity-log-item';\nimport {Article, ARTICLE_MODEL} from '@app/help-center/articles/article';\nimport {ArticleLink} from '@app/help-center/articles/article-link';\nimport clsx from 'clsx';\nimport {FormattedRelativeTime} from '@common/i18n/formatted-relative-time';\nimport {FormattedDate} from '@common/i18n/formatted-date';\nimport {TicketPageLink} from '@app/agent/agent-ticket-page/ticket-page-link';\nimport {\n  SEARCH_TERM_MODEL,\n  SearchTerm,\n} from '@app/agent/agent-search-page/search-term';\nimport {Link} from 'react-router-dom';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {Timeline, TimelineItem} from '@common/ui/timeline';\nimport {Fragment} from 'react';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\n\nconst timePreset: Intl.DateTimeFormatOptions = {\n  hour: 'numeric',\n  minute: 'numeric',\n};\n\ninterface Props {\n  ticket: Ticket;\n}\nexport function ActivityList({ticket}: Props) {\n  const userId = ticket.user!.id;\n  const query = useActivityLog({userId});\n\n  const skeletons = (\n    <m.div key=\"skeletons\" className=\"px-14 py-6\" {...opacityAnimation}>\n      {Array.from({length: 5}).map((_, index) => (\n        <Skeleton className=\"min-h-48\" key={index} />\n      ))}\n    </m.div>\n  );\n\n  const timeline = (\n    <Fragment>\n      <m.div key=\"timeline\" {...opacityAnimation}>\n        <Timeline>\n          {query.items.map(activity => (\n            <TimelineItem\n              key={activity.id}\n              className={clsx(\n                'px-14 py-6',\n                activity.event === 'created' &&\n                  activity.subject?.id === ticket.id &&\n                  'bg-primary/8',\n              )}\n            >\n              <ListItem activity={activity} />\n              <div className=\"flex items-center gap-4 text-xs text-muted\">\n                <FormattedRelativeTime date={activity.created_at} />\n                <div>&bull;</div>\n                <FormattedDate\n                  date={activity.created_at}\n                  options={timePreset}\n                />\n              </div>\n            </TimelineItem>\n          ))}\n        </Timeline>\n      </m.div>\n      <InfiniteScrollSentinel query={query} size=\"sm\" />\n    </Fragment>\n  );\n\n  return (\n    <UserDetailsSection\n      label={<Trans message=\"Activity\" />}\n      name=\"activity-visible\"\n      className=\"mt-10\"\n    >\n      <AnimatePresence initial={false} mode=\"wait\">\n        {query.isLoading ? skeletons : timeline}\n      </AnimatePresence>\n    </UserDetailsSection>\n  );\n}\n\ninterface ListItemProps {\n  activity: ActivityLogItem;\n}\nfunction ListItem({activity}: ListItemProps) {\n  switch (activity.subject?.model_type) {\n    case ARTICLE_MODEL:\n      return (\n        <Trans\n          message=\"Viewd article: :link\"\n          values={{\n            link: (\n              <ArticleLink\n                target=\"_blank\"\n                className=\"font-semibold\"\n                article={activity.subject as Article}\n              />\n            ),\n          }}\n        />\n      );\n    case TICKET_MODEL_TYPE:\n      return <TicketListItem activity={activity as TicketActivityLogItem} />;\n    case SEARCH_TERM_MODEL:\n      const term = (activity.subject as SearchTerm).term;\n      return (\n        <Trans\n          message=\"Search for: :link\"\n          values={{\n            link: (\n              <Link\n                target=\"_blank\"\n                className=\"font-semibold\"\n                to={`/hc/search?query=${term}`}\n              >\n                {term}\n              </Link>\n            ),\n          }}\n        />\n      );\n    default:\n      return null;\n  }\n}\n\ninterface TicketListItemProps {\n  activity: TicketActivityLogItem;\n}\nfunction TicketListItem({activity}: TicketListItemProps) {\n  const link = (\n    <TicketPageLink\n      target=\"_blank\"\n      className=\"font-semibold\"\n      ticket={activity.subject as Ticket}\n    />\n  );\n  if (activity.event === 'replied') {\n    if (activity.properties?.source === 'email') {\n      return <Trans message=\"Replied via email: :link\" values={{link}} />;\n    } else {\n      return <Trans message=\"Replied via website: :link\" values={{link}} />;\n    }\n  } else if (activity.event === 'created') {\n    return <Trans message=\"Created ticket: :link\" values={{link}} />;\n  } else if (activity.event === 'articlesSuggested') {\n    return (\n      <Trans\n        message={`Suggested :count articles for \":query\"`}\n        values={{\n          count: activity.properties?.articleIds?.length || 1,\n          query: activity.properties?.query,\n        }}\n      />\n    );\n  }\n  return null;\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {useParams} from 'react-router-dom';\nimport {Ticket} from '@app/agent/ticket';\n\ninterface Response extends BackendResponse {\n  ticket: Ticket;\n}\n\ninterface Payload {\n  mergeeId: number;\n}\n\nexport function useMergeTickets() {\n  const {ticketId} = useParams();\n  return useMutation({\n    mutationFn: (payload: Payload) =>\n      mergeTickets({\n        ...payload,\n        ticketId: ticketId!,\n      }),\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({queryKey: ['tickets']});\n      toast(message('Merged tickets'));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction mergeTickets(\n  payload: Payload & {ticketId: number | string},\n): Promise<Response> {\n  return apiClient.post(`tickets/merge`, payload).then(r => r.data);\n}\n","import {\n  GetTicketResponse,\n  useTicket,\n} from '@app/agent/agent-ticket-page/requests/use-ticket';\nimport React, {Fragment} from 'react';\nimport {PageStatus} from '@common/http/page-status';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {TicketHeaderLayout} from '@app/agent/ticket-layout/ticket-header-layout';\nimport {TicketTagList} from '@app/agent/ticket-layout/ticket-tag-list';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {TicketReplyLayout} from '@app/agent/ticket-layout/ticket-reply-layout';\nimport {InfiniteScrollSentinel} from '@common/ui/infinite-scroll/infinite-scroll-sentinel';\nimport {useTicketReplies} from '@app/agent/agent-ticket-page/reply-list/requests/use-ticket-replies';\nimport {FileEntry} from '@common/uploads/file-entry';\nimport {\n  AttachmentListLayout,\n  FileEntryAttachmentLayout,\n} from '@app/agent/ticket-layout/attachment-list-layout';\nimport {Button} from '@common/ui/buttons/button';\nimport {Link} from 'react-router-dom';\nimport {getTicketPageLink} from '@app/agent/agent-ticket-page/ticket-page-link';\nimport {Ticket} from '@app/agent/ticket';\nimport {useMergeTickets} from '@app/agent/agent-ticket-page/user-details-sidebar/requests/use-merge-tickets';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\n\ninterface Props {\n  ticketId: number;\n}\nexport function TicketPreviewDialog({ticketId}: Props) {\n  const query = useTicket(ticketId);\n  return (\n    <Dialog size=\"fullscreen\" className=\"h-dialog\">\n      <DialogHeader\n        showDivider\n        padding=\"px-24 py-12\"\n        titleFontWeight=\"font-normal\"\n        titleTextSize=\"text-base\"\n        justify=\"justify-start\"\n        actions={\n          query.data?.ticket ? <Actions ticket={query.data?.ticket} /> : null\n        }\n      >\n        <Trans message=\"Ticket preview\" />\n      </DialogHeader>\n      <DialogBody className=\"bg\" padding=\"p-0\">\n        {query.data ? (\n          <Content data={query.data} />\n        ) : (\n          <PageStatus query={query} loaderClassName=\"absolute inset-0 m-auto\" />\n        )}\n      </DialogBody>\n    </Dialog>\n  );\n}\n\ninterface ActionsProps {\n  ticket: Ticket;\n}\nfunction Actions({ticket}: ActionsProps) {\n  const {close} = useDialogContext();\n\n  return (\n    <Fragment>\n      <Button\n        elementType={Link}\n        to={getTicketPageLink(ticket)}\n        variant=\"outline\"\n        size=\"xs\"\n      >\n        <Trans message=\"Open ticket\" />\n      </Button>\n      <DialogTrigger\n        type=\"modal\"\n        onClose={newTicket => {\n          if (newTicket) {\n            close();\n          }\n        }}\n      >\n        <Button variant=\"outline\" size=\"xs\" className=\"mr-48\">\n          <Trans message=\"Merge\" />\n        </Button>\n        <ConfirmMergeDialog ticket={ticket} />\n      </DialogTrigger>\n    </Fragment>\n  );\n}\n\ninterface ConfirmMergeDialogProps {\n  ticket: Ticket;\n}\nfunction ConfirmMergeDialog({ticket}: ConfirmMergeDialogProps) {\n  const mergeTickets = useMergeTickets();\n  const {close} = useDialogContext();\n  return (\n    <ConfirmationDialog\n      title={<Trans message=\"Merge tickets\" />}\n      isLoading={mergeTickets.isPending}\n      onConfirm={() => {\n        mergeTickets.mutate(\n          {mergeeId: ticket.id},\n          {onSuccess: response => close(response.ticket)},\n        );\n      }}\n      body={\n        <div>\n          <Trans message=\"Please confirm you'd like to merge this ticket with the original one behind the popup.\" />\n          <p className=\"mt-12 font-semibold\">\n            <Trans message=\"Merged tickets cannot be unmerged.\" />\n          </p>\n        </div>\n      }\n      confirm={<Trans message=\"Merge\" />}\n    />\n  );\n}\n\ninterface ContentProps {\n  data: GetTicketResponse;\n}\nfunction Content({data}: ContentProps) {\n  return (\n    <div>\n      <TicketHeaderLayout ticket={data.ticket}>\n        <TicketTagList ticket={data.ticket} />\n      </TicketHeaderLayout>\n      <ReplyList data={data} />\n    </div>\n  );\n}\n\ninterface ReplyListProps {\n  data: GetTicketResponse;\n}\nfunction ReplyList({data: {ticket, replies}}: ReplyListProps) {\n  const query = useTicketReplies(ticket.id, replies);\n  return (\n    <Fragment>\n      {query.items.map(reply => {\n        const isInitial =\n          !query.hasNextPage && reply.id === query.items.at(-1)?.id;\n        return (\n          <TicketReplyLayout\n            key={reply.id}\n            reply={reply}\n            isInitial={isInitial}\n            className=\"px-20\"\n            attachments={\n              reply.attachments?.length ? (\n                <AttachmentList attachments={reply.attachments} />\n              ) : null\n            }\n          />\n        );\n      })}\n      <InfiniteScrollSentinel query={query} />\n    </Fragment>\n  );\n}\n\ninterface AttachmentListProps {\n  attachments: FileEntry[];\n}\nfunction AttachmentList({attachments}: AttachmentListProps) {\n  return (\n    <AttachmentListLayout className=\"mt-30 w-max\">\n      {attachments.map((attachment, index) => (\n        <FileEntryAttachmentLayout\n          key={attachment.id}\n          attachments={attachments}\n          index={index}\n        />\n      ))}\n    </AttachmentListLayout>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {UseFormReturn} from 'react-hook-form';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {Ticket} from '@app/agent/ticket';\n\ninterface Response extends BackendResponse {\n  ticket: Ticket;\n}\n\nexport interface UpdateTicketPayload {\n  user_id?: number;\n  subject?: string;\n  status?: string;\n  category_id?: number;\n}\n\nexport function useUpdateTicket(\n  ticketId: number | string,\n  form?: UseFormReturn<UpdateTicketPayload>,\n) {\n  return useMutation({\n    mutationFn: (payload: UpdateTicketPayload) =>\n      updateTicket(ticketId, payload),\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({queryKey: ['tickets']});\n    },\n    onError: err =>\n      form ? onFormQueryError(err, form) : showHttpErrorToast(err),\n  });\n}\n\nfunction updateTicket(\n  ticketId: number | string,\n  payload: UpdateTicketPayload,\n): Promise<Response> {\n  return apiClient.put(`tickets/${ticketId}`, payload).then(r => r.data);\n}\n","import {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {Trans} from '@common/i18n/trans';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {Form} from '@common/ui/forms/form';\nimport {useForm} from 'react-hook-form';\nimport {\n  UpdateTicketPayload,\n  useUpdateTicket,\n} from '@app/agent/agent-ticket-page/user-details-sidebar/requests/use-update-ticket';\nimport {FormNormalizedModelField} from '@common/ui/forms/normalized-model-field';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\n\ninterface Props {\n  ticketId: string | number;\n}\nexport function ChangeCustomerDialog({ticketId}: Props) {\n  const {close, formId} = useDialogContext();\n  const form = useForm<UpdateTicketPayload>();\n  const updateTicket = useUpdateTicket(ticketId, form);\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans message=\"Change customer\" />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values => {\n            updateTicket.mutate(values, {onSuccess: () => close()});\n          }}\n        >\n          <FormNormalizedModelField\n            required\n            name=\"user_id\"\n            endpoint=\"normalized-models/user\"\n            label={<Trans message=\"New customer\" />}\n          />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          type=\"submit\"\n          form={formId}\n          variant=\"flat\"\n          color=\"primary\"\n          disabled={updateTicket.isPending}\n        >\n          <Trans message=\"Change\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import clsx from 'clsx';\nimport {Link} from 'react-router-dom';\nimport {getCustomerLink} from '@app/agent/customer-page/customer-link';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {SettingsIcon} from '@common/icons/material/Settings';\nimport {EmailIcon} from '@common/icons/material/Email';\nimport {useTicket} from '@app/agent/agent-ticket-page/requests/use-ticket';\nimport {TicketPagePurchaseList} from '@app/agent/agent-ticket-page/user-details-sidebar/ticket-page-purchase-list';\nimport {useTickets} from '@app/agent/agent-ticket-page/user-details-sidebar/requests/use-tickets';\nimport {Fragment} from 'react';\nimport {Ticket} from '@app/agent/ticket';\nimport {UserDetailsSection} from '@app/agent/agent-ticket-page/user-details-sidebar/user-details-section';\nimport {Trans} from '@common/i18n/trans';\nimport {ActivityList} from '@app/agent/agent-ticket-page/user-details-sidebar/activity-list';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '@common/ui/animation/opacity-animation';\nimport {UserAvatar} from '@common/ui/images/user-avatar';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport {TicketPreviewDialog} from '@app/agent/agent-ticket-page/ticket-preview-dialog';\nimport {ChipList} from '@common/ui/forms/input-field/chip-field/chip-list';\nimport {Chip} from '@common/ui/forms/input-field/chip-field/chip';\nimport {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {openDialog} from '@common/ui/overlays/store/dialog-store';\nimport {ChangeCustomerDialog} from '@app/agent/agent-ticket-page/user-details-sidebar/change-customer-dialog';\n\ninterface Props {\n  className?: string;\n}\nexport function UserDetailsSidebar({className}: Props) {\n  const {tickets} = useSettings();\n  const {data} = useTicket();\n  return (\n    <div\n      className={clsx(\n        className,\n        'compact-scrollbar stable-scrollbar overflow-y-auto border-l',\n      )}\n    >\n      {data?.ticket.user && (\n        <Fragment>\n          <CustomerDetails ticket={data.ticket} />\n          <OtherTickets ticket={data.ticket} />\n          {tickets?.log_activity && <ActivityList ticket={data.ticket} />}\n        </Fragment>\n      )}\n    </div>\n  );\n}\n\ninterface CustomerDetailsProps {\n  ticket: Ticket;\n}\nfunction CustomerDetails({ticket}: CustomerDetailsProps) {\n  const user = ticket.user!;\n  const {envato} = useSettings();\n  const editLink = getCustomerLink(user.id);\n  return (\n    <div className=\"py-14\">\n      <Link to={editLink} target=\"_blank\">\n        <UserAvatar user={user} size=\"xl\" circle className=\"mx-auto\" />\n      </Link>\n      <section className=\"mb-14 border-b px-14 pb-14 text-muted\">\n        <div className=\"mt-10 flex items-center justify-between gap-14 text-muted\">\n          <div>{user.display_name}</div>\n          <MenuTrigger>\n            <IconButton size=\"sm\">\n              <SettingsIcon />\n            </IconButton>\n            <Menu>\n              <Item\n                value=\"edit\"\n                elementType={Link}\n                to={editLink}\n                target=\"_blank\"\n              >\n                <Trans message=\"Edit\" />\n              </Item>\n              <Item\n                value=\"changeCustomer\"\n                onSelected={() =>\n                  openDialog(ChangeCustomerDialog, {ticketId: ticket.id})\n                }\n              >\n                <Trans message=\"Change customer\" />\n              </Item>\n            </Menu>\n          </MenuTrigger>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          <EmailIcon size=\"xs\" />\n          <div className=\"text-sm\">{user.email}</div>\n        </div>\n        {!!user.tags?.length && (\n          <ChipList size=\"xs\" className=\"mt-14\">\n            {user.tags?.map(tag => (\n              <Chip key={tag.id}>{tag.display_name}</Chip>\n            ))}\n          </ChipList>\n        )}\n      </section>\n      {envato.enable && <TicketPagePurchaseList user={user} ticket={ticket} />}\n    </div>\n  );\n}\n\ninterface OtherTicketsProps {\n  ticket: Ticket;\n}\nfunction OtherTickets({ticket}: OtherTicketsProps) {\n  const user = ticket.user!;\n  const {data, isLoading} = useTickets({\n    userId: user.id,\n    perPage: 6,\n    paginate: 'simple',\n  });\n\n  const skeletons = (\n    <m.div key=\"skeletons\" {...opacityAnimation}>\n      {Array.from({length: 5}).map((_, index) => (\n        <Skeleton className=\"min-h-24\" key={index} />\n      ))}\n    </m.div>\n  );\n  const tickets = (\n    <m.div key=\"tickets\" {...opacityAnimation}>\n      {data?.pagination.data\n        .filter(t => t.id !== ticket.id)\n        .map(ticket => (\n          <DialogTrigger type=\"modal\" key={ticket.id}>\n            <ButtonBase\n              display=\"block\"\n              className={clsx(\n                'block min-w-0 max-w-full overflow-hidden text-ellipsis pb-4 text-sm hover:underline',\n                ticket.closed_at && 'text-muted',\n              )}\n            >\n              {ticket.subject}\n            </ButtonBase>\n            <TicketPreviewDialog ticketId={ticket.id} />\n          </DialogTrigger>\n        ))}\n    </m.div>\n  );\n\n  return (\n    <UserDetailsSection\n      label={<Trans message=\"Other tickets\" />}\n      name=\"other-tickets\"\n    >\n      <AnimatePresence initial={false} mode=\"wait\">\n        <div className=\"space-y-10 px-14\">\n          {isLoading ? skeletons : tickets}\n        </div>\n      </AnimatePresence>\n    </UserDetailsSection>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {Reply} from '@app/agent/reply';\nimport {\n  ActiveDraft,\n  useTicketPageStore,\n} from '@app/agent/agent-ticket-page/ticket-page-store';\nimport {useParams} from 'react-router-dom';\n\ninterface Response {\n  reply: Reply;\n}\n\ninterface Params {\n  draft: ActiveDraft;\n  type: 'background' | 'manual';\n  ticketId?: number | string;\n}\n\nexport function useSaveDraft() {\n  const urlParams = useParams();\n  const {updateActiveDraft, setEditorIsOpen} = useTicketPageStore();\n  return useMutation({\n    mutationFn: (params: Params) => {\n      updateActiveDraft({isSaving: true});\n      const ticketId = params.ticketId || urlParams.ticketId;\n      return saveDraft(params.draft, ticketId!);\n    },\n    onSuccess: async (response, params) => {\n      if (params.type !== 'background') {\n        const ticketId = params.ticketId || urlParams.ticketId;\n        await queryClient.invalidateQueries({\n          queryKey: ['tickets', `${ticketId}`],\n        });\n        setEditorIsOpen(false);\n      }\n      updateActiveDraft({\n        isDirty: false,\n        id: response.reply.id,\n      });\n    },\n    onError: err => showHttpErrorToast(err),\n    onSettled: () => {\n      updateActiveDraft({isSaving: false});\n    },\n  });\n}\n\nfunction saveDraft(\n  activeDraft: ActiveDraft,\n  ticketId: string | number,\n): Promise<Response> {\n  const payload = {\n    body: activeDraft.body,\n    attachments: activeDraft.attachments.map(u => u.id),\n  };\n  const request = activeDraft.id\n    ? apiClient.put(`replies/${activeDraft.id}`, payload)\n    : apiClient.post(`tickets/${ticketId}/drafts`, payload);\n  return request.then(r => r.data);\n}\n","import {useCallback} from 'react';\nimport {useSaveDraft} from '@app/agent/agent-ticket-page/requests/use-save-draft';\nimport {ticketPageStore} from '@app/agent/agent-ticket-page/ticket-page-store';\n\nexport function useBackgroundDraftSave() {\n  const saveDraft = useSaveDraft();\n  return useCallback(\n    (\n      type: 'background' | 'manual' = 'background',\n      ticketId?: number | string\n    ) => {\n      if (\n        ticketPageStore().activeDraft.isDirty &&\n        !ticketPageStore().activeDraft.isSaving &&\n        !ticketPageStore().ticketIsSaving\n      ) {\n        saveDraft.mutate({\n          ticketId,\n          draft: ticketPageStore().activeDraft,\n          type,\n        });\n      }\n    },\n    [saveDraft]\n  );\n}\n","import {Query, useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {Reply} from '@app/agent/reply';\nimport {useAfterReplyAction} from '@app/agent/agent-ticket-page/use-after-reply-action';\nimport {useDeleteDraft} from '@app/agent/agent-ticket-page/reply-list/requests/use-delete-draft';\nimport {\n  ticketPageStore,\n  useTicketPageStore,\n} from '@app/agent/agent-ticket-page/ticket-page-store';\nimport {useParams} from 'react-router-dom';\n\ninterface SubmitReplyResponse {\n  reply: Reply;\n}\n\ninterface Payload {\n  type: 'drafts' | 'replies' | 'notes';\n  body: string | null;\n  status?: string;\n  attachments?: number[];\n}\n\nexport function useSubmitAgentReply() {\n  const {ticketId} = useParams();\n  const {perform, action} = useAfterReplyAction();\n  const deleteDraft = useDeleteDraft({clearTicketCache: false});\n  const {setTicketIsSaving} = useTicketPageStore();\n  return useMutation({\n    mutationFn: (payload: Payload) => {\n      setTicketIsSaving(true);\n      return submitReply({\n        ticketId: ticketId!,\n        ...payload,\n      });\n    },\n    onSuccess: async () => {\n      // no need to wait for these to finish\n      queryClient.invalidateQueries({queryKey: ['mailbox', 'sidenav-tags']});\n      if (ticketPageStore().activeDraft.id) {\n        deleteDraft.mutate({id: ticketPageStore().activeDraft.id!});\n      }\n      ticketPageStore().discardActiveDraft();\n\n      await Promise.allSettled([\n        queryClient.invalidateQueries({\n          queryKey: ['tickets'],\n          predicate: q => {\n            // don't invalidate currently active ticket to avoid flickering\n            return (\n              action === 'stay_on_page' || !shouldIgnoreQuery(q, ticketId!)\n            );\n          },\n        }),\n        perform(),\n      ]);\n      toast(message('Reply submitted'));\n    },\n    onError: err => showHttpErrorToast(err),\n    onSettled: () => setTicketIsSaving(false),\n  });\n}\n\nfunction submitReply(payload: Payload & {ticketId: number | string}) {\n  return apiClient\n    .post<SubmitReplyResponse>(\n      `tickets/${payload.ticketId}/${payload.type}`,\n      payload,\n    )\n    .then(r => r.data);\n}\n\nfunction shouldIgnoreQuery(q: Query, ticketId: number | string) {\n  const isActiveTicket =\n    q.queryKey[0] === 'tickets' && q.queryKey[1] === `${ticketId}`;\n  const isOtherUserTickets =\n    q.queryKey[0] === 'tickets' &&\n    typeof q.queryKey[1] === 'object' &&\n    q.queryKey[1] &&\n    'userId' in q.queryKey[1];\n  return isActiveTicket || isOtherUserTickets;\n}\n","import React, {Fragment, useCallback} from 'react';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CheckCircleIcon} from '@common/icons/material/CheckCircle';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {Trans} from '@common/i18n/trans';\nimport {DeleteIcon} from '@common/icons/material/Delete';\nimport {useSaveDraft} from '@app/agent/agent-ticket-page/requests/use-save-draft';\nimport {useDeleteDraft} from '@app/agent/agent-ticket-page/reply-list/requests/use-delete-draft';\nimport {\n  ticketPageStore,\n  useTicketPageStore,\n} from '@app/agent/agent-ticket-page/ticket-page-store';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\nimport {MenubarButtonProps} from '@common/text-editor/menubar/menubar-button-props';\n\ninterface Props {\n  size?: MenubarButtonProps['size'];\n}\nexport function AgentReplyEditorDraftButtons({size = 'sm'}: Props) {\n  const isDirty = useTicketPageStore(s => s.activeDraft.isDirty);\n  const isSaving = useTicketPageStore(s => s.activeDraft.isSaving);\n  const isEmpty = useTicketPageStore(\n    s => !s.activeDraft.body && !s.activeDraft.attachments?.length,\n  );\n  const saveDraft = useSaveDraft();\n  const deleteDraft = useDeleteDraft();\n\n  const handleDraftSave = () => {\n    saveDraft.mutate({\n      draft: ticketPageStore().activeDraft,\n      type: 'manual',\n    });\n  };\n\n  const handleDraftDelete = useCallback(() => {\n    if (ticketPageStore().activeDraft.id) {\n      deleteDraft.mutate(\n        {id: ticketPageStore().activeDraft.id!},\n        {onSuccess: () => ticketPageStore().setEditorIsOpen(false)},\n      );\n    } else {\n      ticketPageStore().setEditorIsOpen(false);\n    }\n  }, [deleteDraft]);\n\n  useKeybind('window', 'Escape', () => {\n    if (ticketPageStore().editorIsOpen) {\n      handleDraftDelete();\n    }\n  });\n\n  return (\n    <Fragment>\n      <Tooltip label={<Trans message=\"Save draft\" />}>\n        <IconButton\n          className=\"ml-auto\"\n          size={size}\n          color={!isDirty ? 'positive' : null}\n          onClick={handleDraftSave}\n          disabled={isSaving || isEmpty}\n        >\n          <CheckCircleIcon />\n        </IconButton>\n      </Tooltip>\n      <Tooltip label={<Trans message=\"Discard (Esc)\" />}>\n        <IconButton size={size} disabled={isSaving} onClick={handleDraftDelete}>\n          <DeleteIcon />\n        </IconButton>\n      </Tooltip>\n    </Fragment>\n  );\n}\n","import {keepPreviousData, useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {PaginatedBackendResponse} from '@common/http/backend-response/pagination-response';\nimport {useAuth} from '@common/auth/use-auth';\nimport {CannedReply} from '@app/agent/agent-ticket-page/canned-replies/canned-reply';\n\ninterface Response extends PaginatedBackendResponse<CannedReply> {}\n\nexport function useCannedReplies(query: string = '') {\n  const {user} = useAuth();\n  return useQuery({\n    queryKey: ['canned-replies', `${user?.id}`, query],\n    queryFn: ({signal}) => fetchCannedReplies(user!.id, query, signal),\n    placeholderData: keepPreviousData,\n  });\n}\n\nasync function fetchCannedReplies(\n  userId: number,\n  query: string,\n  signal?: AbortSignal,\n) {\n  if (query) {\n    await new Promise(resolve => setTimeout(resolve, 300));\n  }\n  return apiClient\n    .get<Response>('canned-replies', {\n      params: {userId, shared: true, perPage: 15, query},\n      signal,\n    })\n    .then(response => response.data);\n}\n","import {Menu, MenuTrigger} from '@common/ui/navigation/menu/menu-trigger';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CommentIcon} from '@common/icons/material/Comment';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {useCannedReplies} from '@app/agent/agent-ticket-page/canned-replies/requests/use-canned-replies';\nimport {Trans} from '@common/i18n/trans';\nimport {CannedReply} from '@app/agent/agent-ticket-page/canned-replies/canned-reply';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {openDialog} from '@common/ui/overlays/store/dialog-store';\nimport {CreateCannedReplyDialog} from '@app/agent/agent-ticket-page/canned-replies/create-canned-reply-dialog';\nimport {ButtonSize} from '@common/ui/buttons/button-size';\nimport {useState} from 'react';\n\ninterface Props {\n  onSelected: (reply: CannedReply) => void;\n  size?: ButtonSize;\n}\nexport function CannedReplySelector({onSelected, size}: Props) {\n  const {trans} = useTrans();\n  const [query, setQuery] = useState('');\n  const {data, isFetching} = useCannedReplies(query);\n\n  return (\n    <MenuTrigger\n      isAsync\n      searchPlaceholder={trans(message('Search...'))}\n      isLoading={isFetching}\n      inputValue={query}\n      onInputValueChange={setQuery}\n      clearInputOnItemSelection\n      blurReferenceOnItemSelection\n      selectionMode=\"none\"\n      showSearchField\n      floatingMaxHeight={440}\n      floatingMinWidth=\"min-w-288\"\n      showEmptyMessage\n    >\n      <Tooltip label={<Trans message=\"Saved replies\" />}>\n        <IconButton size={size}>\n          <CommentIcon />\n        </IconButton>\n      </Tooltip>\n      <Menu>\n        <Item\n          value=\"saveThisReply\"\n          className=\"font-semibold\"\n          onSelected={() => openDialog(CreateCannedReplyDialog)}\n        >\n          <Trans message=\"Save this reply...\" />\n        </Item>\n        {data?.pagination.data.map(reply => (\n          <Item\n            value={reply.id}\n            key={reply.id}\n            onSelected={() => onSelected(reply)}\n          >\n            {reply.name}\n          </Item>\n        ))}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import React, {useRef, useState} from 'react';\nimport {useSearchArticles} from '@app/help-center/search/use-search-articles';\nimport {ComboBox} from '@common/ui/forms/combobox/combobox';\nimport {SearchIcon} from '@common/icons/material/Search';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {ArticlePath} from '@app/help-center/articles/article-path';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {Article} from '@app/help-center/articles/article';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\nimport {useTicketHcCategories} from '@app/agent/agent-ticket-page/requests/use-ticket';\n\ninterface Props {\n  onSelected: (article: Article) => void;\n}\nexport function TicketPageDocsSearchInput({onSelected}: Props) {\n  const hcCategories = useTicketHcCategories();\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [query, setQuery] = useState('');\n  const {data, isFetching} = useSearchArticles(query, {\n    categoryIds: hcCategories,\n  });\n  const {trans} = useTrans();\n\n  useKeybind(\n    'window',\n    'ctrl+/',\n    () => {\n      inputRef.current?.focus();\n    },\n    {allowedInputSelector: '.ProseMirror'},\n  );\n\n  return (\n    <ComboBox\n      inputValue={query}\n      onInputValueChange={setQuery}\n      isAsync\n      isLoading={isFetching}\n      items={data?.pagination.data}\n      clearInputOnItemSelection\n      hideEndAdornment\n      placeholder={trans(message('Search documentation... (ctrl+/)'))}\n      startAdornment={<SearchIcon />}\n      className=\"mb-10\"\n      selectionMode=\"none\"\n      showEmptyMessage\n      ref={inputRef}\n    >\n      {result => (\n        <Item\n          key={result.id}\n          value={result.id}\n          onSelected={() => {\n            close();\n            onSelected(result);\n          }}\n          description={<ArticlePath article={result} />}\n          textLabel={result.title}\n        >\n          {result.title}\n        </Item>\n      )}\n    </ComboBox>\n  );\n}\n","import React, {\n  Fragment,\n  MutableRefObject,\n  useCallback,\n  useEffect,\n  useRef,\n} from 'react';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '@common/ui/navigation/menu/menu-trigger';\nimport {useMailboxSidenavTags} from '@app/agent/use-mailbox-sidenav-tags';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\nimport {\n  getFromLocalStorage,\n  useLocalStorage,\n} from '@common/utils/hooks/local-storage';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {ArrowDropDownIcon} from '@common/icons/material/ArrowDropDown';\nimport {\n  AfterReplyAction,\n  AfterReplyActions,\n  useAfterReplyAction,\n} from '@app/agent/agent-ticket-page/use-after-reply-action';\nimport {useSubmitAgentReply} from '@app/agent/agent-ticket-page/agent-reply-editor/use-submit-agent-reply';\nimport {Editor} from '@tiptap/react';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {AgentReplyEditorDraftButtons} from '@app/agent/agent-ticket-page/agent-reply-editor/agent-reply-editor-draft-buttons';\nimport {useBackgroundDraftSave} from '@app/agent/agent-ticket-page/agent-reply-editor/use-background-draft-save';\nimport {\n  ticketPageStore,\n  useTicketPageStore,\n} from '@app/agent/agent-ticket-page/ticket-page-store';\nimport {\n  ReplyEditor,\n  ReplyEditorToolbarButtonsProps,\n} from '@app/reply-editor/reply-editor';\nimport {SendReplyButton} from '@app/reply-editor/send-reply-button';\nimport {getReplyBody} from '@app/reply-editor/get-reply-body';\nimport {CannedReplySelector} from '@app/agent/agent-ticket-page/canned-replies/canned-reply-selector';\nimport {MenubarButtonProps} from '@common/text-editor/menubar/menubar-button-props';\nimport {TicketPageDocsSearchInput} from '@app/agent/agent-ticket-page/ticket-page-docs-search-input';\nimport {getArticleLink} from '@app/help-center/articles/article-link';\nimport {insertLinkIntoTextEditor} from '@common/text-editor/insert-link-into-text-editor';\n\nexport function AgentReplyEditor() {\n  const {addGlobalListener} = useGlobalListeners();\n  const submitReply = useSubmitAgentReply();\n  const attachments = useTicketPageStore(s => s.activeDraft.attachments);\n  const editorRef = useRef<Editor | null>(null);\n\n  const handleSubmit = useCallback(() => {\n    if (!editorRef.current) return;\n    submitReply.mutate(\n      {\n        type: 'replies',\n        status: getFromLocalStorage('ticket-page-status', 'pending'),\n        attachments: ticketPageStore().activeDraft.attachments.map(u => u.id),\n        body: getReplyBody(editorRef),\n      },\n      {\n        onSuccess: () => {\n          ticketPageStore().setEditorIsOpen(false);\n        },\n      },\n    );\n  }, [submitReply]);\n\n  const handleBackgroundSave = useBackgroundDraftSave();\n\n  useEffect(() => {\n    addGlobalListener(document, 'visibilitychange', () => {\n      if (document.hidden) {\n        handleBackgroundSave();\n      }\n    });\n  }, [addGlobalListener, handleBackgroundSave]);\n\n  return (\n    <div className=\"mb-24 px-20\">\n      <TicketPageDocsSearchInput\n        onSelected={article => {\n          if (editorRef.current) {\n            insertLinkIntoTextEditor(editorRef.current, {\n              href: getArticleLink(article),\n              target: '_blank',\n              text: article.title,\n            });\n          }\n        }}\n      />\n      <ReplyEditor\n        menubarButtons={<MenubarButtons editorRef={editorRef} />}\n        footerButtons={<FooterButtons />}\n        attachments={attachments}\n        onAttachmentsChange={attachments => {\n          ticketPageStore().updateActiveDraft({attachments});\n        }}\n        editorRef={editorRef}\n        onSubmit={handleSubmit}\n        isLoading={submitReply.isPending}\n        initialContent={ticketPageStore().activeDraft?.body}\n        onChange={() => {\n          if (editorRef.current) {\n            ticketPageStore().updateActiveDraft({\n              body: editorRef.current.getHTML(),\n            });\n          }\n        }}\n      />\n    </div>\n  );\n}\n\ninterface MenubarButtonsProps {\n  size?: MenubarButtonProps['size'];\n  editorRef: MutableRefObject<Editor | null>;\n}\nfunction MenubarButtons({size, editorRef}: MenubarButtonsProps) {\n  return (\n    <Fragment>\n      <CannedReplySelector\n        size={size}\n        onSelected={reply => {\n          ticketPageStore().updateActiveDraft({\n            body: reply.body,\n            attachments: reply.attachments,\n          });\n          editorRef.current?.commands.insertContent(reply.body);\n        }}\n      />\n      <AgentReplyEditorDraftButtons size={size} />\n    </Fragment>\n  );\n}\n\nfunction FooterButtons({isLoading, onSubmit}: ReplyEditorToolbarButtonsProps) {\n  return (\n    <Fragment>\n      <StatusSelector />\n      <SendReplyButton isLoading={isLoading} onSubmit={onSubmit} />\n      <AfterReplyActionSelector disabled={isLoading} />\n    </Fragment>\n  );\n}\n\ninterface AfterReplyActionSelectorProps {\n  disabled?: boolean;\n}\nfunction AfterReplyActionSelector({disabled}: AfterReplyActionSelectorProps) {\n  const {action, setAction} = useAfterReplyAction();\n  return (\n    <MenuTrigger\n      selectionMode=\"single\"\n      selectedValue={action}\n      onItemSelected={newValue => setAction(newValue as AfterReplyAction)}\n    >\n      <IconButton\n        border=\"border border-transparent border-l-primary-light/40\"\n        variant=\"flat\"\n        color=\"primary\"\n        radius=\"rounded-none\"\n        size=\"sm\"\n        disabled={disabled}\n      >\n        <ArrowDropDownIcon />\n      </IconButton>\n      <Menu>\n        {Object.entries(AfterReplyActions).map(([key, label]) => (\n          <MenuItem key={key} value={key} capitalizeFirst>\n            <Trans {...label} />\n          </MenuItem>\n        ))}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n\nfunction StatusSelector() {\n  const {data} = useMailboxSidenavTags();\n  const [selectedStatus, setSelectedStatus] = useLocalStorage(\n    'ticket-page-status',\n    'pending',\n  );\n  if (!data?.statusTags.length) return null;\n  const selectedTag = data.statusTags.find(t => t.name === selectedStatus);\n  return (\n    <MenuTrigger\n      selectionMode=\"single\"\n      selectedValue={selectedStatus}\n      onItemSelected={newValue => setSelectedStatus(newValue as string)}\n    >\n      <Button\n        radius=\"rounded-none\"\n        endIcon={<KeyboardArrowDownIcon />}\n        className=\"capitalize text-muted\"\n      >\n        <Trans message={selectedTag!.display_name} />\n      </Button>\n      <Menu>\n        {data.statusTags.map(tag => (\n          <MenuItem key={tag.id} value={tag.name} capitalizeFirst>\n            <Trans message={tag.display_name} />\n          </MenuItem>\n        ))}\n      </Menu>\n    </MenuTrigger>\n  );\n}\n","import {useTicket} from '@app/agent/agent-ticket-page/requests/use-ticket';\nimport {DashboardSidenav} from '@common/ui/layout/dashboard-sidenav';\nimport React, {Fragment, useEffect} from 'react';\nimport {PageStatus} from '@common/http/page-status';\nimport {TicketPageToolbar} from '@app/agent/agent-ticket-page/ticket-page-toolbar';\nimport {AgentTicketPageReplyList} from '@app/agent/agent-ticket-page/reply-list/agent-ticket-page-reply-list';\nimport {TicketPageHeader} from '@app/agent/agent-ticket-page/ticket-page-header';\nimport {UserDetailsSidebar} from '@app/agent/agent-ticket-page/user-details-sidebar/user-details-sidebar';\nimport {\n  defaultDraftValues,\n  ticketPageStore,\n  useTicketPageStore,\n} from '@app/agent/agent-ticket-page/ticket-page-store';\nimport {usePrevious} from '@common/utils/hooks/use-previous';\nimport {useBackgroundDraftSave} from '@app/agent/agent-ticket-page/agent-reply-editor/use-background-draft-save';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {AgentReplyEditor} from '@app/agent/agent-ticket-page/agent-reply-editor/agent-reply-editor';\nimport {AgentPageLayout} from '@app/agent/agent-page-layout';\nimport {Helmet} from '@common/seo/helmet';\nimport {useSettings} from '@common/core/settings/use-settings';\n\nexport function AgentTicketPage() {\n  return (\n    <AgentPageLayout\n      rightSidenav={\n        <DashboardSidenav position=\"right\" className=\"bg-alt\" size=\"w-264\">\n          <UserDetailsSidebar />\n        </DashboardSidenav>\n      }\n    >\n      <TicketContent />\n    </AgentPageLayout>\n  );\n}\n\nfunction TicketContent() {\n  const {branding} = useSettings();\n  const query = useTicket();\n  const previousTicketId = usePrevious(query.data?.ticket.id);\n  const saveDraft = useBackgroundDraftSave();\n\n  useEffect(() => {\n    const ticket = query.data?.ticket;\n    if (ticket) {\n      const draft = ticket.replies?.find(reply => reply.type === 'drafts');\n      if (draft && previousTicketId !== ticket.id) {\n        ticketPageStore().updateActiveDraft({\n          ...defaultDraftValues,\n          ...draft,\n          isDirty: false,\n        });\n      }\n    }\n    return () => {\n      if (previousTicketId) {\n        saveDraft('manual', previousTicketId);\n        ticketPageStore().setEditorIsOpen(false);\n      }\n    };\n  }, [previousTicketId]);\n\n  return (\n    <Fragment>\n      {query.data ? (\n        <Fragment>\n          <Helmet>\n            <title>\n              {query.data.ticket.subject} - {branding.site_name}\n            </title>\n          </Helmet>\n          <TicketPageToolbar ticket={query.data.ticket} />\n          <TicketPageHeader data={query.data} />\n          <ReplyEditor />\n          <AgentTicketPageReplyList data={query.data} />\n        </Fragment>\n      ) : (\n        <PageStatus\n          query={query}\n          loaderClassName=\"absolute inset-0 m-auto\"\n          redirectOn404=\"/agent/tickets\"\n        />\n      )}\n    </Fragment>\n  );\n}\n\nfunction ReplyEditor() {\n  const editorIsOpen = useTicketPageStore(s => s.editorIsOpen);\n  return (\n    <FileUploadProvider>\n      {editorIsOpen && <AgentReplyEditor />}\n    </FileUploadProvider>\n  );\n}\n","import React from 'react';\nimport {CannedRepliesDatatablePage} from '@app/admin/canned-replies/canned-replies-datatable-page';\nimport {useAuth} from '@common/auth/use-auth';\nimport {AgentPageLayout} from '@app/agent/agent-page-layout';\n\nexport function AgentCannedRepliesPage() {\n  const {user} = useAuth();\n  return (\n    <AgentPageLayout>\n      <CannedRepliesDatatablePage userId={user?.id} />\n    </AgentPageLayout>\n  );\n}\n","import {useForm} from 'react-hook-form';\nimport {\n  CreateTicketPayload,\n  useCreateTicket,\n} from '@app/agent/agent-new-ticket-page/use-create-ticket';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {FormNormalizedModelField} from '@common/ui/forms/normalized-model-field';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {Item} from '@common/ui/forms/listbox/item';\nimport {\n  GetMailboxSidenavTags,\n  useMailboxSidenavTags,\n} from '@app/agent/use-mailbox-sidenav-tags';\nimport React, {useRef, useState} from 'react';\nimport {PageStatus} from '@common/http/page-status';\nimport {AgentPageLayout} from '@app/agent/agent-page-layout';\nimport {Button} from '@common/ui/buttons/button';\nimport {FileUploadProvider} from '@common/uploads/uploader/file-upload-provider';\nimport {ReplyEditor} from '@app/reply-editor/reply-editor';\nimport {Editor} from '@tiptap/react';\nimport {FileEntry} from '@common/uploads/file-entry';\nimport {getReplyBody} from '@app/reply-editor/get-reply-body';\nimport {getInputFieldClassNames} from '@common/ui/forms/input-field/get-input-field-class-names';\nimport {useSearchParams} from 'react-router-dom';\n\nexport function AgentNewTicketPage() {\n  const query = useMailboxSidenavTags();\n  return (\n    <AgentPageLayout>\n      <main className=\"container mx-auto p-12 md:p-24\">\n        <h1 className=\"mb-34 mt-14 text-3xl font-light\">\n          <Trans message=\"Create new ticket\" />\n        </h1>\n        {query.data ? (\n          <TicketForm tags={query.data} />\n        ) : (\n          <PageStatus query={query} show404={false} loaderIsScreen={false} />\n        )}\n      </main>\n    </AgentPageLayout>\n  );\n}\n\ninterface TicketFormProps {\n  tags: GetMailboxSidenavTags;\n}\nfunction TicketForm({tags: {statusTags, categoryTags}}: TicketFormProps) {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const customerId = searchParams.get('customer_id');\n  const form = useForm<CreateTicketPayload>({\n    defaultValues: {\n      category_id: categoryTags[0]?.id,\n      status: statusTags[0]?.name,\n      user_id: customerId ? parseInt(customerId) : undefined,\n    },\n  });\n  const bodyError = form.formState.errors.body?.message;\n  const createTicket = useCreateTicket(form);\n  const editorRef = useRef<Editor | null>(null);\n  const [attachments, setAttachments] = useState<FileEntry[]>([]);\n\n  const handleSubmit = () => {\n    createTicket.mutate(\n      {\n        ...form.getValues(),\n        body: getReplyBody(editorRef) || '',\n        attachments: attachments.map(a => a.id),\n        created_by_agent: true,\n      },\n      {\n        onSuccess: () => navigate('/agent/tickets'),\n      },\n    );\n  };\n\n  const inputFieldClassNames = getInputFieldClassNames();\n\n  return (\n    <Form\n      form={form}\n      onSubmit={() => handleSubmit()}\n      onBeforeSubmit={() => form.clearErrors()}\n    >\n      <FormNormalizedModelField\n        name=\"user_id\"\n        endpoint=\"normalized-models/user\"\n        label={<Trans message=\"Customer\" />}\n        className=\"mb-24\"\n        autoFocus\n      />\n      <FormTextField\n        name=\"subject\"\n        label={<Trans message=\"Subject\" />}\n        className=\"mb-24\"\n      />\n      <FormSelect\n        name=\"category_id\"\n        label={<Trans message=\"Category\" />}\n        selectionMode=\"single\"\n        className=\"mb-24\"\n      >\n        {categoryTags.map(category => (\n          <Item key={category.id} value={category.id}>\n            {category.display_name || category.name}\n          </Item>\n        ))}\n      </FormSelect>\n      <FormSelect\n        name=\"status\"\n        label={<Trans message=\"Status\" />}\n        selectionMode=\"single\"\n        className=\"mb-24\"\n      >\n        {statusTags.map(status => (\n          <Item key={status.id} value={status.name}>\n            {status.display_name || status.name}\n          </Item>\n        ))}\n      </FormSelect>\n      <div className=\"mb-24\">\n        <div className={inputFieldClassNames.label}>\n          <Trans message=\"Reply body\" />\n        </div>\n        <FileUploadProvider>\n          <ReplyEditor\n            autoFocus={false}\n            minHeight=\"min-h-[300px]\"\n            isLoading={createTicket.isPending}\n            editorRef={editorRef}\n            attachments={attachments}\n            onAttachmentsChange={attachments => setAttachments(attachments)}\n            onSubmit={() => handleSubmit()}\n          />\n        </FileUploadProvider>\n        {bodyError && (\n          <div className={inputFieldClassNames.error}>{bodyError}</div>\n        )}\n      </div>\n      <Button\n        variant=\"flat\"\n        color=\"primary\"\n        type=\"submit\"\n        disabled={createTicket.isPending}\n      >\n        <Trans message=\"Create\" />\n      </Button>\n    </Form>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\nimport {UseFormReturn} from 'react-hook-form';\nimport {Article} from '@app/help-center/articles/article';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\n\ninterface Response extends BackendResponse {\n  article: Article;\n}\n\nexport interface UpdateUserDetailsPayload {\n  language?: string;\n  country?: string;\n  timezone?: string;\n  details?: string;\n  notes?: string;\n  emails?: {id?: number; address: string}[];\n  tags?: string[];\n}\n\nexport function useUpdateUserDetails(\n  userId: string | number,\n  form: UseFormReturn<UpdateUserDetailsPayload>,\n) {\n  return useMutation({\n    mutationFn: (payload: UpdateUserDetailsPayload) =>\n      updateDetails(userId!, payload),\n    onSuccess: async () => {\n      form.reset({}, {keepValues: true});\n      await queryClient.invalidateQueries({queryKey: ['users']});\n      toast(message('User details updated'));\n    },\n    onError: err =>\n      form ? onFormQueryError(err, form) : showHttpErrorToast(err),\n  });\n}\n\nfunction updateDetails(\n  userId: string | number,\n  payload: UpdateUserDetailsPayload,\n): Promise<Response> {\n  return apiClient.put(`users/${userId}/details`, payload).then(r => r.data);\n}\n","import {User} from '@common/auth/user';\nimport {useSettings} from '@common/core/settings/use-settings';\nimport React, {Fragment, ReactElement, ReactNode} from 'react';\nimport {Trans} from '@common/i18n/trans';\nimport {EnvatoPurchaseList} from '@app/agent/agent-ticket-page/envato-purchase-list/envato-purchase-list';\nimport {useFieldArray, useForm} from 'react-hook-form';\nimport {getLocalTimeZone} from '@internationalized/date';\nimport {useValueLists} from '@common/http/value-lists';\nimport {Form} from '@common/ui/forms/form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Button} from '@common/ui/buttons/button';\nimport {TimezoneSelect} from '@common/auth/ui/account-settings/timezone-select';\nimport {InfoDialogTrigger} from '@common/ui/overlays/dialog/info-dialog-trigger/info-dialog-trigger';\nimport {FormChipField} from '@common/ui/forms/input-field/chip-field/form-chip-field';\nimport {\n  UpdateUserDetailsPayload,\n  useUpdateUserDetails,\n} from '@app/agent/customer-page/requests/use-update-user-details';\nimport {AddIcon} from '@common/icons/material/Add';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {FormSelect} from '@common/ui/forms/select/select';\nimport {Option} from '@common/ui/forms/combobox/combobox';\nimport {message} from '@common/i18n/message';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {DashboardSidenavChildrenProps} from '@common/ui/layout/dashboard-sidenav';\nimport {FormattedDate} from '@common/i18n/formatted-date';\n\nconst borderColor = 'border border-fg-base/6 hover:border-divider';\n\ninterface Props extends DashboardSidenavChildrenProps {\n  user?: User;\n}\nexport function AgentCustomerPageSidebar({user, className}: Props) {\n  const {envato} = useSettings();\n\n  return (\n    <aside className={className}>\n      {user && <FormWrapper user={user} />}\n      {envato.enable && !!user?.purchase_codes && (\n        <Fragment>\n          <div className=\"mb-4 mt-24 text-lg font-semibold\">\n            <Trans message=\"Envato purchases\" />\n          </div>\n          <EnvatoPurchaseList purchases={user.purchase_codes} />\n        </Fragment>\n      )}\n    </aside>\n  );\n}\n\ninterface FormWrapperProps {\n  user: User;\n}\nfunction FormWrapper({user}: FormWrapperProps) {\n  const form = useForm<UpdateUserDetailsPayload>({\n    defaultValues: {\n      language: user.language || '',\n      country: user.country || '',\n      timezone: user.timezone || getLocalTimeZone(),\n      notes: user.details?.notes || '',\n      details: user.details?.details || '',\n      emails: user.secondary_emails,\n      tags: user.tags?.map(tag => tag.name),\n    },\n  });\n  const updateDetails = useUpdateUserDetails(user.id, form);\n\n  return (\n    <Form form={form} onSubmit={values => updateDetails.mutate(values)}>\n      <div className=\"space-y-12\">\n        <EmailsSection user={user} />\n        <LocalizationFields user={user} />\n        <Detail label={<Trans message=\"Tags\" />}>\n          <FormChipField\n            name=\"tags\"\n            size=\"sm\"\n            chipSize=\"xs\"\n            valueKey=\"name\"\n            inputBorder={borderColor}\n          />\n        </Detail>\n        <DetailsField />\n        <NotesField />\n        <Detail label={<Trans message=\"Last login\" />}>\n          {user.last_login ? (\n            <FormattedDate date={user.last_login.created_at} />\n          ) : (\n            '-'\n          )}\n        </Detail>\n        <Detail label={<Trans message=\"Created at\" />}>\n          {user.created_at ? <FormattedDate date={user.created_at} /> : '-'}\n        </Detail>\n      </div>\n      {form.formState.isDirty && (\n        <Button\n          color=\"primary\"\n          variant=\"flat\"\n          type=\"submit\"\n          size=\"sm\"\n          display=\"block\"\n          className=\"mt-14 w-full\"\n          disabled={updateDetails.isPending}\n        >\n          <Trans message=\"Save\" />\n        </Button>\n      )}\n    </Form>\n  );\n}\n\ninterface EmailsSectionProps {\n  user: User;\n}\nfunction EmailsSection({user}: EmailsSectionProps) {\n  const {fields, append, remove} = useFieldArray<\n    UpdateUserDetailsPayload,\n    'emails',\n    'key'\n  >({\n    name: 'emails',\n    keyName: 'key',\n  });\n  return (\n    <Detail\n      label={\n        <div className=\"mt-4\">\n          <Trans message=\"Emails\" />\n        </div>\n      }\n      align=\"items-start\"\n    >\n      <div>\n        <div className=\"flex items-center justify-between gap-12\">\n          <div className=\"min-w-0 flex-auto overflow-hidden overflow-ellipsis whitespace-nowrap\">\n            {user.email}\n          </div>\n          <Tooltip label={<Trans message=\"Add email\" />}>\n            <IconButton\n              size=\"xs\"\n              iconSize=\"sm\"\n              onClick={() => append({address: ''})}\n            >\n              <AddIcon />\n            </IconButton>\n          </Tooltip>\n        </div>\n        <div className=\"space-y-4 pt-6\">\n          {fields.map((field, index) => (\n            <div key={field.key} className=\"flex items-center gap-8\">\n              <FormTextField\n                name={`emails.${index}.address`}\n                className=\"flex-auto\"\n                size=\"xs\"\n                type=\"email\"\n                inputBorder={borderColor}\n              />\n              <IconButton\n                color=\"danger\"\n                size=\"xs\"\n                iconSize=\"sm\"\n                onClick={() => remove(index)}\n              >\n                <CloseIcon />\n              </IconButton>\n            </div>\n          ))}\n        </div>\n      </div>\n    </Detail>\n  );\n}\n\ninterface LocalizationFieldsProps {\n  user: User;\n}\nfunction LocalizationFields({user}: LocalizationFieldsProps) {\n  const {trans} = useTrans();\n  const {data} = useValueLists(['timezones', 'countries', 'localizations']);\n  const countries = data?.countries || [];\n  const localizations = data?.localizations || [];\n  const timezones = data?.timezones || {};\n  return (\n    <Fragment>\n      <Detail label={<Trans message=\"Timezone\" />}>\n        <TimezoneSelect\n          name=\"timezone\"\n          timezones={timezones}\n          size=\"sm\"\n          inputBorder={borderColor}\n        />\n      </Detail>\n      <Detail label={<Trans message=\"Language\" />}>\n        <FormSelect\n          selectionMode=\"single\"\n          name=\"language\"\n          size=\"sm\"\n          inputBorder={borderColor}\n        >\n          {localizations.map(localization => (\n            <Option key={localization.language} value={localization.language}>\n              {localization.name}\n            </Option>\n          ))}\n        </FormSelect>\n      </Detail>\n      <Detail label={<Trans message=\"Country\" />}>\n        <FormSelect\n          selectionMode=\"single\"\n          size=\"sm\"\n          name=\"country\"\n          showSearchField\n          searchPlaceholder={trans(message('Search countries'))}\n          inputBorder={borderColor}\n        >\n          {countries.map(country => (\n            <Option key={country.code} value={country.code}>\n              {country.name}\n            </Option>\n          ))}\n        </FormSelect>\n      </Detail>\n    </Fragment>\n  );\n}\n\nfunction DetailsField() {\n  return (\n    <Detail\n      label={\n        <div className=\"flex items-center gap-1\">\n          <div>\n            <Trans message=\"Details\" />\n          </div>\n          <InfoDialogTrigger\n            dialogSize=\"xs\"\n            body={\n              <Trans message=\"Optional information, like address. Only visible to agents, not end users.\" />\n            }\n          />\n        </div>\n      }\n    >\n      <FormTextField\n        name=\"details\"\n        inputElementType=\"textarea\"\n        rows={1}\n        inputBorder={borderColor}\n      />\n    </Detail>\n  );\n}\n\nfunction NotesField() {\n  return (\n    <Detail\n      label={\n        <div className=\"flex items-center gap-1\">\n          <div>\n            <Trans message=\"Notes\" />\n          </div>\n          <InfoDialogTrigger\n            dialogSize=\"xs\"\n            body={\n              <Trans message=\"Optional notes. Only visible to agents, not end users.\" />\n            }\n          />\n        </div>\n      }\n    >\n      <FormTextField\n        name=\"notes\"\n        inputElementType=\"textarea\"\n        rows={1}\n        inputBorder={borderColor}\n      />\n    </Detail>\n  );\n}\n\ninterface DetailProps {\n  label: ReactElement;\n  children: ReactNode;\n  align?: string;\n}\nfunction Detail({label, children, align = 'items-center'}: DetailProps) {\n  return (\n    <div className={`flex ${align} gap-12`}>\n      <div className=\"w-80 flex-shrink-0 text-sm text-muted\">{label}</div>\n      <div className=\"flex-auto text-sm\">{children}</div>\n    </div>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\n\ninterface Payload {\n  userId: number | string;\n}\n\nexport function useDeleteUser() {\n  const navigate = useNavigate();\n  return useMutation({\n    mutationFn: deleteUser,\n    onSuccess: async () => {\n      toast(message('User deleted'));\n      await Promise.allSettled([\n        queryClient.invalidateQueries({\n          queryKey: ['users'],\n        }),\n        queryClient.invalidateQueries({\n          queryKey: ['tickets'],\n        }),\n      ]);\n      navigate('/agent/tickets');\n    },\n    onError: r => showHttpErrorToast(r),\n  });\n}\n\nfunction deleteUser(payload: Payload): Promise<BackendResponse> {\n  return apiClient\n    .delete(`users/${payload.userId}`)\n    .then(response => response.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {UseFormReturn} from 'react-hook-form';\nimport {onFormQueryError} from '@common/errors/on-form-query-error';\n\nexport interface MergeUsersPayload {\n  user_id: number | string;\n  mergee_id: number | string;\n}\n\nexport function useMergeUsers(form: UseFormReturn<MergeUsersPayload>) {\n  const navigate = useNavigate();\n  return useMutation({\n    mutationFn: mergeUsers,\n    onSuccess: async () => {\n      toast(message('Users merged'));\n      await Promise.allSettled([\n        queryClient.invalidateQueries({\n          queryKey: ['users'],\n        }),\n        queryClient.invalidateQueries({\n          queryKey: ['tickets'],\n        }),\n      ]);\n      navigate('/agent/tickets');\n    },\n    onError: r => onFormQueryError(r, form),\n  });\n}\n\nfunction mergeUsers(payload: MergeUsersPayload): Promise<BackendResponse> {\n  return apiClient.post(`merge-users`, payload).then(response => response.data);\n}\n","import {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {User} from '@common/auth/user';\nimport {Trans} from '@common/i18n/trans';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogHeader} from '@common/ui/overlays/dialog/dialog-header';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {useForm} from 'react-hook-form';\nimport {Form} from '@common/ui/forms/form';\nimport {FormNormalizedModelField} from '@common/ui/forms/normalized-model-field';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {\n  MergeUsersPayload,\n  useMergeUsers,\n} from '@app/agent/customer-page/requests/use-merge-users';\nimport {message} from '@common/i18n/message';\n\ninterface Props {\n  mergee: User;\n}\n\nexport function MergeUsersDialog({mergee}: Props) {\n  const {close, formId} = useDialogContext();\n  const form = useForm<MergeUsersPayload>({\n    defaultValues: {\n      mergee_id: mergee.id,\n    },\n  });\n  const mergeUsers = useMergeUsers(form);\n  const selectedUserId = form.watch('user_id');\n\n  return (\n    <Dialog>\n      <DialogHeader>\n        <Trans\n          message=\"Merge ':name' into another user\"\n          values={{name: mergee.display_name}}\n        />\n      </DialogHeader>\n      <DialogBody>\n        <Form\n          id={formId}\n          form={form}\n          onSubmit={values => {\n            mergeUsers.mutate(values, {onSuccess: () => close()});\n          }}\n        >\n          <FormNormalizedModelField\n            name=\"user_id\"\n            endpoint=\"normalized-models/user\"\n            label={<Trans message=\"User to merge into\" />}\n            placeholder={message('Select user')}\n            description={\n              <Trans\n                message=\"':name' will be deleted and all data belonging to them will be merged into selected user.\"\n                values={{name: mergee.display_name}}\n              />\n            }\n          />\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={() => close()}>\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          form={formId}\n          disabled={!selectedUserId || mergeUsers.isPending}\n        >\n          <Trans message=\"Merge\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {useUser} from '@common/auth/ui/use-user';\nimport {Link, Outlet, useLocation, useParams} from 'react-router-dom';\nimport {AgentNavbar} from '@app/agent/agent-navbar';\nimport React, {Fragment, useContext, useEffect, useState} from 'react';\nimport {getCustomerLink} from '@app/agent/customer-page/customer-link';\nimport {Trans} from '@common/i18n/trans';\nimport {Tabs} from '@common/ui/tabs/tabs';\nimport {TabList} from '@common/ui/tabs/tab-list';\nimport {Tab} from '@common/ui/tabs/tab';\nimport {AgentCustomerPageSidebar} from '@app/agent/customer-page/agent-customer-page-sidebar';\nimport {UserAvatar} from '@common/ui/images/user-avatar';\nimport {User} from '@common/auth/user';\nimport {Button} from '@common/ui/buttons/button';\nimport {AddIcon} from '@common/icons/material/Add';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {DashboardLayout} from '@common/ui/layout/dashboard-layout';\nimport {DashboardNavbar} from '@common/ui/layout/dashboard-navbar';\nimport {DashboardSidenav} from '@common/ui/layout/dashboard-sidenav';\nimport {DashboardContent} from '@common/ui/layout/dashboard-content';\nimport clsx from 'clsx';\nimport {prefetchValueLists} from '@common/http/value-lists';\nimport {DashboardLayoutContext} from '@common/ui/layout/dashboard-layout-context';\nimport {\n  Menu,\n  MenuItem,\n  MenuTrigger,\n} from '@common/ui/navigation/menu/menu-trigger';\nimport {MoreHorizIcon} from '@common/icons/material/MoreHoriz';\nimport {ConfirmationDialog} from '@common/ui/overlays/dialog/confirmation-dialog';\nimport {openDialog} from '@common/ui/overlays/store/dialog-store';\nimport {useDeleteUser} from '@app/agent/customer-page/requests/use-delete-user';\nimport {PageStatus} from '@common/http/page-status';\nimport {BanUserDialog} from '@common/admin/users/ban-user-dialog';\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\nimport {MergeUsersDialog} from '@app/agent/customer-page/merge-users-dialog';\n\nexport function AgentCustomerPage() {\n  const {userId} = useParams();\n  const query = useUser(userId!, {\n    with: [\n      'tags',\n      'secondary_emails',\n      'details',\n      'purchase_codes',\n      'bans',\n      'lastLogin',\n    ],\n  });\n  const user = query.data?.user;\n\n  useEffect(() => {\n    prefetchValueLists(['timezones', 'countries', 'localizations']);\n  }, []);\n\n  if (!query.isLoading && !query.data) {\n    return <PageStatus query={query} />;\n  }\n\n  return (\n    <DashboardLayout name=\"agent_customer_page\">\n      <AgentNavbar element={DashboardNavbar} />\n      <LeftSidebar user={user} />\n      <DashboardContent>\n        <main\n          className={clsx(\n            'p-14 transition-opacity md:p-24',\n            !user && 'opacity-0',\n          )}\n        >\n          <Fragment>\n            <Header user={user} />\n            <Tables />\n          </Fragment>\n        </main>\n      </DashboardContent>\n    </DashboardLayout>\n  );\n}\n\ninterface PageNavbarProps {\n  user?: User;\n}\nfunction LeftSidebar({user}: PageNavbarProps) {\n  const {isMobileMode} = useContext(DashboardLayoutContext);\n  return (\n    <DashboardSidenav\n      position=\"left\"\n      size=\"w-350\"\n      className={clsx(\n        'bg',\n        isMobileMode ? 'border-r p-12' : 'mt-8 py-24 pl-24',\n      )}\n      overflow=\"overflow-y-auto overflow-x-hidden compact-scrollbar\"\n    >\n      <AgentCustomerPageSidebar user={user} />\n    </DashboardSidenav>\n  );\n}\n\ninterface HeaderProps {\n  user?: User;\n}\nfunction Header({user}: HeaderProps) {\n  if (!user) return null;\n  const banReason = user.bans?.[0]?.comment;\n  return (\n    <header className=\"mb-16 flex items-center\">\n      <div className=\"mr-auto flex items-center gap-14\">\n        <UserAvatar user={user} size=\"w-50 h-50\" circle />\n        <div>\n          <h1 className=\"text-xl font-semibold\">{user.display_name}</h1>\n          {banReason && (\n            <div className=\"text-sm text-danger\">\n              <Trans\n                message=\"Suspended: :reason\"\n                values={{reason: banReason}}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n      <Button\n        variant=\"outline\"\n        startIcon={<AddIcon />}\n        size=\"xs\"\n        className=\"mx-12\"\n        elementType={Link}\n        to={`/agent/tickets/new?customer_id=${user.id}`}\n        target=\"_blank\"\n      >\n        <Trans message=\"New ticket\" />\n      </Button>\n      <MenuTrigger>\n        <IconButton variant=\"outline\" size=\"xs\">\n          <MoreHorizIcon />\n        </IconButton>\n        <Menu>\n          <MenuItem\n            value=\"suspend\"\n            onSelected={() => openDialog(BanUserDialog, {user})}\n          >\n            <Trans message=\"Suspend\" />\n          </MenuItem>\n          <MenuItem\n            value=\"merge\"\n            onSelected={() => openDialog(MergeUsersDialog, {mergee: user})}\n          >\n            <Trans message=\"Merge into another user\" />\n          </MenuItem>\n          <MenuItem\n            value=\"delete\"\n            onSelected={() => openDialog(DeleteUserDialog, {user})}\n          >\n            <Trans message=\"Delete\" />\n          </MenuItem>\n        </Menu>\n      </MenuTrigger>\n    </header>\n  );\n}\n\ninterface DeleteUserDialogProps {\n  user: User;\n}\nfunction DeleteUserDialog({user}: DeleteUserDialogProps) {\n  const deleteUser = useDeleteUser();\n  const {close} = useDialogContext();\n  return (\n    <ConfirmationDialog\n      isDanger\n      title={<Trans message=\"Delete user\" />}\n      body={\n        <Trans message=\"Are you sure you want to delete this user? This will also delete all tickets created by this user and can't be undone.\" />\n      }\n      onConfirm={() => {\n        deleteUser.mutate(\n          {userId: user.id},\n          {\n            onSuccess: () => close(),\n          },\n        );\n      }}\n      isLoading={deleteUser.isPending}\n      confirm={<Trans message=\"Delete\" />}\n    />\n  );\n}\n\nfunction Tables() {\n  const {userId} = useParams();\n  const {pathname} = useLocation();\n  const [selectedTab, setSelectedTab] = useState(() => {\n    return pathname.endsWith('searches') ? 1 : 0;\n  });\n  return (\n    <div className=\"rounded border\">\n      <Tabs selectedTab={selectedTab} onTabChange={setSelectedTab}>\n        <TabList>\n          <Tab\n            width=\"min-w-132\"\n            elementType={Link}\n            to={getCustomerLink(userId!)}\n            replace\n          >\n            <Trans message=\"Tickets\" />\n          </Tab>\n          <Tab\n            width=\"min-w-132\"\n            elementType={Link}\n            to={getCustomerLink(userId!, {tab: 'searches'})}\n            replace\n          >\n            <Trans message=\"Searches\" />\n          </Tab>\n        </TabList>\n        <div>\n          <Outlet />\n        </div>\n      </Tabs>\n    </div>\n  );\n}\n","import {useParams, useSearchParams} from 'react-router-dom';\nimport {useTickets} from '@app/agent/agent-ticket-page/user-details-sidebar/requests/use-tickets';\nimport {TicketTable} from '@app/agent/agent-ticket-list-page/ticket-table/ticket-table';\nimport React, {useState} from 'react';\nimport {GlobalLoadingProgress} from '@app/agent/global-loading-progress';\nimport searchImage from '@app/agent/agent-search-page/search.svg';\nimport {Trans} from '@common/i18n/trans';\nimport {DataTablePaginationFooter} from '@common/datatable/data-table-pagination-footer';\nimport {IllustratedMessage} from '@common/ui/images/illustrated-message';\nimport {SvgImage} from '@common/ui/images/svg-image/svg-image';\nimport {AnimatePresence} from 'framer-motion';\nimport {TicketTableActions} from '@app/agent/agent-ticket-list-page/ticket-table/ticket-table-actions';\n\nexport function AgentCustomerPageTicketTable() {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const {userId} = useParams();\n  const [selectedTickets, setSelectedTickets] = useState<number[]>([]);\n  const query = useTickets({\n    userId,\n    page: searchParams.get('page') || 1,\n    perPage: searchParams.get('perPage') ?? '',\n    loader: 'ticketTable',\n  });\n\n  const {data, fetchStatus, isLoading, isPlaceholderData} = query;\n  const items = data?.pagination.data || [];\n  const isEmpty =\n    (fetchStatus === 'idle' && items.length === 0) ||\n    (!isLoading && !isPlaceholderData && items.length === 0);\n\n  return (\n    <div className=\"relative\">\n      <GlobalLoadingProgress query={query} />\n      <TicketTable\n        query={query}\n        selectedTickets={selectedTickets}\n        onSelectionChange={setSelectedTickets}\n      />\n      <AnimatePresence>\n        {selectedTickets.length && (\n          <TicketTableActions\n            ticketIds={selectedTickets}\n            onActionCompleted={() => setSelectedTickets([])}\n          />\n        )}\n      </AnimatePresence>\n      {isEmpty && (\n        <IllustratedMessage\n          className=\"mt-48\"\n          image={<SvgImage src={searchImage} />}\n          title={<Trans message=\"User has not created any tickets yet\" />}\n        />\n      )}\n      <DataTablePaginationFooter\n        query={query}\n        onPageChange={page =>\n          setSearchParams(prev => {\n            prev.set('page', page.toString());\n            return prev;\n          })\n        }\n        onPerPageChange={perPage =>\n          setSearchParams(prev => {\n            prev.set('perPage', perPage.toString());\n            return prev;\n          })\n        }\n      />\n    </div>\n  );\n}\n","import {useParams} from 'react-router-dom';\nimport React from 'react';\nimport {SearchReportTable} from '@app/admin/reports/search-report/search-report-table';\nimport {Trans} from '@common/i18n/trans';\n\nexport function CustomerSearchesTable() {\n  const {userId} = useParams();\n  return (\n    <SearchReportTable\n      description={\n        <Trans message=\"This report shows what the user searched for recently.\" />\n      }\n      userId={userId}\n      orderBy=\"last_seen\"\n    />\n  );\n}\n","import {Navigate, RouteObject, useRoutes} from 'react-router-dom';\nimport {AgentTicketListPage} from '@app/agent/agent-ticket-list-page/agent-ticket-list-page';\nimport {AgentSearchPage} from '@app/agent/agent-search-page/agent-search-page';\nimport {SearchTicketsTable} from '@app/agent/agent-search-page/search-tickets/search-tickets-table';\nimport {SearchUsersTable} from '@app/agent/agent-search-page/search-users-table';\nimport {SearchArticlesTable} from '@app/agent/agent-search-page/search-articles-table';\nimport {AgentTicketPage} from '@app/agent/agent-ticket-page/agent-ticket-page';\nimport {NotFoundPage} from '@common/ui/not-found-page/not-found-page';\nimport {AgentCannedRepliesPage} from '@app/agent/agent-canned-replies-page';\nimport {AgentNewTicketPage} from '@app/agent/agent-new-ticket-page/agent-new-ticket-page';\nimport {AgentCustomerPage} from '@app/agent/customer-page/agent-customer-page';\nimport {AgentCustomerPageTicketTable} from '@app/agent/customer-page/agent-customer-page-ticket-table';\nimport {CustomerSearchesTable} from '@app/agent/customer-page/customer-searches-table';\n\nconst RouteConfig: RouteObject[] = [\n  {\n    path: '/',\n    element: <Navigate to=\"/agent/tickets\" replace />,\n  },\n  {\n    path: '/tickets',\n    element: <AgentTicketListPage />,\n  },\n  {\n    path: '/tickets/new',\n    element: <AgentNewTicketPage />,\n  },\n  {\n    path: '/tickets/:ticketId',\n    element: <AgentTicketPage />,\n  },\n  {\n    path: '/users/:userId',\n    element: <AgentCustomerPage />,\n    children: [\n      {path: '', element: <Navigate to=\"tickets\" replace />},\n      {\n        path: 'tickets',\n        element: <AgentCustomerPageTicketTable />,\n      },\n      {\n        path: 'searches',\n        element: <CustomerSearchesTable />,\n      },\n    ],\n  },\n  {\n    path: '/search',\n    element: <AgentSearchPage />,\n    children: [\n      {\n        path: '',\n        element: <SearchTicketsTable />,\n      },\n      {\n        path: 'tickets',\n        element: <SearchTicketsTable />,\n      },\n      {\n        path: 'users',\n        element: <SearchUsersTable />,\n      },\n      {\n        path: 'articles',\n        element: <SearchArticlesTable />,\n      },\n    ],\n  },\n  {\n    path: 'saved-replies',\n    element: <AgentCannedRepliesPage />,\n  },\n  {\n    path: '*',\n    element: <NotFoundPage />,\n  },\n];\n\nexport default function AgentRoutes() {\n  return useRoutes(RouteConfig);\n}\n"],"names":["openedImage","defaultPage","defaultPerPage","useMailboxParams","searchParams","useSearchParams","useNavigateToMailboxTicketTable","navigate","useNavigate","urlParams","useCallback","userParams","link","getMailboxTicketTableLink","useMailboxTicketTableLink","tagId","page","perPage","orderBy","orderDir","TicketTableFooter","onPageChange","onPerPageChange","query","jsx","DataTablePaginationFooter","TicketTableColumns","Trans","ticket","TicketSummary","FormattedRelativeTime","body","_a","_c","_b","tags","_d","t","jsxs","ChipList","tag","Chip","TicketPageLink","className","children","color","linkProps","finalUri","useMemo","getTicketPageLink","Link","clsx","absolute","getBootstrapData","TicketTable","selectedTickets","onSelectionChange","sortDescriptor","onSortChange","Table","values","TicketTableRow","item","domProps","AGENT_PERMISSION","TICKET_MODEL_TYPE","useAgents","useQuery","fetchAgents","apiClient","response","useAssignTicketsToAgent","useMutation","payload","assignTickets","queryClient","toast","message","err","showHttpErrorToast","r","TicketActionButton","forwardRef","startIcon","endIcon","isCompact","buttonProps","ref","Tooltip","IconButton","Button","AssignTicketIcon","createSvgIcon","AssignTicketsButton","ticketIds","onSuccess","data","isOpen","setIsOpen","useState","useKeybind","MenuTrigger","userId","KeyboardArrowDownIcon","Menu","user","Item","UserAvatar","useMailboxSidenavTags","fetchTags","ChangeStatusIcon","ChangeTicketStatusButton","changeStatus","useChangeTicketStatus","newStatus","useAddTagToTickets","addTag","AddTagIcon","AddTagToTicketsButton","DialogTrigger","tagName","AddTagDialog","trans","useTrans","setQuery","selectedTag","setSelectedTag","isFetching","useTags","close","formId","useDialogContext","Dialog","DialogHeader","DialogBody","e","ComboBox","value","result","DialogFooter","useDeleteTickets","deleteTickets","ids","DeleteTicketsButton","DeleteIcon","DeleteTicketsDialog","onDeleted","ConfirmationDialog","TicketTableActions","onActionCompleted","useRef","useAutoFocus","m","TicketTablePage","useTickets","isLoading","isPlaceholderData","items","isEmpty","navigateToTicketTable","setSelectedTickets","Fragment","GlobalLoadingProgress","IllustratedMessage","SvgImage","AnimatePresence","AgentNavbar","element","onOpenSearchPage","defaultOpenSearchPage","Element","SearchTriggerButton","AgentTicketListSidenav","Heading","InboxIcon","TagList","FolderIcon","SettingsIcon","KeyboardArrowUpIcon","icon","listItemClassName","type","skeletons","opacityAnimation","_","index","Skeleton","TagListItem","isActive","NavLink","AgentPageLayout","rightSidenav","DashboardLayout","DashboardNavbar","DashboardSidenav","DashboardContent","AgentTicketListPage","c","u","i","a","o","f","v","d","n","g","w","s","x","y","h","useSearchTicketsFilters","FilterOperator","FilterControlType","createdAtFilter","updatedAtFilter","timestampFilter","USER_MODEL","useStableScrollbar","disable","useEffect","PageTabs","AgentSearchPage","setSearchParams","searchParamsQuery","pathname","useLocation","tabName","selectedTab","tab","searchInputRef","searchQuery","_setSearchQuery","updateQueryParams","prev","debouncedUpdateQueryParams","useDebouncedCallback","setSearchQuery","focusSearchInput","filters","showFilters","Navbar","TextField","SearchIcon","AddFilterButton","FilterList","Tabs","TabList","Tab","Outlet","useSearchTickets","params","enabled","fetchTickets","keepPreviousData","SearchTableLayout","fetchStatus","DataTableEmptyStateMessage","searchImage","SearchTicketsTable","useSearchUsers","fetchUsers","columnConfig","NameWithAvatar","role","FormattedDate","SearchUsersTable","article","ArticleIcon","ArticlePath","SearchArticlesTable","useSearchArticles","getArticleLink","AddNoteIcon","BackToTicketsIcon","AfterReplyActions","useAfterReplyAction","ticketId","useParams","backToTicketTable","replies","useSettings","defaultAction","action","setAction","useLocalStorage","perform","useCreateNote","createNote","CreateNoteDialog","editorRef","attachments","setAttachments","handleSubmit","getReplyBody","FileUploadProvider","ReplyEditor","TicketPageToolbar","backLink","afterReplyAction","AddNoteButton","useDeleteReply","deleteReply","useUpdateReply","updateReply","reply","ReplyAttachmentList","AttachmentListLayout","attachment","FileEntryAttachmentLayout","openDialog","DeleteAttachmentDialog","UpdateReplyDialog","title","useOriginalReplyEmail","replyId","fetchEmail","OriginalEmailPreviewDialog","base_url","activeTab","setActiveTab","ButtonGroup","Content","Status","key","FullPageLoader","ErrorIcon","AgentTicketPageReplyList","draft","editorIsOpen","useTicketPageStore","showDraft","useTicketReplies","TicketReplyLayout","ReplyActionsButton","isInitial","InfiniteScrollSentinel","MoreVertIcon","ConfirmDeleteReplyDialog","closeDialog","useRemoveTagFromTickets","removeTag","updateTicketQuery","old","TicketPageHeader","removeTags","openEditor","useOpenReplyEditor","handleRemoveTag","TicketHeaderLayout","ReplyIcon","TicketTagList","UserDetailsSection","label","name","isVisible","setIsVisible","PurchaseCodeDetailsDialog","purchaseCode","syncPurchases","useSyncEnvatoPurchases","LinkStyle","Detail","EnvatoPurchaseList","purchases","itemClassName","activePurchase","purchase","TicketPagePurchaseList","currentPurchase","category","bestMatch","categoryName","code","PersonIcon","useActivityLog","useInfiniteData","ARTICLE_MODEL","SEARCH_TERM_MODEL","Timeline","Children","cloneElement","TimelineItem","isLast","timePreset","ActivityList","timeline","activity","ListItem","ArticleLink","TicketListItem","term","useMergeTickets","mergeTickets","TicketPreviewDialog","useTicket","Actions","PageStatus","newTicket","ConfirmMergeDialog","ReplyList","AttachmentList","useUpdateTicket","form","updateTicket","onFormQueryError","ChangeCustomerDialog","useForm","Form","FormNormalizedModelField","UserDetailsSidebar","tickets","CustomerDetails","OtherTickets","envato","editLink","getCustomerLink","EmailIcon","ButtonBase","useSaveDraft","updateActiveDraft","setEditorIsOpen","saveDraft","activeDraft","useBackgroundDraftSave","ticketPageStore","useSubmitAgentReply","deleteDraft","useDeleteDraft","setTicketIsSaving","submitReply","q","shouldIgnoreQuery","isActiveTicket","isOtherUserTickets","AgentReplyEditorDraftButtons","size","isDirty","isSaving","handleDraftSave","handleDraftDelete","CheckCircleIcon","useCannedReplies","useAuth","signal","fetchCannedReplies","resolve","CannedReplySelector","onSelected","CommentIcon","CreateCannedReplyDialog","TicketPageDocsSearchInput","hcCategories","useTicketHcCategories","inputRef","AgentReplyEditor","addGlobalListener","useGlobalListeners","getFromLocalStorage","handleBackgroundSave","insertLinkIntoTextEditor","MenubarButtons","FooterButtons","onSubmit","StatusSelector","SendReplyButton","AfterReplyActionSelector","disabled","newValue","ArrowDropDownIcon","MenuItem","selectedStatus","setSelectedStatus","AgentTicketPage","TicketContent","branding","previousTicketId","usePrevious","defaultDraftValues","Helmet","AgentCannedRepliesPage","CannedRepliesDatatablePage","AgentNewTicketPage","TicketForm","statusTags","categoryTags","customerId","bodyError","createTicket","useCreateTicket","inputFieldClassNames","getInputFieldClassNames","FormTextField","FormSelect","status","useUpdateUserDetails","updateDetails","borderColor","AgentCustomerPageSidebar","FormWrapper","getLocalTimeZone","EmailsSection","LocalizationFields","FormChipField","DetailsField","NotesField","fields","append","remove","useFieldArray","AddIcon","field","CloseIcon","useValueLists","countries","localizations","timezones","TimezoneSelect","localization","Option","country","InfoDialogTrigger","align","useDeleteUser","deleteUser","useMergeUsers","mergeUsers","MergeUsersDialog","mergee","selectedUserId","AgentCustomerPage","useUser","prefetchValueLists","LeftSidebar","Header","Tables","isMobileMode","useContext","DashboardLayoutContext","banReason","MoreHorizIcon","BanUserDialog","DeleteUserDialog","setSelectedTab","AgentCustomerPageTicketTable","CustomerSearchesTable","SearchReportTable","RouteConfig","Navigate","NotFoundPage","AgentRoutes","useRoutes"],"mappings":"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","x_google_ignoreList":[26]}