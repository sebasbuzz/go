{"version":3,"file":"search-trigger-button-ce677600.mjs","sources":["../../../common/resources/client/utils/dom/is-any-input-focused.ts","../../../common/resources/client/utils/keybinds/use-keybind.ts","../../../resources/client/help-center/search/search-trigger-button.tsx"],"sourcesContent":["export function isAnyInputFocused(): boolean {\n  return document.activeElement\n    ? ['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName) ||\n        (document.activeElement as HTMLElement).isContentEditable\n    : false;\n}\n","import {useGlobalListeners} from '@react-aria/utils';\nimport {useCallbackRef} from '@common/utils/hooks/use-callback-ref';\nimport {useEffect} from 'react';\nimport {isCtrlKeyPressed} from '@common/utils/keybinds/is-ctrl-key-pressed';\nimport {isAnyInputFocused} from '@common/utils/dom/is-any-input-focused';\n\ninterface Options {\n  allowedInputSelector?: string;\n}\n\nexport function useKeybind(\n  el: HTMLElement | 'window',\n  shortcut: string,\n  userCallback: (e: KeyboardEvent) => void,\n  {allowedInputSelector}: Options = {},\n) {\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n  const callback = useCallbackRef(userCallback);\n\n  useEffect(() => {\n    const target = el === 'window' ? window : el;\n    addGlobalListener(target, 'keydown', (e: KeyboardEvent) => {\n      if (!shouldIgnoreActiveEl(allowedInputSelector) && isAnyInputFocused()) {\n        return;\n      }\n      const matches = shortcut.split('+').every(key => {\n        if (key === 'ctrl') {\n          return isCtrlKeyPressed(e);\n        } else {\n          return e.key === key;\n        }\n      });\n      if (matches) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback(e);\n      }\n    });\n    return removeAllGlobalListeners;\n  }, [\n    addGlobalListener,\n    shortcut,\n    removeAllGlobalListeners,\n    callback,\n    el,\n    allowedInputSelector,\n  ]);\n}\n\nfunction shouldIgnoreActiveEl(selector?: string) {\n  if (!selector || !document.activeElement) {\n    return false;\n  }\n  return (document.activeElement as HTMLElement).closest(selector);\n}\n","import React, {forwardRef, ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {SearchIcon} from '@common/icons/material/Search';\nimport {ButtonBase} from '@common/ui/buttons/button-base';\nimport {useKeybind} from '@common/utils/keybinds/use-keybind';\n\nconst ignoredElements = ['INPUT', 'TEXTAREA', 'SELECT', 'BUTTON'];\n\nexport interface SearchTriggerButtonProps {\n  onTrigger: () => void;\n  onClick?: () => void;\n  bg?: string;\n  radius?: string;\n  width?: string;\n  className?: string;\n  children: ReactNode;\n  size?: 'sm' | 'lg';\n}\n\nexport const SearchTriggerButton = forwardRef<\n  HTMLButtonElement,\n  SearchTriggerButtonProps\n>(\n  (\n    {\n      onTrigger,\n      size,\n      children,\n      bg,\n      width,\n      radius = 'rounded-input',\n      className,\n      onClick,\n      ...buttonProps\n    },\n    ref,\n  ) => {\n    useKeybind('window', 'ctrl+k', e => {\n      if (!ignoredElements.includes((e?.target as HTMLElement).tagName)) {\n        onTrigger();\n      }\n    });\n\n    return (\n      <ButtonBase\n        ref={ref}\n        {...buttonProps}\n        display=\"block\"\n        onClick={e => onTrigger()}\n        justify=\"justify-none\"\n        className=\"flex-shrink-0\"\n      >\n        <span\n          className={clsx(\n            'hidden items-center border bg-background text-muted shadow-sm transition-shadow focus:border-primary/60 focus:outline-none focus:ring focus:ring-primary/focus md:flex',\n            size === 'sm' && 'h-36 gap-6 px-12 text-sm',\n            size === 'lg' && 'text-md h-60 gap-12 px-24',\n            bg,\n            width,\n            radius,\n            className,\n          )}\n        >\n          <SearchIcon\n            className=\"text-muted\"\n            size={size === 'sm' ? 'sm' : 'md'}\n          />\n          <span>{children}</span>\n          <kbd className=\"ml-auto hidden font-medium md:block\">\n            <kbd className=\"font-sans\">âŒ˜</kbd>\n            <kbd className=\"font-sans\">K</kbd>\n          </kbd>\n        </span>\n        <span className=\"focus:border-primary/60 focus:outline-none focus:ring focus:ring-primary/focus md:hidden\">\n          <SearchIcon />\n        </span>\n      </ButtonBase>\n    );\n  },\n);\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,oBAA6B;AAC3C,SAAO,SAAS,gBACZ,CAAC,SAAS,UAAU,EAAE,SAAS,SAAS,cAAc,OAAO,KAC1D,SAAS,cAA8B,oBAC1C;AACN;ACKgB,SAAA,WACd,IACA,UACA,cACA,EAAC,qBAAoB,IAAa,IAClC;AACA,QAAM,EAAC,mBAAmB,yBAAwB,IAAI,mBAAmB;AACnE,QAAA,WAAW,eAAe,YAAY;AAE5C,YAAU,MAAM;AACR,UAAA,SAAS,OAAO,WAAW,SAAS;AACxB,sBAAA,QAAQ,WAAW,CAAC,MAAqB;AACzD,UAAI,CAAC,qBAAqB,oBAAoB,KAAK,qBAAqB;AACtE;AAAA,MACF;AACA,YAAM,UAAU,SAAS,MAAM,GAAG,EAAE,MAAM,CAAO,QAAA;AAC/C,YAAI,QAAQ,QAAQ;AAClB,iBAAO,iBAAiB,CAAC;AAAA,QAAA,OACpB;AACL,iBAAO,EAAE,QAAQ;AAAA,QACnB;AAAA,MAAA,CACD;AACD,UAAI,SAAS;AACX,UAAE,eAAe;AACjB,UAAE,gBAAgB;AAClB,iBAAS,CAAC;AAAA,MACZ;AAAA,IAAA,CACD;AACM,WAAA;AAAA,EAAA,GACN;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AACH;AAEA,SAAS,qBAAqB,UAAmB;AAC/C,MAAI,CAAC,YAAY,CAAC,SAAS,eAAe;AACjC,WAAA;AAAA,EACT;AACQ,SAAA,SAAS,cAA8B,QAAQ,QAAQ;AACjE;AChDA,MAAM,kBAAkB,CAAC,SAAS,YAAY,UAAU,QAAQ;AAazD,MAAM,sBAAsB;AAAA,EAIjC,CACE;AAAA,IACE;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,SAAS;AAAA,IACT;AAAA,IACA;AAAA,IACA,GAAG;AAAA,KAEL,QACG;AACQ,eAAA,UAAU,UAAU,CAAK,MAAA;AAClC,UAAI,CAAC,gBAAgB,UAAU,uBAAG,QAAuB,OAAO,GAAG;AACvD;MACZ;AAAA,IAAA,CACD;AAGC,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC;AAAA,QACC,GAAG;AAAA,QACJ,SAAQ;AAAA,QACR,SAAS,OAAK,UAAU;AAAA,QACxB,SAAQ;AAAA,QACR,WAAU;AAAA,QAEV,UAAA;AAAA,UAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,WAAW;AAAA,gBACT;AAAA,gBACA,SAAS,QAAQ;AAAA,gBACjB,SAAS,QAAQ;AAAA,gBACjB;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,cACF;AAAA,cAEA,UAAA;AAAA,gBAAA;AAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,WAAU;AAAA,oBACV,MAAM,SAAS,OAAO,OAAO;AAAA,kBAAA;AAAA,gBAC/B;AAAA,gBACA,oBAAC,UAAM,UAAS;AAAA,gBAChB,qBAAC,OAAI,EAAA,WAAU,uCACb,UAAA;AAAA,kBAAC,oBAAA,OAAA,EAAI,WAAU,aAAY,UAAC,KAAA;AAAA,kBAC3B,oBAAA,OAAA,EAAI,WAAU,aAAY,UAAC,KAAA;AAAA,gBAAA,GAC9B;AAAA,cAAA;AAAA,YAAA;AAAA,UACF;AAAA,8BACC,QAAK,EAAA,WAAU,4FACd,UAAA,oBAAC,aAAW,CAAA,GACd;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAGN;AACF;"}